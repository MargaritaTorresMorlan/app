(function(a,b){typeof module=="object"&&typeof module.exports=="object"?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)})(typeof window!="undefined"?window:this,function(window,noGlobal){function isArraylike(a){var b=a.length,c=jQuery.type(a);return c==="function"||jQuery.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||b===0||typeof b=="number"&&b>0&&b-1 in a}function winnow(a,b,c){if(jQuery.isFunction(b))return jQuery.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return jQuery.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(risSimple.test(b))return jQuery.filter(b,a,c);b=jQuery.filter(b,a)}return jQuery.grep(a,function(a){return indexOf.call(b,a)>=0!==c})}function sibling(a,b){while((a=a[b])&&a.nodeType!==1);return a}function createOptions(a){var b=optionsCache[a]={};return jQuery.each(a.match(rnotwhite)||[],function(a,c){b[c]=!0}),b}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(a,b,c){var d;if(c===undefined&&a.nodeType===1){d="data-"+b.replace(rmultiDash,"-$1").toLowerCase(),c=a.getAttribute(d);if(typeof c=="string"){try{c=c==="true"?!0:c==="false"?!1:c==="null"?null:+c+""===c?+c:rbrace.test(c)?jQuery.parseJSON(c):c}catch(e){}data_user.set(a,b,c)}else c=undefined}return c}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(a){}}function manipulationTarget(a,b){return jQuery.nodeName(a,"table")&&jQuery.nodeName(b.nodeType!==11?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function disableScript(a){return a.type=(a.getAttribute("type")!==null)+"/"+a.type,a}function restoreScript(a){var b=rscriptTypeMasked.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function setGlobalEval(a,b){var c=0,d=a.length;for(;c<d;c++)data_priv.set(a[c],"globalEval",!b||data_priv.get(b[c],"globalEval"))}function cloneCopyEvent(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(data_priv.hasData(a)){f=data_priv.access(a),g=data_priv.set(b,f),j=f.events;if(j){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)jQuery.event.add(b,e,j[e][c])}}data_user.hasData(a)&&(h=data_user.access(a),i=jQuery.extend({},h),data_user.set(b,i))}function getAll(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return b===undefined||b&&jQuery.nodeName(a,b)?jQuery.merge([a],c):c}function fixInput(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&rcheckableType.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function actualDisplay(a,b){var c=jQuery(b.createElement(a)).appendTo(b.body),d=window.getDefaultComputedStyle?window.getDefaultComputedStyle(c[0]).display:jQuery.css(c[0],"display");return c.detach(),d}function defaultDisplay(a){var b=document,c=elemdisplay[a];if(!c){c=actualDisplay(a,b);if(c==="none"||!c)iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=iframe[0].contentDocument,b.write(),b.close(),c=actualDisplay(a,b),iframe.detach();elemdisplay[a]=c}return c}function curCSS(a,b,c){var d,e,f,g,h=a.style;return c=c||getStyles(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(g===""&&!jQuery.contains(a.ownerDocument,a)&&(g=jQuery.style(a,b)),rnumnonpx.test(g)&&rmargin.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),g!==undefined?g+"":g}function addGetHookIf(a,b){return{get:function(){if(a()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}function vendorPropName(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=cssPrefixes.length;while(e--){b=cssPrefixes[e]+c;if(b in a)return b}return d}function setPositiveNumber(a,b,c){var d=rnumsplit.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function augmentWidthOrHeight(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2)c==="margin"&&(g+=jQuery.css(a,c+cssExpand[f],!0,e)),d?(c==="content"&&(g-=jQuery.css(a,"padding"+cssExpand[f],!0,e)),c!=="margin"&&(g-=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e))):(g+=jQuery.css(a,"padding"+cssExpand[f],!0,e),c!=="padding"&&(g+=jQuery.css(a,"border"+cssExpand[f]+"Width",!0,e)));return g}function getWidthOrHeight(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=getStyles(a),g=jQuery.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=curCSS(a,b,f);if(e<0||e==null)e=a.style[b];if(rnumnonpx.test(e))return e;d=g&&(support.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+augmentWidthOrHeight(a,b,c||(g?"border":"content"),d,f)+"px"}function showHide(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=data_priv.get(d,"olddisplay"),c=d.style.display,b?(!f[g]&&c==="none"&&(d.style.display=""),d.style.display===""&&isHidden(d)&&(f[g]=data_priv.access(d,"olddisplay",defaultDisplay(d.nodeName)))):f[g]||(e=isHidden(d),(c&&c!=="none"||!e)&&data_priv.set(d,"olddisplay",e?c:jQuery.css(d,"display")))}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function Tween(a,b,c,d,e){return new Tween.prototype.init(a,b,c,d,e)}function createFxNow(){return setTimeout(function(){fxNow=undefined}),fxNow=jQuery.now()}function genFx(a,b){var c,d=0,e={height:a};b=b?1:0;for(;d<4;d+=2-b)c=cssExpand[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function createTween(a,b,c){var d,e=(tweeners[b]||[]).concat(tweeners["*"]),f=0,g=e.length;for(;f<g;f++)if(d=e[f].call(c,b,a))return d}function defaultPrefilter(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&isHidden(a),o=data_priv.get(a,"fxshow");c.queue||(h=jQuery._queueHooks(a,"fx"),h.unqueued==null&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,jQuery.queue(a,"fx").length||h.empty.fire()})})),a.nodeType===1&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=jQuery.css(a,"display"),j==="none"&&(j=defaultDisplay(a.nodeName)),j==="inline"&&jQuery.css(a,"float")==="none"&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b){e=b[d];if(rfxtypes.exec(e)){delete b[d],f=f||e==="toggle";if(e===(n?"hide":"show"))if(e==="show"&&o&&o[d]!==undefined)n=!0;else continue;l[d]=o&&o[d]||jQuery.style(a,d)}}if(!jQuery.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=data_priv.access(a,"fxshow",{}),f&&(o.hidden=!n),n?jQuery(a).show():k.done(function(){jQuery(a).hide()}),k.done(function(){var b;data_priv.remove(a,"fxshow");for(b in l)jQuery.style(a,b,l[b])});for(d in l)g=createTween(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start=d==="width"||d==="height"?1:0))}}function propFilter(a,b){var c,d,e,f,g;for(c in a){d=jQuery.camelCase(c),e=b[d],f=a[c],jQuery.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=jQuery.cssHooks[d];if(g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}}function Animation(a,b,c){var d,e,f=0,g=animationPrefilters.length,h=jQuery.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=fxNow||createFxNow(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:jQuery.extend({},b),opts:jQuery.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:fxNow||createFxNow(),duration:c.duration,tweens:[],createTween:function(b,c){var d=jQuery.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;propFilter(k,j.opts.specialEasing);for(;f<g;f++){d=animationPrefilters[f].call(j,a,k,j.opts);if(d)return d}return jQuery.map(k,createTween,j),jQuery.isFunction(j.opts.start)&&j.opts.start.call(a,j),jQuery.fx.timer(jQuery.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function addToPrefiltersOrTransports(a){return function(b,c){typeof b!="string"&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(c))while(d=f[e++])d[0]==="+"?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function inspectPrefiltersOrTransports(a,b,c,d){function g(h){var i;return e[h]=!0,jQuery.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!f&&!e[j])return b.dataTypes.unshift(j),g(j),!1;if(f)return!(i=j)}),i}var e={},f=a===transports;return g(b.dataTypes[0])||!e["*"]&&g("*")}function ajaxExtend(a,b){var c,d,e=jQuery.ajaxSettings.flatOptions||{};for(c in b)b[c]!==undefined&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&jQuery.extend(!0,a,d),a}function ajaxHandleResponses(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(i[0]==="*")i.shift(),d===undefined&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function ajaxConvert(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function buildParams(a,b,c,d){var e;if(jQuery.isArray(b))jQuery.each(b,function(b,e){c||rbracket.test(a)?d(a,e):buildParams(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&jQuery.type(b)==="object")for(e in b)buildParams(a+"["+e+"]",b[e],c,d);else d(a,b)}function getWindow(a){return jQuery.isWindow(a)?a:a.nodeType===9&&a.defaultView}var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,trim="".trim,support={},document=window.document,version="2.1.0",jQuery=function(a,b){return new jQuery.fn.init(a,b)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(a,b){return b.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(a){return a!=null?a<0?this[a+this.length]:this[a]:slice.call(this)},pushStack:function(a){var b=jQuery.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return jQuery.each(this,a,b)},map:function(a){return this.pushStack(jQuery.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},jQuery.extend=jQuery.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;typeof g=="boolean"&&(j=g,g=arguments[h]||{},h++),typeof g!="object"&&!jQuery.isFunction(g)&&(g={}),h===i&&(g=this,h--);for(;h<i;h++)if((a=arguments[h])!=null)for(b in a){c=g[b],d=a[b];if(g===d)continue;j&&d&&(jQuery.isPlainObject(d)||(e=jQuery.isArray(d)))?(e?(e=!1,f=c&&jQuery.isArray(c)?c:[]):f=c&&jQuery.isPlainObject(c)?c:{},g[b]=jQuery.extend(j,f,d)):d!==undefined&&(g[b]=d)}return g},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return jQuery.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if(jQuery.type(a)!=="object"||a.nodeType||jQuery.isWindow(a))return!1;try{if(a.constructor&&!hasOwn.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return a==null?a+"":typeof a=="object"||typeof a=="function"?class2type[toString.call(a)]||"object":typeof a},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code),code&&(code.indexOf("use strict")===1?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(a){return a.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a);if(c)if(g)for(;e<f;e++){d=b.apply(a[e],c);if(d===!1)break}else for(e in a){d=b.apply(a[e],c);if(d===!1)break}else if(g)for(;e<f;e++){d=b.call(a[e],e,a[e]);if(d===!1)break}else for(e in a){d=b.call(a[e],e,a[e]);if(d===!1)break}return a},trim:function(a){return a==null?"":trim.call(a)},makeArray:function(a,b){var c=b||[];return a!=null&&(isArraylike(Object(a))?jQuery.merge(c,typeof a=="string"?[a]:a):push.call(c,a)),c},inArray:function(a,b,c){return b==null?-1:indexOf.call(b,a,c)},merge:function(a,b){var c=+b.length,d=0,e=a.length;for(;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length,h=!c;for(;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e=0,f=a.length,g=isArraylike(a),h=[];if(g)for(;e<f;e++)d=b(a[e],e,c),d!=null&&h.push(d);else for(e in a)d=b(a[e],e,c),d!=null&&h.push(d);return concat.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;return typeof b=="string"&&(c=a[b],b=a,a=c),jQuery.isFunction(a)?(d=slice.call(arguments,2),e=function(){return a.apply(b||this,d.concat(slice.call(arguments)))},e.guid=a.guid=a.guid||jQuery.guid++,e):undefined},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){class2type["[object "+b+"]"]=b.toLowerCase()});var Sizzle=function(a){function bd(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;(b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[];if(!a||typeof a!="string")return d;if((i=b.nodeType)!==1&&i!==9)return[];if(n&&!e){if(f=Z.exec(a))if(h=f[1]){if(i===9){g=b.getElementById(h);if(!g||!g.parentNode)return d;if(g.id===h)return d.push(g),d}else if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h)return d.push(g),d}else{if(f[2])return G.apply(d,b.getElementsByTagName(a)),d;if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(h)),d}if(c.qsa&&(!o||!o.test(a))){q=p=s,u=b,v=i===9&&a;if(i===1&&b.nodeName.toLowerCase()!=="object"){m=bo(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--)m[j]=q+bp(m[j]);u=$.test(a)&&bm(b.parentNode)||b,v=m.join(",")}if(v)try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}return bx(a.replace(P,"$1"),b,d,e)}function be(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function bf(a){return a[s]=!0,a}function bg(a){var b=l.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function bh(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function bi(a,b){var c=b&&a,d=c&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function bj(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function bk(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function bl(a){return bf(function(b){return b=+b,bf(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function bm(a){return a&&typeof a.getElementsByTagName!==A&&a}function bn(){}function bo(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){if(!c||(e=Q.exec(h)))e&&(h=h.slice(e[0].length)||h),i.push(f=[]);c=!1;if(e=R.exec(h))c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length);for(g in d.filter)(e=V[g].exec(h))&&(!j[g]||(e=j[g](e)))&&(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?bd.error(a):x(a,i).slice(0)}function bp(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function bq(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=v++;return b.first?function(b,c,f){while(b=b[d])if(b.nodeType===1||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d])if(b.nodeType===1||e)if(a(b,c,g))return!0}else while(b=b[d])if(b.nodeType===1||e){i=b[s]||(b[s]={});if((h=i[d])&&h[0]===u&&h[1]===f)return j[2]=h[2];i[d]=j;if(j[2]=a(b,c,g))return!0}}}function br(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function bs(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),j&&b.push(h);return g}function bt(a,b,c,d,e,f){return d&&!d[s]&&(d=bt(d)),e&&!e[s]&&(e=bt(e,f)),bf(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||bw(b||"*",h.nodeType?[h]:h,[]),q=a&&(f||!b)?bs(p,m,a,h,i):p,r=c?e||(f?a:o||d)?[]:g:q;c&&c(q,r,h,i);if(d){j=bs(r,n),d(j,[],h,i),k=j.length;while(k--)if(l=j[k])r[n[k]]=!(q[n[k]]=l)}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=bs(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function bu(a){var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=bq(function(a){return a===b},i,!0),l=bq(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return!g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];for(;j<f;j++)if(c=d.relative[a[j].type])m=[bq(br(m),c)];else{c=d.filter[a[j].type].apply(null,a[j].matches);if(c[s]){e=++j;for(;e<f;e++)if(d.relative[a[e].type])break;return bt(j>1&&br(m),j>1&&bp(a.slice(0,j-1).concat({value:a[j-2].type===" "?"*":""})).replace(P,"$1"),c,j<e&&bu(a.slice(j,e)),e<f&&bu(a=a.slice(e)),e<f&&bp(a))}m.push(c)}return br(m)}function bv(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=t==null?1:Math.random()||.1,x=v.length;k&&(h=g!==l&&g);for(;q!==x&&(m=v[q])!=null;q++){if(e&&m){n=0;while(o=a[n++])if(o(m,g,i)){j.push(m);break}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}p+=q;if(c&&q!==p){n=0;while(o=b[n++])o(r,s,g,i);if(f){if(p>0)while(q--)!r[q]&&!s[q]&&(s[q]=E.call(j));s=bs(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&bd.uniqueSort(j)}return k&&(u=w,h=t),r};return c?bf(f):f}function bw(a,b,c){var d=0,e=b.length;for(;d<e;d++)bd(a,b[d],c);return c}function bx(a,b,e,f){var h,i,j,k,l,m=bo(a);if(!f&&m.length===1){i=m[0]=m[0].slice(0);if(i.length>2&&(j=i[0]).type==="ID"&&c.getById&&b.nodeType===9&&n&&d.relative[i[1].type]){b=(d.find.ID(j.matches[0].replace(ba,bb),b)||[])[0];if(!b)return e;a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){j=i[h];if(d.relative[k=j.type])break;if(l=d.find[k])if(f=l(j.matches[0].replace(ba,bb),$.test(i[0].type)&&bm(b.parentNode)||b)){i.splice(h,1),a=f.length&&bp(i);if(!a)return G.apply(e,f),e;break}}}return g(a,m)(f,b,!n,e,$.test(a)&&bm(b.parentNode)||b),e}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+ -(new Date),t=a.document,u=0,v=0,w=be(),x=be(),y=be(),z=function(a,b){return a===b&&(j=!0),0},A=typeof undefined,B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(bc){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}c=bd.support={},f=bd.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1},k=bd.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;if(e===l||e.nodeType!==9||!e.documentElement)return l;l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=bg(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=bg(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&bg(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",a.getElementsByClassName("i").length===2}),c.getById=bg(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==A)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==A&&n)return b.getElementsByClassName(a)},p=[],o=[];if(c.qsa=Y.test(e.querySelectorAll))bg(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),bg(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")});return(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&bg(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},z=b?function(a,b){if(a===b)return j=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,d&1||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:d&4?-1:1)}:function(a,b){if(a===b)return j=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0;if(f===g)return bi(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)k.unshift(c);while(h[d]===k[d])d++;return d?bi(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e},bd.matches=function(a,b){return bd(a,null,null,b)},bd.matchesSelector=function(a,b){(a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']");if(c.matchesSelector&&n&&(!p||!p.test(b))&&(!o||!o.test(b)))try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&a.document.nodeType!==11)return d}catch(e){}return bd(b,l,null,[a]).length>0},bd.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},bd.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):undefined;return f!==undefined?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},bd.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},bd.uniqueSort=function(a){var b,d=[],e=0,f=0;j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z);if(j){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return i=null,a},e=bd.getText=function(a){var b,c="",d=0,f=a.nodeType;if(!f)while(b=a[d++])c+=e(b);else if(f===1||f===9||f===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(f===3||f===4)return a.nodeValue;return c},d=bd.selectors={cacheLength:50,createPseudo:bf,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,bb),a[3]=(a[4]||a[5]||"").replace(ba,bb),a[2]==="~="&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),a[1].slice(0,3)==="nth"?(a[3]||bd.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd")),a[5]=+(a[7]+a[8]||a[3]==="odd")):a[3]&&bd.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&a[4]!==undefined?a[2]=a[4]:c&&T.test(c)&&(b=bo(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,bb).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=bd.attr(d,a);return e==null?b==="!=":b?(e+="",b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[u,n,m];break}}else if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){t&&((l[s]||(l[s]={}))[a]=[u,m]);if(l===b)break}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||bd.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?bf(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:bf(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?bf(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:bf(function(a){return function(b){return bd(a,b).length>0}}),contains:bf(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:bf(function(a){return U.test(a||"")||bd.error("unsupported lang: "+a),a=a.replace(ba,bb).toLowerCase(),function(b){var c;do if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||c.indexOf(a+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text")},first:bl(function(){return[0]}),last:bl(function(a,b){return[b-1]}),eq:bl(function(a,b,c){return[c<0?c+b:c]}),even:bl(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:bl(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:bl(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:bl(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=bj(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=bk(b);return bn.prototype=d.filters=d.pseudos,d.setFilters=new bn,g=bd.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=bo(a)),c=b.length;while(c--)f=bu(b[c]),f[s]?d.push(f):e.push(f);f=y(a,bv(e,d))}return f},c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=bg(function(a){return a.compareDocumentPosition(l.createElement("div"))&1}),bg(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild.getAttribute("href")==="#"})||bh("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,b.toLowerCase()==="type"?1:2)}),(!c.attributes||!bg(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),a.firstChild.getAttribute("value")===""}))&&bh("value",function(a,b,c){if(!c&&a.nodeName.toLowerCase()==="input")return a.defaultValue}),bg(function(a){return a.getAttribute("disabled")==null})||bh(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),bd}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),b.length===1&&d.nodeType===1?jQuery.find.matchesSelector(d,a)?[d]:[]:jQuery.find.matches(a,jQuery.grep(b,function(a){return a.nodeType===1}))},jQuery.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if(typeof a!="string")return this.pushStack(jQuery(a).filter(function(){for(b=0;b<c;b++)if(jQuery.contains(e[b],this))return!0}));for(b=0;b<c;b++)jQuery.find(a,e[b],d);return d=this.pushStack(c>1?jQuery.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(winnow(this,a||[],!1))},not:function(a){return this.pushStack(winnow(this,a||[],!0))},is:function(a){return!!winnow(this,typeof a=="string"&&rneedsContext.test(a)?jQuery(a):a||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(a,b){var c,d;if(!a)return this;if(typeof a=="string"){a[0]==="<"&&a[a.length-1]===">"&&a.length>=3?c=[null,a,null]:c=rquickExpr.exec(a);if(c&&(c[1]||!b)){if(c[1]){b=b instanceof jQuery?b[0]:b,jQuery.merge(this,jQuery.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:document,!0));if(rsingleTag.test(c[1])&&jQuery.isPlainObject(b))for(c in b)jQuery.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=document.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=document,this.selector=a,this}return!b||b.jquery?(b||rootjQuery).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):jQuery.isFunction(a)?typeof rootjQuery.ready!="undefined"?rootjQuery.ready(a):a(jQuery):(a.selector!==undefined&&(this.selector=a.selector,this.context=a.context),jQuery.makeArray(a,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(a,b,c){var d=[],e=c!==undefined;while((a=a[b])&&a.nodeType!==9)if(a.nodeType===1){if(e&&jQuery(a).is(c))break;d.push(a)}return d},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}}),jQuery.fn.extend({has:function(a){var b=jQuery(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(jQuery.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g=rneedsContext.test(a)||typeof a!="string"?jQuery(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&jQuery.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?jQuery.unique(f):f)},index:function(a){return a?typeof a=="string"?indexOf.call(jQuery(a),this[0]):indexOf.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(a,b))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}),jQuery.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return jQuery.dir(a,"parentNode")},parentsUntil:function(a,b,c){return jQuery.dir(a,"parentNode",c)},next:function(a){return sibling(a,"nextSibling")},prev:function(a){return sibling(a,"previousSibling")},nextAll:function(a){return jQuery.dir(a,"nextSibling")},prevAll:function(a){return jQuery.dir(a,"previousSibling")},nextUntil:function(a,b,c){return jQuery.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return jQuery.dir(a,"previousSibling",c)},siblings:function(a){return jQuery.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return jQuery.sibling(a.firstChild)},contents:function(a){return a.contentDocument||jQuery.merge([],a.childNodes)}},function(a,b){jQuery.fn[a]=function(c,d){var e=jQuery.map(this,b,c);return a.slice(-5)!=="Until"&&(d=c),d&&typeof d=="string"&&(e=jQuery.filter(d,e)),this.length>1&&(guaranteedUnique[a]||jQuery.unique(e),rparentsprev.test(a)&&e.reverse()),this.pushStack(e)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(a){a=typeof a=="string"?optionsCache[a]||createOptions(a):jQuery.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;for(;h&&g<f;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;(function g(b){jQuery.each(b,function(b,c){var d=jQuery.type(c);d==="function"?(!a.unique||!k.has(c))&&h.push(c):c&&c.length&&d!=="string"&&g(c)})})(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&jQuery.each(arguments,function(a,b){var c;while((c=jQuery.inArray(b,h,c))>-1)h.splice(c,1),d&&(c<=f&&f--,c<=g&&g--)}),this},has:function(a){return a?jQuery.inArray(a,h)>-1:!!h&&!!h.length},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=undefined,this},disabled:function(){return!h},lock:function(){return i=undefined,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return h&&(!c||i)&&(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},jQuery.extend({Deferred:function(a){var b=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return jQuery.Deferred(function(c){jQuery.each(b,function(b,f){var g=jQuery.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&jQuery.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return a!=null?jQuery.extend(a,d):d}},e={};return d.pipe=d.then,jQuery.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=slice.call(arguments),d=c.length,e=d!==1||a&&jQuery.isFunction(a.promise)?d:0,f=e===1?a:jQuery.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?slice.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d),i=new Array(d),j=new Array(d);for(;b<d;b++)c[b]&&jQuery.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}return e||f.resolveWith(j,c),f.promise()}});var readyList;jQuery.fn.ready=function(a){return jQuery.ready.promise().done(a),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(a){a?jQuery.readyWait++:jQuery.ready(!0)},ready:function(a){if(a===!0?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=!0;if(a!==!0&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}}),jQuery.ready.promise=function(a){return readyList||(readyList=jQuery.Deferred(),document.readyState==="complete"?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(a)},jQuery.ready.promise();var access=jQuery.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=c==null;if(jQuery.type(c)==="object"){e=!0;for(h in c)jQuery.access(a,b,h,c[h],!0,f,g)}else if(d!==undefined){e=!0,jQuery.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(jQuery(a),c)}));if(b)for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}return e?a:j?b.call(a):i?b(a[0],c):f};jQuery.acceptData=function(a){return a.nodeType===1||a.nodeType===9||!+a.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(a){if(!Data.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=Data.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,jQuery.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(jQuery.isEmptyObject(f))jQuery.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return b===undefined?c:c[b]},access:function(a,b,c){var d;return b===undefined||b&&typeof b=="string"&&c===undefined?(d=this.get(a,b),d!==undefined?d:this.get(a,jQuery.camelCase(b))):(this.set(a,b,c),c!==undefined?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(b===undefined)this.cache[f]={};else{jQuery.isArray(b)?d=b.concat(b.map(jQuery.camelCase)):(e=jQuery.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(rnotwhite)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!jQuery.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(a){return data_user.hasData(a)||data_priv.hasData(a)},data:function(a,b,c){return data_user.access(a,b,c)},removeData:function(a,b){data_user.remove(a,b)},_data:function(a,b,c){return data_priv.access(a,b,c)},_removeData:function(a,b){data_priv.remove(a,b)}}),jQuery.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(a===undefined){if(this.length){e=data_user.get(f);if(f.nodeType===1&&!data_priv.get(f,"hasDataAttrs")){c=g.length;while(c--)d=g[c].name,d.indexOf("data-")===0&&(d=jQuery.camelCase(d.slice(5)),dataAttr(f,d,e[d]));data_priv.set(f,"hasDataAttrs",!0)}}return e}return typeof a=="object"?this.each(function(){data_user.set(this,a)}):access(this,function(b){var c,d=jQuery.camelCase(a);if(f&&b===undefined){c=data_user.get(f,a);if(c!==undefined)return c;c=data_user.get(f,d);if(c!==undefined)return c;c=dataAttr(f,d,undefined);if(c!==undefined)return c;return}this.each(function(){var c=data_user.get(this,d);data_user.set(this,d,b),a.indexOf("-")!==-1&&c!==undefined&&data_user.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){data_user.remove(this,a)})}}),jQuery.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=data_priv.get(a,b),c&&(!d||jQuery.isArray(c)?d=data_priv.access(a,b,jQuery.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=jQuery.queue(a,b),d=c.length,e=c.shift(),f=jQuery._queueHooks(a,b),g=function(){jQuery.dequeue(a,b)};e==="inprogress"&&(e=c.shift(),d--),e&&(b==="fx"&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return data_priv.get(a,c)||data_priv.access(a,c,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(a,[b+"queue",c])})})}}),jQuery.fn.extend({queue:function(a,b){var c=2;return typeof a!="string"&&(b=a,a="fx",c--),arguments.length<c?jQuery.queue(this[0],a):b===undefined?this:this.each(function(){var c=jQuery.queue(this,a,b);jQuery._queueHooks(this,a),a==="fx"&&c[0]!=="inprogress"&&jQuery.dequeue(this,a)})},dequeue:function(a){return this.each(function(){jQuery.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=jQuery.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};typeof a!="string"&&(b=a,a=undefined),a=a||"fx";while(g--)c=data_priv.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(a,b){return a=b||a,jQuery.css(a,"display")==="none"||!jQuery.contains(a.ownerDocument,a)},rcheckableType=/^(?:checkbox|radio)$/i;(function(){var a=document.createDocumentFragment(),b=a.appendChild(document.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.get(a);if(!q)return;c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=jQuery.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof jQuery!==strundefined&&jQuery.event.triggered!==b.type?jQuery.event.dispatch.apply(a,arguments):undefined}),b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n)continue;l=jQuery.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=jQuery.event.special[n]||{},k=jQuery.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&jQuery.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,(!l.setup||l.setup.call(a,d,o,g)===!1)&&a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),jQuery.event.global[n]=!0}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=data_priv.hasData(a)&&data_priv.get(a);if(!q||!(i=q.events))return;b=(b||"").match(rnotwhite)||[""],j=b.length;while(j--){h=rtypenamespace.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort();if(!n){for(n in i)jQuery.event.remove(a,n+b[j],c,d,!0);continue}l=jQuery.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],(e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)&&(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&((!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&jQuery.removeEvent(a,n,q.handle),delete i[n])}jQuery.isEmptyObject(i)&&(delete q.handle,data_priv.remove(a,"events"))},trigger:function(a,b,c,d){var e,f,g,h,i,j,k,l=[c||document],m=hasOwn.call(a,"type")?a.type:a,n=hasOwn.call(a,"namespace")?a.namespace.split("."):[];f=g=c=c||document;if(c.nodeType===3||c.nodeType===8)return;if(rfocusMorph.test(m+jQuery.event.triggered))return;m.indexOf(".")>=0&&(n=m.split("."),m=n.shift(),n.sort()),i=m.indexOf(":")<0&&"on"+m,a=a[jQuery.expando]?a:new jQuery.Event(m,typeof a=="object"&&a),a.isTrigger=d?2:3,a.namespace=n.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=undefined,a.target||(a.target=c),b=b==null?[a]:jQuery.makeArray(b,[a]),k=jQuery.event.special[m]||{};if(!d&&k.trigger&&k.trigger.apply(c,b)===!1)return;if(!d&&!k.noBubble&&!jQuery.isWindow(c)){h=k.delegateType||m,rfocusMorph.test(h+m)||(f=f.parentNode);for(;f;f=f.parentNode)l.push(f),g=f;g===(c.ownerDocument||document)&&l.push(g.defaultView||g.parentWindow||window)}e=0;while((f=l[e++])&&!a.isPropagationStopped())a.type=e>1?h:k.bindType||m,j=(data_priv.get(f,"events")||{})[a.type]&&data_priv.get(f,"handle"),j&&j.apply(f,b),j=i&&f[i],j&&j.apply&&jQuery.acceptData(f)&&(a.result=j.apply(f,b),a.result===!1&&a.preventDefault());return a.type=m,!d&&!a.isDefaultPrevented()&&(!k._default||k._default.apply(l.pop(),b)===!1)&&jQuery.acceptData(c)&&i&&jQuery.isFunction(c[m])&&!jQuery.isWindow(c)&&(g=c[i],g&&(c[i]=null),jQuery.event.triggered=m,c[m](),jQuery.event.triggered=undefined,g&&(c[i]=g)),a.result},dispatch:function(a){a=jQuery.event.fix(a);var b,c,d,e,f,g=[],h=slice.call(arguments),i=(data_priv.get(this,"events")||{})[a.type]||[],j=jQuery.event.special[a.type]||{};h[0]=a,a.delegateTarget=this;if(j.preDispatch&&j.preDispatch.call(this,a)===!1)return;g=jQuery.event.handlers.call(this,a,i),b=0;while((e=g[b++])&&!a.isPropagationStopped()){a.currentTarget=e.elem,c=0;while((f=e.handlers[c++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(f.namespace))a.handleObj=f,a.data=f.data,d=((jQuery.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),d!==undefined&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation())}return j.postDispatch&&j.postDispatch.call(this,a),a.result},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||a.type!=="click"))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||a.type!=="click"){d=[];for(c=0;c<h;c++)f=b[c],e=f.selector+" ",d[e]===undefined&&(d[e]=f.needsContext?jQuery(e,this).index(i)>=0:jQuery.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return a.pageX==null&&b.clientX!=null&&(c=a.target.ownerDocument||document,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),!a.which&&f!==undefined&&(a.which=f&1?1:f&2?3:f&4?2:0),a}},fix:function(a){if(a[jQuery.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=rmouseEvent.test(e)?this.mouseHooks:rkeyEvent.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new jQuery.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=document),a.target.nodeType===3&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(a){return jQuery.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==undefined&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=jQuery.extend(new jQuery.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?jQuery.event.trigger(e,null,b):jQuery.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},jQuery.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},jQuery.Event=function(a,b){if(this instanceof jQuery.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.defaultPrevented===undefined&&a.getPreventDefault&&a.getPreventDefault()?returnTrue:returnFalse):this.type=a,b&&jQuery.extend(this,b),this.timeStamp=a&&a.timeStamp||jQuery.now(),this[jQuery.expando]=!0;else return new jQuery.Event(a,b)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=returnTrue,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=returnTrue,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){jQuery.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!jQuery.contains(d,e))a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b;return c}}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){jQuery.event.simulate(b,a.target,jQuery.event.fix(a),!0)};jQuery.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b);e||d.addEventListener(a,c,!0),data_priv.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=data_priv.access(d,b)-1;e?data_priv.access(d,b,e):(d.removeEventListener(a,c,!0),data_priv.remove(d,b))}}}),jQuery.fn.extend({on:function(a,b,c,d,e){var f,g;if(typeof a=="object"){typeof b!="string"&&(c=c||b,b=undefined);for(g in a)this.on(g,b,c,a[g],e);return this}c==null&&d==null?(d=b,c=b=undefined):d==null&&(typeof b=="string"?(d=c,c=undefined):(d=c,c=b,b=undefined));if(d===!1)d=returnFalse;else if(!d)return this;return e===1&&(f=d,d=function(a){return jQuery().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,jQuery(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if(typeof a=="object"){for(e in a)this.off(e,b,a[e]);return this}if(b===!1||typeof b=="function")c=b,b=undefined;return c===!1&&(c=returnFalse),this.each(function(){jQuery.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){jQuery.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return jQuery.event.trigger(a,b,c,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=jQuery.contains(a.ownerDocument,a);if(!support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!jQuery.isXMLDoc(a)){g=getAll(h),f=getAll(a);for(d=0,e=f.length;d<e;d++)fixInput(f[d],g[d])}if(b)if(c){f=f||getAll(a),g=g||getAll(h);for(d=0,e=f.length;d<e;d++)cloneCopyEvent(f[d],g[d])}else cloneCopyEvent(a,h);return g=getAll(h,"script"),g.length>0&&setGlobalEval(g,!i&&getAll(a,"script")),h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;for(;m<n;m++){e=a[m];if(e||e===0)if(jQuery.type(e)==="object")jQuery.merge(l,e.nodeType?[e]:e);else if(!rhtml.test(e))l.push(b.createTextNode(e));else{f=f||k.appendChild(b.createElement("div")),g=(rtagName.exec(e)||["",""])[1].toLowerCase(),h=wrapMap[g]||wrapMap._default,f.innerHTML=h[1]+e.replace(rxhtmlTag,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;jQuery.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}}k.textContent="",m=0;while(e=l[m++]){if(d&&jQuery.inArray(e,d)!==-1)continue;i=jQuery.contains(e.ownerDocument,e),f=getAll(k.appendChild(e),"script"),i&&setGlobalEval(f);if(c){j=0;while(e=f[j++])rscriptType.test(e.type||"")&&c.push(e)}}return k},cleanData:function(a){var b,c,d,e,f,g,h=jQuery.event.special,i=0;for(;(c=a[i])!==undefined;i++){if(jQuery.acceptData(c)){f=c[data_priv.expando];if(f&&(b=data_priv.cache[f])){d=Object.keys(b.events||{});if(d.length)for(g=0;(e=d[g])!==undefined;g++)h[e]?jQuery.event.remove(c,e):jQuery.removeEvent(c,e,b.handle);data_priv.cache[f]&&delete data_priv.cache[f]}}delete data_user.cache[c[data_user.expando]]}}}),jQuery.fn.extend({text:function(a){return access(this,function(a){return a===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9)this.textContent=a})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=manipulationTarget(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?jQuery.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++)!b&&c.nodeType===1&&jQuery.cleanData(getAll(c)),c.parentNode&&(b&&jQuery.contains(c.ownerDocument,c)&&setGlobalEval(getAll(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)a.nodeType===1&&(jQuery.cleanData(getAll(a,!1)),a.textContent="");return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return jQuery.clone(this,a,b)})},html:function(a){return access(this,function(a){var b=this[0]||{},c=0,d=this.length;if(a===undefined&&b.nodeType===1)return b.innerHTML;if(typeof a=="string"&&!rnoInnerhtml.test(a)&&!wrapMap[(rtagName.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(rxhtmlTag,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},b.nodeType===1&&(jQuery.cleanData(getAll(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,jQuery.cleanData(getAll(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=concat.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=jQuery.isFunction(m);if(n||j>1&&typeof m=="string"&&!support.checkClone&&rchecked.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j){c=jQuery.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,c.childNodes.length===1&&(c=d);if(d){e=jQuery.map(getAll(c,"script"),disableScript),f=e.length;for(;i<j;i++)g=c,i!==l&&(g=jQuery.clone(g,!0,!0),f&&jQuery.merge(e,getAll(g,"script"))),b.call(this[i],g,i);if(f){h=e[e.length-1].ownerDocument,jQuery.map(e,restoreScript);for(i=0;i<f;i++)g=e[i],rscriptType.test(g.type||"")&&!data_priv.access(g,"globalEval")&&jQuery.contains(h,g)&&(g.src?jQuery._evalUrl&&jQuery._evalUrl(g.src):jQuery.globalEval(g.textContent.replace(rcleanScript,"")))}}}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){jQuery.fn[a]=function(a){var c,d=[],e=jQuery(a),f=e.length-1,g=0;for(;g<=f;g++)c=g===f?this:this.clone(!0),jQuery(e[g])[b](c),push.apply(d,c.get());return this.pushStack(d)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};(function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",d.appendChild(e);var c=window.getComputedStyle(f,null);a=c.top!=="1%",b=c.width==="4px",d.removeChild(e)}var a,b,c="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",d=document.documentElement,e=document.createElement("div"),f=document.createElement("div");f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle=f.style.backgroundClip==="content-box",e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e.appendChild(f),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return g(),a},boxSizingReliable:function(){return b==null&&g(),b},reliableMarginRight:function(){var a,b=f.appendChild(document.createElement("div"));return b.style.cssText=f.style.cssText=c,b.style.marginRight=b.style.width="0",f.style.width="1px",d.appendChild(e),a=!parseFloat(window.getComputedStyle(b,null).marginRight),d.removeChild(e),f.innerHTML="",a}})})(),jQuery.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=curCSS(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var e,f,g,h=jQuery.camelCase(b),i=a.style;b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(i,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h];if(c===undefined)return g&&"get"in g&&(e=g.get(a,!1,d))!==undefined?e:i[b];f=typeof c,f==="string"&&(e=rrelNum.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(jQuery.css(a,b)),f="number");if(c==null||c!==c)return;f==="number"&&!jQuery.cssNumber[h]&&(c+="px"),!support.clearCloneStyle&&c===""&&b.indexOf("background")===0&&(i[b]="inherit");if(!g||!("set"in g)||(c=g.set(a,c,d))!==undefined)i[b]="",i[b]=c},css:function(a,b,c,d){var e,f,g,h=jQuery.camelCase(b);return b=jQuery.cssProps[h]||(jQuery.cssProps[h]=vendorPropName(a.style,h)),g=jQuery.cssHooks[b]||jQuery.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),e===undefined&&(e=curCSS(a,b,d)),e==="normal"&&b in cssNormalTransform&&(e=cssNormalTransform[b]),c===""||c?(f=parseFloat(e),c===!0||jQuery.isNumeric(f)?f||0:e):e}}),jQuery.each(["height","width"],function(a,b){jQuery.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&rdisplayswap.test(jQuery.css(a,"display"))?jQuery.swap(a,cssShow,function(){return getWidthOrHeight(a,b,d)}):getWidthOrHeight(a,b,d)},set:function(a,c,d){var e=d&&getStyles(a);return setPositiveNumber(a,c,d?augmentWidthOrHeight(a,b,d,jQuery.css(a,"boxSizing",!1,e)==="border-box",e):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(a,b){if(b)return jQuery.swap(a,{display:"inline-block"},curCSS,[a,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(a,b){jQuery.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+cssExpand[d]+b]=f[d]||f[d-2]||f[0];return e}},rmargin.test(a)||(jQuery.cssHooks[a+b].set=setPositiveNumber)}),jQuery.fn.extend({css:function(a,b){return access(this,function(a,b,c){var d,e,f={},g=0;if(jQuery.isArray(b)){d=getStyles(a),e=b.length;for(;g<e;g++)f[b[g]]=jQuery.css(a,b[g],!1,d);return f}return c!==undefined?jQuery.style(a,b,c):jQuery.css(a,b)},a,b,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(a){return typeof a=="boolean"?a?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(jQuery.cssNumber[c]?"":"px")},cur:function(){var a=Tween.propHooks[this.prop];return a&&a.get?a.get(this):Tween.propHooks._default.get(this)},run:function(a){var b,c=Tween.propHooks[this.prop];return this.options.duration?this.pos=b=jQuery.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(a){var b;return a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null?(b=jQuery.css(a.elem,a.prop,""),!b||b==="auto"?0:b):a.elem[a.prop]},set:function(a){jQuery.fx.step[a.prop]?jQuery.fx.step[a.prop](a):a.elem.style&&(a.elem.style[jQuery.cssProps[a.prop]]!=null||jQuery.cssHooks[a.prop])?jQuery.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},jQuery.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=rfxnum.exec(b),f=e&&e[3]||(jQuery.cssNumber[a]?"":"px"),g=(jQuery.cssNumber[a]||f!=="px"&&+d)&&rfxnum.exec(jQuery.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,jQuery.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&h!==1&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(a,b){jQuery.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++)c=a[d],tweeners[c]=tweeners[c]||[],tweeners[c].unshift(b)},prefilter:function(a,b){b?animationPrefilters.unshift(a):animationPrefilters.push(a)}}),jQuery.speed=function(a,b,c){var d=a&&typeof a=="object"?jQuery.extend({},a):{complete:c||!c&&b||jQuery.isFunction(a)&&a,duration:a,easing:c&&b||b&&!jQuery.isFunction(b)&&b};d.duration=jQuery.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in jQuery.fx.speeds?jQuery.fx.speeds[d.duration]:jQuery.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(){jQuery.isFunction(d.old)&&d.old.call(this),d.queue&&jQuery.dequeue(this,d.queue)},d},jQuery.fn.extend({fadeTo:function(a,b,c,d){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=jQuery.isEmptyObject(a),f=jQuery.speed(b,c,d),g=function(){var b=Animation(this,jQuery.extend({},a),f);(e||data_priv.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return typeof a!="string"&&(c=b,b=a,a=undefined),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=a!=null&&a+"queueHooks",f=jQuery.timers,g=data_priv.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rrun.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem===this&&(a==null||f[e].queue===a)&&(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&jQuery.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=data_priv.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=jQuery.timers,g=d?d.length:0;c.finish=!0,jQuery.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0);for(b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),jQuery.each(["toggle","show","hide"],function(a,b){var c=jQuery.fn[b];jQuery.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(genFx(b,!0),a,d,e)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){jQuery.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),jQuery.timers=[],jQuery.fx.tick=function(){var a,b=0,c=jQuery.timers;fxNow=jQuery.now();for(;b<c.length;b++)a=c[b],!a()&&c[b]===a&&c.splice(b--,1);c.length||jQuery.fx.stop(),fxNow=undefined},jQuery.fx.timer=function(a){jQuery.timers.push(a),a()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(a,b){return a=jQuery.fx?jQuery.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=document.createElement("input"),b=document.createElement("select"),c=b.appendChild(document.createElement("option"));a.type="checkbox",support.checkOn=a.value!=="",support.optSelected=c.selected,b.disabled=!0,support.optDisabled=!c.disabled,a=document.createElement("input"),a.value="t",a.type="radio",support.radioValue=a.value==="t"}();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(a,b){return access(this,jQuery.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){jQuery.removeAttr(this,a)})}}),jQuery.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(!a||f===3||f===8||f===2)return;if(typeof a.getAttribute===strundefined)return jQuery.prop(a,b,c);if(f!==1||!jQuery.isXMLDoc(a))b=b.toLowerCase(),d=jQuery.attrHooks[b]||(jQuery.expr.match.bool.test(b)?boolHook:nodeHook);if(c===undefined)return d&&"get"in d&&(e=d.get(a,b))!==null?e:(e=jQuery.find.attr(a,b),e==null?undefined:e);if(c===null)jQuery.removeAttr(a,b);else return d&&"set"in d&&(e=d.set(a,c,b))!==undefined?e:(a.setAttribute(b,c+""),c)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(rnotwhite);if(f&&a.nodeType===1)while(c=f[e++])d=jQuery.propFix[c]||c,jQuery.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!support.radioValue&&b==="radio"&&jQuery.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),boolHook={set:function(a,b,c){return b===!1?jQuery.removeAttr(a,c):a.setAttribute(c,c),c}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(a,b){var c=attrHandle[b]||jQuery.find.attr;attrHandle[b]=function(a,b,d){var e,f;return d||(f=attrHandle[b],attrHandle[b]=e,e=c(a,b,d)!=null?b.toLowerCase():null,attrHandle[b]=f),e}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(a,b){return access(this,jQuery.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[jQuery.propFix[a]||a]})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;return f=g!==1||!jQuery.isXMLDoc(a),f&&(b=jQuery.propFix[b]||b,e=jQuery.propHooks[b]),c!==undefined?e&&"set"in e&&(d=e.set(a,c,b))!==undefined?d:a[b]=c:e&&"get"in e&&(d=e.get(a,b))!==null?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||rfocusable.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=jQuery.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=arguments.length===0||typeof a=="string"&&a,i=0,j=this.length;if(jQuery.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.className))});if(h){b=(a||"").match(rnotwhite)||[];for(;i<j;i++){c=this[i],d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(rclass," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?jQuery.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return typeof b=="boolean"&&c==="string"?b?this.addClass(a):this.removeClass(a):jQuery.isFunction(a)?this.each(function(c){jQuery(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var b,d=0,e=jQuery(this),f=a.match(rnotwhite)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(c===strundefined||c==="boolean")this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||a===!1?"":data_priv.get(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(rclass," ").indexOf(b)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(a){var b,c,d,e=this[0];if(!arguments.length){if(e)return b=jQuery.valHooks[e.type]||jQuery.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&(c=b.get(e,"value"))!==undefined?c:(c=e.value,typeof c=="string"?c.replace(rreturn,""):c==null?"":c);return}return d=jQuery.isFunction(a),this.each(function(c){var e;if(this.nodeType!==1)return;d?e=a.call(this,c,jQuery(this).val()):e=a,e==null?e="":typeof e=="number"?e+="":jQuery.isArray(e)&&(e=jQuery.map(e,function(a){return a==null?"":a+""})),b=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!b||!("set"in b)||b.set(this,e,"value")===undefined)this.value=e})}}),jQuery.extend({valHooks:{select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!jQuery.nodeName(c.parentNode,"optgroup"))){b=jQuery(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=jQuery.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=jQuery.inArray(jQuery(d).val(),f)>=0)c=!0}return c||(a.selectedIndex=-1),f}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(a,b){if(jQuery.isArray(b))return a.checked=jQuery.inArray(jQuery(a).val(),b)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){jQuery.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),jQuery.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(a){return JSON.parse(a+"")},jQuery.parseXML=function(a){var b,c;if(!a||typeof a!="string")return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=undefined}return(!b||b.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+a),b};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?ajaxExtend(ajaxExtend(a,jQuery.ajaxSettings),b):ajaxExtend(jQuery.ajaxSettings,a)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(a,b){function w(a,b,f,h){var j,q,r,t,v,w=b;if(s===2)return;s=2,g&&clearTimeout(g),c=undefined,e=h||"",u.readyState=a>0?4:0,j=a>=200&&a<300||a===304,f&&(t=ajaxHandleResponses(k,u,f)),t=ajaxConvert(k,t,u,j);if(j)k.ifModified&&(v=u.getResponseHeader("Last-Modified"),v&&(jQuery.lastModified[d]=v),v=u.getResponseHeader("etag"),v&&(jQuery.etag[d]=v)),a===204||k.type==="HEAD"?w="nocontent":a===304?w="notmodified":(w=t.state,q=t.data,r=t.error,j=!r);else{r=w;if(a||!w)w="error",a<0&&(a=0)}u.status=a,u.statusText=(b||w)+"",j?n.resolveWith(l,[q,w,u]):n.rejectWith(l,[u,w,r]),u.statusCode(p),p=undefined,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[u,k,j?q:r]),o.fireWith(l,[u,w]),i&&(m.trigger("ajaxComplete",[u,k]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof a=="object"&&(b=a,a=undefined),b=b||{};var c,d,e,f,g,h,i,j,k=jQuery.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?jQuery(l):jQuery.event,n=jQuery.Deferred(),o=jQuery.Callbacks("once memory"),p=k.statusCode||{},q={},r={},s=0,t="canceled",u={readyState:0,getResponseHeader:function(a){var b;if(s===2){if(!f){f={};while(b=rheaders.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return s===2?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return s||(a=r[c]=r[c]||a,q[a]=b),this},overrideMimeType:function(a){return s||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(s<2)for(b in a)p[b]=[p[b],a[b]];else u.always(a[u.status]);return this},abort:function(a){var b=a||t;return c&&c.abort(b),w(0,b),this}};n.promise(u).complete=o.add,u.success=u.done,u.error=u.fail,k.url=((a||k.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=jQuery.trim(k.dataType||"*").toLowerCase().match(rnotwhite)||[""],k.crossDomain==null&&(h=rurl.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ajaxLocParts[1]&&h[2]===ajaxLocParts[2]&&(h[3]||(h[1]==="http:"?"80":"443"))===(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))),k.data&&k.processData&&typeof k.data!="string"&&(k.data=jQuery.param(k.data,k.traditional)),inspectPrefiltersOrTransports(prefilters,k,b,u);if(s===2)return u;i=k.global,i&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!rnoContent.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(rquery.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=rts.test(d)?d.replace(rts,"$1_="+nonce++):d+(rquery.test(d)?"&":"?")+"_="+nonce++)),k.ifModified&&(jQuery.lastModified[d]&&u.setRequestHeader("If-Modified-Since",jQuery.lastModified[d]),jQuery.etag[d]&&u.setRequestHeader("If-None-Match",jQuery.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&u.setRequestHeader("Content-Type",k.contentType),u.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(k.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)u.setRequestHeader(j,k.headers[j]);if(!k.beforeSend||k.beforeSend.call(l,u,k)!==!1&&s!==2){t="abort";for(j in{success:1,error:1,complete:1})u[j](k[j]);c=inspectPrefiltersOrTransports(transports,k,b,u);if(!c)w(-1,"No Transport");else{u.readyState=1,i&&m.trigger("ajaxSend",[u,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){u.abort("timeout")},k.timeout));try{s=1,c.send(q,w)}catch(v){if(s<2)w(-1,v);else throw v}}return u}return u.abort()},getJSON:function(a,b,c){return jQuery.get(a,b,c,"json")},getScript:function(a,b){return jQuery.get(a,undefined,b,"script")}}),jQuery.each(["get","post"],function(a,b){jQuery[b]=function(a,c,d,e){return jQuery.isFunction(c)&&(e=e||d,d=c,c=undefined),jQuery.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){jQuery.fn[b]=function(a){return this.on(b,a)}}),jQuery._evalUrl=function(a){return jQuery.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(a){var b;return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapAll(a.call(this,b))}):(this[0]&&(b=jQuery(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return jQuery.isFunction(a)?this.each(function(b){jQuery(this).wrapInner(a.call(this,b))}):this.each(function(){var b=jQuery(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=jQuery.isFunction(a);return this.each(function(c){jQuery(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},jQuery.expr.filters.visible=function(a){return!jQuery.expr.filters.hidden(a)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,b){var c,d=[],e=function(a,b){b=jQuery.isFunction(b)?b():b==null?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};b===undefined&&(b=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){e(this.name,this.value)});else for(c in a)buildParams(c,a[c],b,e);return d.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=jQuery.prop(this,"elements");return a?jQuery.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(a)&&(this.checked||!rcheckableType.test(a))}).map(function(a,b){var c=jQuery(this).val();return c==null?null:jQuery.isArray(c)?jQuery.map(c,function(a){return{name:b.name,value:a.replace(rCRLF,"\r\n")}}):{name:b.name,value:c.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){for(var a in xhrCallbacks)xhrCallbacks[a]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(a){var b;if(support.cors||xhrSupported&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++xhrId;f.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete xhrCallbacks[g],b=f.onload=f.onerror=null,a==="abort"?f.abort():a==="error"?d(f.status,f.statusText):d(xhrSuccessStatus[f.status]||f.status,f.statusText,typeof f.responseText=="string"?{text:f.responseText}:undefined,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=xhrCallbacks[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return jQuery.globalEval(a),a}}}),jQuery.ajaxPrefilter("script",function(a){a.cache===undefined&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),jQuery.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=jQuery("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e(a.type==="error"?404:200,a.type)}),document.head.appendChild(b[0])},abort:function(){c&&c()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[a]=!0,a}}),jQuery.ajaxPrefilter("json jsonp",function(a,b,c){var d,e,f,g=a.jsonp!==!1&&(rjsonp.test(a.url)?"url":typeof a.data=="string"&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(a.data)&&"data");if(g||a.dataTypes[0]==="jsonp")return d=a.jsonpCallback=jQuery.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g?a[g]=a[g].replace(rjsonp,"$1"+d):a.jsonp!==!1&&(a.url+=(rquery.test(a.url)?"&":"?")+a.jsonp+"="+d),a.converters["script json"]=function(){return f||jQuery.error(d+" was not called"),f[0]},a.dataTypes[0]="json",e=window[d],window[d]=function(){f=arguments},c.always(function(){window[d]=e,a[d]&&(a.jsonpCallback=b.jsonpCallback,oldCallbacks.push(d)),f&&jQuery.isFunction(e)&&e(f[0]),f=e=undefined}),"script"}),jQuery.parseHTML=function(a,b,c){if(!a||typeof a!="string")return null;typeof b=="boolean"&&(c=b,b=!1),b=b||document;var d=rsingleTag.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=jQuery.buildFragment([a],b,e),e&&e.length&&jQuery(e).remove(),jQuery.merge([],d.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(a,b,c){if(typeof a!="string"&&_load)return _load.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),jQuery.isFunction(b)?(c=b,b=undefined):b&&typeof b=="object"&&(e="POST"),g.length>0&&jQuery.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?jQuery("<div>").append(jQuery.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},jQuery.expr.filters.animated=function(a){return jQuery.grep(jQuery.timers,function(b){return a===b.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=jQuery.css(a,"position"),l=jQuery(a),m={};k==="static"&&(a.style.position="relative"),h=l.offset(),f=jQuery.css(a,"top"),i=jQuery.css(a,"left"),j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),jQuery.isFunction(b)&&(b=b.call(a,c,h)),b.top!=null&&(m.top=b.top-h.top+g),b.left!=null&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},jQuery.fn.extend({offset:function(a){if(arguments.length)return a===undefined?this:this.each(function(b){jQuery.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(!f)return;return b=f.documentElement,jQuery.contains(b,d)?(typeof d.getBoundingClientRect!==strundefined&&(e=d.getBoundingClientRect()),c=getWindow(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};return jQuery.css(c,"position")==="fixed"?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),jQuery.nodeName(a[0],"html")||(d=a.offset()),d.top+=jQuery.css(a[0],"borderTopWidth",!0),d.left+=jQuery.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-jQuery.css(c,"marginTop",!0),left:b.left-d.left-jQuery.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||docElem;while(a&&!jQuery.nodeName(a,"html")&&jQuery.css(a,"position")==="static")a=a.offsetParent;return a||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;jQuery.fn[a]=function(d){return access(this,function(a,d,e){var f=getWindow(a);if(e===undefined)return f?f[b]:a[d];f?f.scrollTo(c?window.pageXOffset:e,c?e:window.pageYOffset):a[d]=e},a,d,arguments.length,null)}}),jQuery.each(["top","left"],function(a,b){jQuery.cssHooks[b]=addGetHookIf(support.pixelPosition,function(a,c){if(c)return c=curCSS(a,b),rnumnonpx.test(c)?jQuery(a).position()[b]+"px":c})}),jQuery.each({Height:"height",Width:"width"},function(a,b){jQuery.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){jQuery.fn[d]=function(d,e){var f=arguments.length&&(c||typeof d!="boolean"),g=c||(d===!0||e===!0?"margin":"border");return access(this,function(b,c,d){var e;return jQuery.isWindow(b)?b.document.documentElement["client"+a]:b.nodeType===9?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):d===undefined?jQuery.css(b,c,g):jQuery.style(b,c,d,g)},b,f?d:undefined,f,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,typeof define=="function"&&define.amd&&
define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(a){return window.$===jQuery&&(window.$=_$),a&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery});var requirejs,require,define,__inflate;(function(a){function i(a,b){var c=b&&b.split("/"),e=d.map,f=e&&e["*"]||{},g,h,i,j,k,l,m;if(a&&a.charAt(0)==="."&&b){c=c.slice(0,c.length-1),a=c.concat(a.split("/"));for(k=0;m=a[k];k++)if(m===".")a.splice(k,1),k-=1;else if(m==="..")if(k!==1||a[2]!==".."&&a[0]!=="..")k>0&&(a.splice(k-1,2),k-=2);else return!0;a=a.join("/")}if((c||f)&&e){g=a.split("/");for(k=g.length;k>0;k-=1){h=g.slice(0,k).join("/");if(c)for(l=c.length;l>0;l-=1){i=e[c.slice(0,l).join("/")];if(i){i=i[h];if(i){j=i;break}}}j=j||f[h];if(j){g.splice(0,k,j),a=g.join("/");break}}}return a}function j(b,c){return function(){return h.apply(a,f.call(arguments,0).concat([b,c]))}}function k(a){return function(b){return i(b,a)}}function l(a){return function(c){b[a]=c}}function m(d){if(c.hasOwnProperty(d)){var f=c[d];delete c[d],e[d]=!0,g.apply(a,f)}if(!b.hasOwnProperty(d))throw new Error("No "+d);return b[d]}function n(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=i(a.slice(0,e),b),a=a.slice(e+1),d=m(c),d&&d.normalize?a=d.normalize(a,k(b)):a=i(a,b)):a=i(a,b),{f:c?c+"!"+a:a,n:a,p:d}}function o(a){return function(){return d&&d.config&&d.config[a]||{}}}var b={},c={},d={},e={},f=[].slice,g,h;g=function(d,f,g,h){var i=[],k,p,q,r,s,t;h=h||d,typeof g=="string"&&(g=__inflate(d,g));if(typeof g=="function"){f=!f.length&&g.length?["require","exports","module"]:f;for(t=0;t<f.length;t++){s=n(f[t],h),q=s.f;if(q==="require")i[t]=j(d);else if(q==="exports")i[t]=b[d]={},k=!0;else if(q==="module")p=i[t]={id:d,uri:"",exports:b[d],config:o(d)};else if(b.hasOwnProperty(q)||c.hasOwnProperty(q))i[t]=m(q);else if(s.p)s.p.load(s.n,j(h,!0),l(q),{}),i[t]=b[q];else if(!e[q])throw new Error(d+" missing "+q)}r=g.apply(b[d],i);if(d)if(p&&p.exports!==a&&p.exports!==b[d])b[d]=p.exports;else if(r!==a||!k)b[d]=r}else d&&(b[d]=g)},requirejs=require=h=function(b,c,e,f){return typeof b=="string"?m(n(b,c).f):(b.splice||(d=b,c.splice?(b=c,c=e,e=null):b=a),c=c||function(){},f?g(a,b,c,e):setTimeout(function(){g(a,b,c,e)},15),h)},h.config=function(a){return d=a,h},define=function(a,b,d){b.splice||(d=b,b=[]),c[a]=[a,b,d]},define.amd={jQuery:!0}})(),__inflate=function(name,src){var r;return eval(["r = function(a,b,c){","\n};\n//@ sourceURL="+name+"\n"].join(src)),r},define.unordered=!0,function(a){typeof define=="function"&&define.amd?define(["jquery"],a):typeof exports=="object"?module.exports=a:a(jQuery)}(function(a){function i(b){var c=b||window.event,g=d.call(arguments,1),h=0,i=0,l=0,m=0,n=0,o=0;b=a.event.fix(c),b.type="mousewheel","detail"in c&&(l=c.detail*-1),"wheelDelta"in c&&(l=c.wheelDelta),"wheelDeltaY"in c&&(l=c.wheelDeltaY),"wheelDeltaX"in c&&(i=c.wheelDeltaX*-1),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(i=l*-1,l=0),h=l===0?i:l,"deltaY"in c&&(l=c.deltaY*-1,h=l),"deltaX"in c&&(i=c.deltaX,l===0&&(h=i*-1));if(l===0&&i===0)return;if(c.deltaMode===1){var p=a.data(this,"mousewheel-line-height");h*=p,l*=p,i*=p}else if(c.deltaMode===2){var q=a.data(this,"mousewheel-page-height");h*=q,l*=q,i*=q}m=Math.max(Math.abs(l),Math.abs(i));if(!f||m<f)f=m,k(c,m)&&(f/=40);k(c,m)&&(h/=40,i/=40,l/=40),h=Math[h>=1?"floor":"ceil"](h/f),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f);var r=this.getBoundingClientRect();return n=b.clientX-r.left,o=b.clientY-r.top,b.deltaX=i,b.deltaY=l,b.deltaFactor=f,b.offsetX=n,b.offsetY=o,b.deltaMode=0,g.unshift(b,h,i,l),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&a.type==="mousewheel"&&b%120===0}var b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice,e,f;if(a.event.fixHooks)for(var g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;var h=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],i,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a,b){function m(a,b,c){return[parseInt(a[0],10)*(k.test(a[0])?b/100:1),parseInt(a[1],10)*(k.test(a[1])?c/100:1)]}function n(b,c){return parseInt(a.css(b,c),10)||0}function o(b){var c=b[0];return c.nodeType===9?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var c,d=Math.max,e=Math.abs,f=Math.round,g=/left|center|right/,h=/top|center|bottom/,i=/[\+\-]\d+%?/,j=/^\w+/,k=/%$/,l=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=f.children()[0];return a("body").append(f),d=g.offsetWidth,f.css("overflow","scroll"),e=g.offsetWidth,d===e&&(e=f[0].clientWidth),f.remove(),c=d-e},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e=c==="scroll"||c==="auto"&&b.width<b.element[0].scrollWidth,f=d==="scroll"||d==="auto"&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return l.apply(this,arguments);b=a.extend({},b);var c,k,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=o(t),t[0].preventDefault&&(b.at="left top"),k=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;a.length===1&&(a=g.test(a[0])?a.concat(["center"]):h.test(a[0])?["center"].concat(a):["center","center"]),a[0]=g.test(a[0])?a[0]:"center",a[1]=h.test(a[1])?a[1]:"center",c=i.exec(a[0]),d=i.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[j.exec(a[0])[0],j.exec(a[1])[0]]}),w.length===1&&(w[1]=w[0]),b.at[0]==="right"?r.left+=k:b.at[0]==="center"&&(r.left+=k/2),b.at[1]==="bottom"?r.top+=p:b.at[1]==="center"&&(r.top+=p/2),c=m(x.at,k,p),r.left+=c[0],r.top+=c[1],this.each(function(){var g,h,i=a(this),j=i.outerWidth(),l=i.outerHeight(),o=n(this,"marginLeft"),s=n(this,"marginTop"),y=j+o+n(this,"marginRight")+v.width,z=l+s+n(this,"marginBottom")+v.height,A=a.extend({},r),B=m(x.my,i.outerWidth(),i.outerHeight());b.my[0]==="right"?A.left-=j:b.my[0]==="center"&&(A.left-=j/2),b.my[1]==="bottom"?A.top-=l:b.my[1]==="center"&&(A.top-=l/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=f(A.left),A.top=f(A.top)),g={marginLeft:o,marginTop:s},a.each(["left","top"],function(d,e){a.ui.position[w[d]]&&a.ui.position[w[d]][e](A,{targetWidth:k,targetHeight:p,elemWidth:j,elemHeight:l,collisionPosition:g,collisionWidth:y,collisionHeight:z,offset:[c[0]+B[0],c[1]+B[1]],my:b.my,at:b.at,within:u,elem:i})}),b.using&&(h=function(a){var c=q.left-A.left,f=c+k-j,g=q.top-A.top,h=g+p-l,m={target:{element:t,left:q.left,top:q.top,width:k,height:p},element:{element:i,left:A.left,top:A.top,width:j,height:l},horizontal:f<0?"left":c>0?"right":"center",vertical:h<0?"top":g>0?"bottom":"middle"};k<j&&e(c+f)<k&&(m.horizontal="center"),p<l&&e(g+h)<p&&(m.vertical="middle"),d(e(c),e(f))>d(e(g),e(h))?m.important="horizontal":m.important="vertical",b.using.call(this,a,m)}),i.offset(a.extend(A,{using:h}))})},a.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e,j;b.collisionWidth>f?h>0&&i<=0?(j=a.left+h+b.collisionWidth-f-e,a.left+=h-j):i>0&&h<=0?a.left=e:h>i?a.left=e+f-b.collisionWidth:a.left=e:h>0?a.left+=h:i>0?a.left-=i:a.left=d(a.left-g,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e,j;b.collisionHeight>f?h>0&&i<=0?(j=a.top+h+b.collisionHeight-f-e,a.top+=h-j):i>0&&h<=0?a.top=e:h>i?a.top=e+f-b.collisionHeight:a.top=e:h>0?a.top+=h:i>0?a.top-=i:a.top=d(a.top-g,a.top)}},flip:{left:function(a,b){b.elem.removeClass("ui-flipped-left ui-flipped-right");var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,i=h-g,j=h+b.collisionWidth-f-g,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,l=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,m=-2*b.offset[0],n,o;if(i<0){n=a.left+k+l+m+b.collisionWidth-f-d;if(n<0||n<e(i))a.left+=k+l+m,b.elem.addClass("ui-flipped-right")}else if(j>0){o=a.left-b.collisionPosition.marginLeft+k+l+m-g;if(o>0||e(o)<j)a.left+=k+l+m,b.elem.addClass("ui-flipped-left")}},top:function(a,b){b.elem.removeClass("ui-flipped-top ui-flipped-bottom");var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,i=h-g,j=h+b.collisionHeight-f-g,k=b.my[1]==="top",l=k?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1],o,p;i<0?(p=a.top+l+m+n+b.collisionHeight-f-d,a.top+l+m+n>i&&(p<0||p<e(i))&&(b.elem.addClass("ui-flipped-bottom"),a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-g,a.top+l+m+n>j&&(o>0||e(o)<j)&&(b.elem.addClass("ui-flipped-top"),a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&e<11,b.innerHTML="",c.removeChild(b)}(),a.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(jQuery)}(jQuery),jQuery.whenAll=function(a){if(a&&a.length){var b=jQuery.Deferred(),c=a.length,d=!1,e=[],f,g;return g=function(a){e[a]=[].slice.call(arguments,1),--c||b[d?"reject":"resolve"].apply(b,e)},f=function(){d=!0},e.length=a.length,a.forEach(function(a,b){a.fail(f).always(g.bind(null,b))}),b}return jQuery.Deferred().resolve()},function(a){window.XDomainRequest&&a.ajaxTransport(function(b){if(b.crossDomain&&b.async){b.timeout&&(b.xdrTimeout=b.timeout,delete b.timeout);var c;return{send:function(d,e){function g(b,d,f,g){c.onload=c.onerror=c.ontimeout=a.noop,c=undefined,e(b,d,f,g)}var f;d.Authorization&&(f=d.Authorization.split(" ")[1],b.url=b.url.replace(/\?|(.)$/,"$1?oauth_token="+f+"&")),c=new window.XDomainRequest,c.open(b.type,b.url),c.onload=function(){g(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)},c.onerror=function(){g(404,"Not Found")},b.xdrTimeout&&(c.ontimeout=function(){g(0,"timeout")},c.timeout=b.xdrTimeout),c.send(b.hasContent&&b.data||null)},abort:function(){c&&(c.onerror=a.noop(),c.abort())}}}})}(jQuery),Array.prototype.every||(Array.prototype.every=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=[],e=arguments[1];for(var f=0;f<c;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)e in b&&a.call(d,b[e],e,b)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=0;arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));if(d>=c)return-1;var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(c===0)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:d!==0&&d!==Infinity&&d!==-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d))));var e=d>=0?Math.min(d,c-1):c-Math.abs(d);for(;e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.map||(Array.prototype.map=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=new Array(c),e=arguments[1];for(var f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.prototype.reduce||(Array.prototype.reduce=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;if(c==0&&arguments.length==1)throw new TypeError;var d=0,e;if(arguments.length>=2)e=arguments[1];else do{if(d in b){e=b[d++];break}if(++d>=c)throw new TypeError}while(!0);while(d<c)d in b&&(e=a.call(undefined,e,b[d],d,b)),d++;return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;if(c===0&&arguments.length===1)throw new TypeError;var d=c-1,e;if(arguments.length>=2)e=arguments[1];else do{if(d in this){e=this[d--];break}if(--d<0)throw new TypeError}while(!0);while(d>=0)d in b&&(e=a.call(undefined,e,b[d],d,b)),d--;return e}),Array.prototype.some||(Array.prototype.some=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Date.now||(Date.now=function(){return+(new Date)}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){var a=function(b,c){return c=c||2,(b+="",b.length===c)?b:a("0"+b,c)};return function(){var b=this.getUTCFullYear();b=(b<0?"-":b>9999?"+":"")+("00000"+Math.abs(b)).slice(0<=b&&b<=9999?-4:-6);var c=[b,a(this.getUTCMonth()+1),a(this.getUTCDate())].join("-"),d=[a(this.getUTCHours()),a(this.getUTCMinutes()),a(this.getUTCSeconds())].join(":")+"."+a(this.getUTCMilliseconds(),3);return[c,d].join("T")+"Z"}}()),Date.prototype.toJSON||(Date.prototype.toJSON=Date.prototype.toJSON),Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice,c=b.call(arguments,1),d=this,e=function(){},f=function(){if(e.prototype&&this instanceof e){var f=d.apply(new e,c.concat(b.call(arguments)));return Object(f)===f?f:d}return d.apply(a,c.concat(b.call(arguments)))};return e.prototype=d.prototype,f.prototype=new e,f}),function(){"use strict";var a=function(a){if(a!==Object(a))throw new TypeError("Object.getPrototypeOf called on non-object")};Object.getPrototypeOf||(typeof "test".__proto__=="object"?Object.getPrototypeOf=function(b){return a(b),b.__proto__}:Object.getPrototypeOf=function(b){return a(b),b.constructor.prototype})}(),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),String.prototype.trim||(String.prototype.trim=function(){var a=/^\s+/,b=/\s+$/;return function(){return this.replace(a,"").replace(b,"")}}()),function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function j(){if(!a&&this.initialize)return this.initialize.apply(this,arguments)}var d=this.prototype,e,f,g,h;a=!0;var i=new this;a=!1,Object.prototype.toString.call(c)!=="[object Array]"?h=[c]:h=c;for(f=0,g=h.length;f<g;++f){c=h[f];for(e in c)i[e]=typeof c[e]=="function"&&typeof d[e]=="function"&&b.test(c[e])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(e,c[e]):c[e]}return j.prototype=i,j.prototype.constructor=j,j.extend=arguments.callee,j}}(),function(a,b,c){function d(a,b,d,f){if(a[b])return;var g=e(b);c.some(function(c){return f&&(c=e(c)),a[b]=a[c+g],a[b]}),a[b]=a[b]||d}function e(a){return a&&(a=a[0].toUpperCase()+a.substr(1)),a}d(a,"requestAnimationFrame",function(b){return a.setTimeout(b,16)}),d(a,"cancelAnimationFrame",function(b){a.clearTimeout(b)})}(window,navigator,["webkit","moz","o","ms"]),jQuery.extend(jQuery.expr[":"],{data:function(a,b,c){return!!$.data(a,c[3])},focusable:function(a){var b=a.nodeName.toLowerCase(),c=$.attr(a,"tabindex");return(/input|select|textarea|button|object/.test(b)?!a.disabled:b==="a"||b==="area"?a.href||!isNaN(c):!isNaN(c))&&!$(a)[b==="area"?"parents":"closest"](":hidden").length},tabbable:function(a){var b=$.attr(a,"tabindex");return(isNaN(b)||b>=0)&&$(a).is(":focusable")}}),
define("application",["require","exports","module","_","lib/ad-manager","lib/api/api-bridge","lib/api-wrapper","models/audio-ad","backbone","vendor/color/color","config","lib/connect","views/buttons/cookie-policy","config/widget-params","config/error-messages","lib/event-bus","vendor/event-gateway/event-gateway","models/exception","config/experiments","vendor/experiments/experiments","vendor/fastclick","lib/flash-widget","lib/global-xhr-handlers","lib/keyboard-shortcuts","lib/lingua","lib/loader","lib/persistent-store","lib/play-manager","lib/views/progress","router","config/routes","lib/support","lib/tracking","lib/url","models/user","lib/view"],function(a,b,c){function M(){var a;a=J.extend({template:function(){return""}}),u.attach(document.body),g.initialize(w),f.start(),p.on("widget:ready",N).on("error:geo_blocked",O).on("error:no_stream_info",O).on("error:audio_support",P).on("audio:play",Q).on("audio:play-intent",Q).on("exception",R).on("broadcast:audio:play",U).on("sound:deeplink",V),k.set("me",Y()).set("router",(new D).setRoutes(E)).set("appView",(new a({el:$(L)})).render()).set("widgetParams",X()),y.initializeFromUserSettings(),e.setAudioAd(h),B.setAdManager(e),e.on("ad:play",Q),$(window).on("unload",T).on("error",S),$(document).on("keydown",x.handleKeyDown).on("keyup",x.handleKeyUp),_(),W().done(G.init),$.whenAll([Z(),ba()]).always(function(){i.history.start({hashChange:!1,pushState:!0,root:k.get("app_root")})})}function N(){k.set("widgetReady",!0),window.console&&window.console.log("SoundCloud Embed Player (api-web)")}function O(){B.hasNextSound()?B.playNext():r.raise({message:o.SOUND_GEO_BLOCKED,fatal:!0})}function P(){r.raise({message:o.INSTALL_FLASH,fatal:!0})}function Q(){p.broadcast({excludeThis:!0},"audio:play")}function R(a){a.fatal?k.get("router").apply("error",{resource_id:a.resource_id}):(window.console.warn("Exception: %s",a.get("message")),window.console.warn(a))}function S(a){var b=a.originalEvent;return r.raise({message:b.message,error:b,fatal:!1}),!0}function T(){G.dispose()}function U(){k.get("widgetParams").single_active&&(B.pause(),e.pause())}function V(a,b){var c=b&&b.getCurrentSound();c&&!c.isPrivate()&&c===B.getCurrentSound()&&(a.href=(c.playlist||b).getDeeplinkURL(),B.pause(c))}function W(){var a=$.Deferred();return k.get("widgetParams").tracking==="delayed"?($(document).one("click",a.resolve),p.on("audio:play",a.resolve)):a.resolve(),a}function X(){var a,b,c;return a=d.extend({},n,i.history.getOptions()),b=d.pick(a,d.keys(n)),b.visual?b.color=n.color:(c=j(b.color).hex(),b.color=c?c.substr(1):n.color),b}function Y(){var a=new I;return a.on("change",function(){K.set("me",d.extend({lastFetchTime:a.lastFetchTime},a.attributes))}),a}function Z(a){if(!l.isLoggedIn())return p.one("broadcast:connect:login",Z),$.Deferred().reject();var b=k.get("me"),c=K.get("me"),d=arguments[1],e;return b.baseUrl="me",a===undefined&&(a=2),d||(d=$.Deferred().done(function(){I.instances.add(b),p.trigger("connect:hasUserData")})),c?(e=c.lastFetchTime||Date.now(),delete c.lastFetchTime,b.lastFetchTime=e,b.set(c),d.resolve()):b.fetch().done(d.resolve).fail(function(b){b.status===401?(l.logout(),d.reject(b)):a?Z(a-1,d):d.reject(b)}),d}function _(){var a=new C,b=new m;a.render(),b.render(),$(L).append(a.el).append(b.el)}function ba(){var a=$.Deferred();return t.initialize(s).fetchAssignments().done(function(b){t.setExperimentsFromQueryParams(H.getQueryParams()),q.setExperiments(b),a.resolve()}).fail(function(){a.reject()}),a}var d=a("_"),e=a("lib/ad-manager"),f=a("lib/api/api-bridge"),g=a("lib/api-wrapper"),h=a("models/audio-ad"),i=a("backbone"),j=a("vendor/color/color"),k=a("config"),l=a("lib/connect"),m=a("views/buttons/cookie-policy"),n=a("config/widget-params"),o=a("config/error-messages"),p=a("lib/event-bus"),q=a("vendor/event-gateway/event-gateway"),r=a("models/exception"),s=a("config/experiments"),t=a("vendor/experiments/experiments"),u=a("vendor/fastclick"),v=a("lib/flash-widget"),w=a("lib/global-xhr-handlers"),x=a("lib/keyboard-shortcuts"),y=a("lib/lingua"),z=a("lib/loader"),A=a("lib/persistent-store"),B=a("lib/play-manager"),C=a("lib/views/progress"),D=a("router"),E=a("config/routes"),F=a("lib/support"),G=a("lib/tracking"),H=a("lib/url"),I=a("models/user"),J=a("lib/view"),K=new A("auth"),L="#widget";c.exports={start:function(a,b){var c=H.getQueryParams(window.location.search)["rollouts.internal_qa"]==="true";k.set("app_version",a).set("internal_qa",c),!F.newWidget||!1?v.start():(b&&z.setPackageMap(b),M(),F.audio||p.trigger("error:audio_support"))}}}),
define("_",["require","exports","module","vendor/underscore"],function(a,b,c){var d=a("vendor/underscore");c.exports=d,d.mixin({noop:function(){},proxy:function(a,b){[].slice.call(arguments,2).forEach(function(c){if(typeof a[c]!="function")throw new Error("Proxy source has no method named "+c);b[c]=a[c].bind(a)})},toAttributesString:function(a){var b=[],c,e;return d.each(a,function(a,f){c=f+'="',e=[],d.isObject(a)?d.each(a,function(a,b){e.push(b+":"+a)}):e.push(a),b.push(c+e.join(";")+'"')}),b.join(" ")}})}),
define("lib/ad-manager",["require","exports","module","_","lib/browser","lib/promoted","lib/backbone","lib/circuit-breaker","config","lib/event-bus","tracking-events"],function(a,b,c){function t(){var a=p||[],b;while(b=a.pop())b.state()!=="resolved"&&b.abort()}function u(){return o||(o=new h({giveUp:1})),o}function v(a,b,c,d){a.sound&&b.state()!=="rejected"?w.call(this,a,b,c,d):b.resolve()}function w(a,b,c,e){var f=a.sound;f.hold(),f.on("finish",this._onAdFinish,this).on("pause",this._onAdPause,this).on("play",this._onAdPlay,this).one("play",this._onAdPlayStart,this),this._currentAd=a,this._upcomingSound=c,this._upcomingSound.hold(),b.done(x.bind(this)),f.play(d.extend({checkpointInterval:m},e))}function x(){var a=this.getCurrentSound();a.off("finish",this._onAdFinish).off("pause",this._onAdPause).off("play",this._onAdPlay),a.isPlaying()&&a.pause(),a.release(),this._currentAd=null,this._upcomingSound.release(),this._upcomingSound=null}function y(a){var b=s.getCurrentAd(),c=s.getCurrentSound(),e=b.get("audio"),g=b.get("companion_display"),h={monetization_type:b.getMonetizationType(),monetized_object:c.getMonetizableTrack().getUrn()},i;switch(a){case"companion_display:impression":f.trackEvent("impression",g),j.trigger(k.IMPRESSION,{impressionName:"companion_display"});break;case"audio_ad:impression":f.trackEvent("impression",e),j.trigger(k.IMPRESSION,{impressionName:"audio_ad_impression"});break;case"companion_display:clickthrough":f.trackEvent("adClick",g),i=d.extend({ad_urn:g.ad_urn,external_media:g.ad_visual,click_name:"clickthrough::companion_display",click_object:c.getUrn(),click_target:g.landing_page,promoted_by:null},h),j.trigger(k.CLICKED,i);break;case"audio_ad:skip":f.trackEvent("skip",e),i=d.extend({ad_urn:e.ad_urn,click_name:"ad::skip",click_object:c.getUrn(),click_target:null,external_media:g.ad_visual},h),j.trigger(k.SKIPPED,i);break;case"audio_ad:finish":f.trackEvent("finish",e),i=d.extend({ad_urn:e.ad_urn,click_name:"ad::finish",click_object:c.getUrn(),click_target:null,external_media:g.ad_visual},h),j.trigger(k.FINISH,i);break;case"audio_ad:playStart":f.trackEvent("play",e);break;default:}}var d=a("_"),e=a("lib/browser"),f=a("lib/promoted"),g=a("lib/backbone"),h=a("lib/circuit-breaker"),i=a("config"),j=a("lib/event-bus"),k=a("tracking-events").ADS,l=1e3,m=3e3,n,o,p,q={AD_PLAY:"ad:play",AD_PAUSE:"ad:pause",AD_SKIP:"ad:skip",AD_FINISH:"ad:finish"},r=["visual-single-sound","single-sound"],s=c.exports=d.extend({},g.Events,{_adDeferred:null,_currentAd:null,_upcomingSound:null,setAudioAd:function(a){n=a},prefetchAudioAd:function(a){d.delay(function(){var b=new n({id:a.id}),c=u();b.configureMonetizableTrack(a),!b.isPopulated()&&c.enabled&&b.fetch().fail(c.failed).done(c.succeeded)},l)},getCurrentSound:function(){return this._currentAd&&this._currentAd.sound},getUpcomingSound:function(){return this._upcomingSound},getCurrentAd:function(){return this._currentAd},skip:function(a){var b=this._adDeferred,c=this._currentAd;return t(),b?(this.getCurrentSound()&&(c.sound.pause(),this.trigger(q.AD_SKIP,c),this.metrics("audio_ad:skip",a)),b.resolve()):$.Deferred().resolve()},toggle:function(a){var b=this.getCurrentSound(),c;c=!b.isPlaying(),c?b.play(a):b.pause(a)},pause:function(){var a=this.getCurrentSound();a&&a.pause()},whenAdFinished:function(a,b){var c=this._adDeferred,d=new n({id:a.id}),f=u(),g=p||[];return d.configureMonetizableTrack(a),c&&c.state()==="pending"?this.skip():d.sound&&d.sound.currentTime()>0?$.Deferred().resolve():(c=this._adDeferred=$.Deferred(),!d.isPopulated()&&f.enabled?(g.push(d.fetch({async:!e.isMobile}).fail(function(){f.failed(),c.reject(),t()}).done(function(){f.succeeded(),v.call(this,d,c,a,b),t()}.bind(this))),c):(v.call(this,d,c,a,b),c))},adsEnabled:function(){return!i.get("adsDisabled")&&i.get("widgetParams").show_artwork&&d.contains(r,i.get("router").layoutName)},_onAdFinish:function(){var a=this.getCurrentAd(),b=this._adDeferred;this.trigger(q.AD_FINISH,a),this.metrics("audio_ad:finish"),b.resolve()},_onAdPause:function(){var a=this.getCurrentAd();this.trigger(q.AD_PAUSE,a)},_onAdPlay:function(){var a=this.getCurrentAd();this.trigger(q.AD_PLAY,a)},_onAdPlayStart:function(){this.metrics("audio_ad:playStart")},_isUserWithinGracePeriod:function(){return!1},metrics:function(a,b){s.getCurrentAd()&&s.getCurrentSound()&&y(a,b||{})}})}),
define("lib/api/api-bridge",["require","exports","module","_","config","lib/event-bus","lib/play-manager","lib/api/setters","lib/api/getters","lib/api/events","lib/api/events-map"],function(a,b,c){function u(){if(r)return;r=!0,window.addEventListener?window.addEventListener("message",E,!1):window.attachEvent("onmessage",E),d.each(l.audio,function(a,b){f.on(a,function(a){var c=a.sound;c&&c.isNowPlaying()&&A(b,F(c))})}),d.each(l.ui,function(a,b){f.on(a,function(a,c){A(b,c)})}),z(j.READY)}function v(){e.get("router").layoutName==="error"&&(u(),z(j.ERROR))}function w(){return g.getCurrentSound()}function x(a){var b,c=w();switch(a){case i.GET_VOLUME:b=c?c.getVolume():q;break;case i.GET_POSITION:b=c?c.currentTime():q;break;case i.GET_DURATION:b=c?c.duration():q;break;case i.GET_CURRENT_SOUND:b=c?c.toJSON():q;break;case i.GET_CURRENT_SOUND_INDEX:b=g.cursor;break;case i.GET_SOUNDS:b=g.getSounds();break;case i.IS_PAUSED:b=c?c.isPaused():!1}return b}function y(a,b){var c=w();if(c)switch(a){case h.SET_VOLUME:c.setVolume(b);break;case h.SEEK_TO:c.seek(b);break;case h.PLAY:g.play(c);break;case h.PAUSE:g.pause(c);break;case h.TOGGLE:g.toggle(c)}switch(a){case h.NEXT:g.playNext();break;case h.PREV:g.playPrev();break;case h.SKIP:g.play(g.get(b))}}function z(a,b){var c=G(),f;if(!c)return!1;f=JSON.stringify({widgetId:e.get("widget_id"),method:a,value:d.isUndefined(b)?null:b}),c.postMessage(f,"*")}function A(a,b,c){(c||d.indexOf(s,a)>-1)&&z(a,b)}function B(a){return d.indexOf(d.values(j),a)>-1}function C(a){B(a)&&s.push(a)}function D(a){B(a)&&(s=d.without(s,a))}function E(a){var b,c,e;try{b=JSON.parse(a.data)}catch(f){return}c=b.method;if(!c)return;d.indexOf(m,c)>-1?z(c,x(c)):d.indexOf(n,c)>-1?y(c,b.value):d.indexOf(o,c)>-1&&(e=b.value,e&&(c===k.ADD_LISTENER?C(e):D(e)))}function F(a){var b=a.currentTime();return{loadedProgress:a.loadProgress(),currentPosition:b,relativePosition:a.progress()}}function G(){if(d.isUndefined(p))try{p=window.parent&&window.parent!==window&&window.parent.postMessage?window.parent:null}catch(a){p=null}return p}var d=a("_"),e=a("config"),f=a("lib/event-bus"),g=a("lib/play-manager"),h=a("lib/api/setters"),i=a("lib/api/getters"),j=a("lib/api/events").api,k=a("lib/api/events").bridge,l=a("lib/api/events-map"),m=d.values(i),n=d.values(h),o=d.values(k),p,q,r=!1,s=[],t=c.exports={start:d.once(function(){f.on("widget:ready",u).on("layout:change",v)})}}),
define("lib/api-wrapper",["require","exports","module","lib/connect","config","lib/url"],function(a,b,c){function l(a){return!h.test(a)||a.indexOf(e.get("public_api_host"))===0}function m(a){return a.indexOf(e.get("api_web_host"))===0}function n(a){return i.test(a)}var d=a("lib/connect"),e=a("config"),f=a("lib/url"),g=/^https?:\/\/.+?\//,h=/^https?:\/\//,i=new RegExp("([ei]1/)?("+["me","tracks/[0-9]+/plays","audio-ad","assignments"].join("|")+")\\b"),j={likes:"favorites",groups:"groups",people:"users",sound:"track",sounds:"tracks"},k=c.exports={initialize:function(a){$.ajaxSetup({statusCode:a||{},beforeSend:function(a,b){var c=l(b.url),h=m(b.url);b.crossDomain=!0;if(!c&&!h)return;d.isLoggedIn()&&n(b.url)&&a.setRequestHeader("Authorization","OAuth "+d.getAuthToken()),c&&(b.url=e.get("public_api_host")+b.url.replace(g,"")),b.url=f.modify(b.url,{scheme:"https",query:{format:"json",client_id:e.get("client_id"),app_version:e.get("app_version")}})}})},toAPIResource:function(a){return j[a]||a}}}),
define("models/audio-ad",["require","exports","module","_","lib/promoted","lib/model","models/sound","models/user"],function(a,b,c){var d=a("_"),e=a("lib/promoted"),f=a("lib/model"),g=a("models/sound"),h=a("models/user"),i="audio_ad",j=c.exports=f.extend({resource_type:"audio_ad",submodelMap:{sound:g,user:h},baseUrl:function(){return e.getAudioAdsUrl(this.id)},sound:null,createSubmodel:function(a,b){var c;b==="sound"?(c=this.get("sound"),this.sound=new g(d.extend(c,{resource_id:{ad_target_id:this.resource_id,sound_id:c.id}})),this.sound.setMonetizableTrack(this._monetizableTrack)):f.prototype.createSubmodel.apply(this,arguments)},parse:function(a){var b={},c=a&&a.promoted;return c&&(e.storeTargetingAttrs(c),a.track&&(b.sound=a.track,b.sound.ad_type="preroll",b.user=b.sound.user,b.tracking=c.data.audio?c.data.audio.tracking:{},b.audio=c.data.audio,b.companion_display=d.isEmpty(c.data.companion_display)?null:c.data.companion_display)),b},configureMonetizableTrack:function(a){this._monetizableTrack=a},getMonetizationType:function(){return i}})}),
define("backbone",["require","exports","module","_"],function(a,b,c){((function(){var c=function(){return this}(),d=c.Backbone,e=Array.prototype.slice,f=Array.prototype.splice,g;typeof b!="undefined"?g=b:g=c.Backbone={},g.VERSION="0.9.1";var h=c._;!h&&typeof a!="undefined"&&(h=a("_"));var i=c.jQuery||c.Zepto||c.ender;g.setDomLibrary=function(a){i=a},g.noConflict=function(){return c.Backbone=d,this},g.emulateHTTP=!1,g.emulateJSON=!1,g.Events={on:function(a,b,c){if(b===i.noop)return this;var d;a=a.split(/\s+/);var e=this._callbacks||(this._callbacks={});while(d=a.shift()){var f=e[d]||(e[d]={}),g=f.tail||(f.tail=f.next={});g.callback=b,g.context=c,f.tail=g.next={}}return this},off:function(a,b,c){if(b===i.noop)return this;var d,e,f;if(!a)delete this._callbacks;else if(e=this._callbacks){a=a.split(/\s+/);while(d=a.shift()){f=e[d],delete e[d];if(!b||!f)continue;while((f=f.next)&&f.next)if(f.callback!==b||!!c&&f.context!==c)this.on(d,f.callback,f.context);else continue}}return this},trigger:function(a){var b,c,d,f,g,h,i;if(!(d=this._callbacks))return this;h=d.all,(a=a.split(/\s+/)).push(null);while(b=a.shift()){h&&a.push({next:h.next,tail:h.tail,event:b});if(!(c=d[b]))continue;a.push({next:c.next,tail:c.tail})}i=e.call(arguments,1);while(c=a.pop()){f=c.tail,g=c.event?[c.event].concat(i):i;while((c=c.next)!==f)c.callback.apply(c.context||this,g)}return this},one:function(a,b,c){var d=this,e,f=function(a){var e=function(){d.off(a,e,c),b.apply(this,arguments)};return e};a=a.split(/\s+/);while(e=a.shift())d.on(e,f(e),c);return this}},g.Events.bind=g.Events.on,g.Events.unbind=g.Events.off,g.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=w(this,"defaults"))a=h.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=h.uniqueId("c");if(!this.set(a,{silent:!0}))throw new Error("Can't create an invalid model");delete this._changed,this._previousAttributes=h.clone(this.attributes),this.initialize.apply(this,arguments)},h.extend(g.Model.prototype,g.Events,{idAttribute:"id",initialize:function(){},toJSON:function(){return h.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var c=this.attributes[a];return this._escapedAttributes[a]=h.escape(c==null?"":""+c)},has:function(a){return this.attributes[a]!=null},set:function(a,b,c){var d,e,f;h.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof g.Model&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var i=this.attributes,j=this._escapedAttributes,k=this._previousAttributes||{},l=this._setting;this._changed||(this._changed={}),this._setting=!0;for(e in d){f=d[e],h.isEqual(i[e],f)||delete j[e],c.unset?delete i[e]:i[e]=f,this._changing&&!h.isEqual(this._changed[e],f)&&(this.trigger("change:"+e,this,f,c),this._moreChanges=!0),delete this._changed[e];if(!h.isEqual(k[e],f)||h.has(i,e)!=h.has(k,e))this._changed[e]=f}return l||(!c.silent&&this.hasChanged()&&this.change(c),this._setting=!1),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(h.clone(this.attributes),a)},fetch:function(a){a=a?h.clone(a):{};var b=this,c=a.success;return a.success=function(d,e,f){b.lastFetchTime=Date.now();if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var d,e;h.isObject(a)||a==null?(d=a,c=b):(d={},d[a]=b),c=c?h.clone(c):{},c.wait&&(e=h.clone(this.attributes));var f=h.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?f:c))return!1;var i=this,j=c.success;c.success=function(a,b,e){var f=i.parse(a,e);c.wait&&(f=h.extend(d||{},f));if(!i.set(f,c))return!1;j?j(i,a):i.trigger("sync",i,a,c)},c.error=g.wrapError(c.error,i,c);var k=this.isNew()?"create":"update",l=(this.sync||g.sync).call(this,k,this,c);return c.wait&&this.set(e,f),l},destroy:function(a){a=a?h.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d();a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);return a.wait||d(),e},url:function(){var a=w(this.collection,"url")||w(this,"urlRoot")||x();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){if(this._changing||!this.hasChanged())return this;this._changing=!0,this._moreChanges=!0;for(var b in this._changed)this.trigger("change:"+b,this,this._changed[b],a);while(this._moreChanges)this._moreChanges=!1,this.trigger("change",this,a);return this._previousAttributes=h.clone(this.attributes),delete this._changed,this._changing=!1,this},hasChanged:function(a){return arguments.length?this._changed&&h.has(this._changed,a):!h.isEmpty(this._changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?h.clone(this._changed):!1;var b,c=!1,d=this._previousAttributes;for(var e in a){if(h.isEqual(d[e],b=a[e]))continue;(c||(c={}))[e]=b}return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return h.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=h.extend({},this.attributes,a);var c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),g.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})},h.extend(g.Collection.prototype,g.Events,{model:g.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){var c,d,e,g,i,j,k={},l={};b||(b={}),a=h.isArray(a)?a.slice():[a];for(c=0,e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw new Error("Can't add an invalid model to a collection");if(k[i=g.cid]||this._byCid[i]||(j=g.id)!=null&&(l[j]||this._byId[j]))throw new Error("Can't add the same model to a collection twice");k[i]=l[j]=g}for(c=0;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,g.id!=null&&(this._byId[g.id]=g);this.length+=e,d=b.at!=null?b.at:this.models.length,f.apply(this.models,[d,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,e=this.models.length;c<e;c++){if(!k[(g=this.models[c]).cid])continue;b.index=c,g.trigger("add",g,this,b)}return this},remove:function(a,b){var c,d,e,f;b||(b={}),a=h.isArray(a)?a.slice():[a];for(c=0,d=a.length;c<d;c++){f=this.getByCid(a[c])||this.get(a[c]);if(!f)continue;delete this._byId[f.id],delete this._byCid[f.cid],e=this.indexOf(f),this.models.splice(e,1),this.length--,b.silent||(b.index=e,f.trigger("remove",f,this,b)),this._removeReference(f)}return this},get:function(a){return a==null?null:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=h.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return h.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,{silent:!0,parse:b.parse}),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?h.clone(a):{},a.parse===undefined&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b.lastFetchTime=Date.now(),b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b=b?h.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f,g){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return h(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){if(a instanceof g.Model)a.collection||(a.collection=this);else{var c=a;b.collection=this,a=new this.model(c,b),a._validate(a.attributes,b)||(a=!1)}return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var j=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];h.each(j,function(a){g.Collection.prototype[a]=function(){return h[a].apply(h,[this.models].concat(h.toArray(arguments)))}}),g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var k=/:\w+/g,l=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;h.extend(g.Router.prototype,g.Events,{initialize:function(){},route:function(a,b,c){return g.history||(g.history=new g.History),h.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),g.history.route(a,h.bind(function(d){var e=this._extractParameters(a,d);c&&c.apply(this,e),this.trigger.apply(this,["route:"+b].concat(e)),g.history.trigger("route",this,b,e)},this)),this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(m,"\\$&").replace(k,"([^/]+)").replace(l,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),g.History=function(){this.handlers=[],h.bindAll(this,"checkUrl")};var n=/^[#\/]/,o=/msie [\w.]+/,p=!1;h.extend(g.History.prototype,g.Events,{interval:50,getFragment:function(a,b){if(a==null)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=window.location.hash;return a=decodeURIComponent(a),a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(n,"")},start:function(a){if(p)throw new Error("Backbone.history has already been started");this.options=h.extend({},{root:"/"},this.options,a),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),c=document.documentMode,d=o.exec(navigator.userAgent.toLowerCase())&&(!c||c<=7);d&&(this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!d?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b,p=!0;var e=window.location,f=e.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;if(!this.options.silent)return this.loadUrl()},stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),p=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.iframe.location.hash));if(b==this.fragment||b==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(a){var b=this.fragment=this.getFragment(a),c=h.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return c},navigate:function(a,b){if(!p)return!1;if(!b||b===!0)b={trigger:b};var c=(a||"").replace(n,"");if(this.fragment==c||this.fragment==decodeURIComponent(c))return;this._hasPushState?(c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}}),g.View=function(a){this.cid=h.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};var q=/^(\S+)\s*(.*)$/,r=["model","collection","el","id","attributes","className","tagName"];h.extend(g.View.prototype,g.Events,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){var d=document.createElement(a);return b&&i(d).attr(b),c&&i(d).html(c),d},setElement:function(a,b){return this.$el=i(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=w(this,"events")))return;this.undelegateEvents();for(var b in a){var c=a[b];h.isFunction(c)||(c=this[a[b]]);if(!c)throw new Error('Event "'+a[b]+'" does not exist');var d=b.match(q),e=d[1],f=d[2];c=h.bind(c,this),e+=".delegateEvents"+this.cid,f===""?this.$el.bind(e,c):this.$el.delegate(f,e,c)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=h.extend({},this.options,a));for(var b=0,c=r.length;b<c;b++){var d=r[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(!this.el){var a=w(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}else this.setElement(this.el,!1)}});var s=function(a,b){var c=v(this,a,b);return c.extend=this.extend,c};g.Model.extend=g.Collection.extend=g.Router.extend=g.View.extend=s;var t={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=t[a],e={type:d,dataType:"json"};return c.url||(e.url=w(b,"url")||x()),!c.data&&b&&(a=="create"||a=="update")&&(e.contentType="application/json",e.data=JSON.stringify(b.toJSON())),g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{}),g.emulateHTTP&&(d==="PUT"||d==="DELETE")&&(g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),e.type!=="GET"&&!g.emulateJSON&&(e.processData=!1),i.ajax(h.extend(e,c))},g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var u=function(){},v=function(a,b,c){var d;return b&&b.hasOwnProperty("constructor")?d=b.constructor:d=function(){a.apply(this,arguments)},h.extend(d,a),u.prototype=a.prototype,d.prototype=new u,b&&h.extend(d.prototype,b),c&&h.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},w=function(a,b){return!a||!a[b]?null:h.isFunction(a[b])?a[b]():a[b]},x=function(){throw new Error('A "url" property or function must be specified')}})).call(this)}),
define("vendor/color/color",["require","exports","module"],function(a,b,c){(function(){function j(a){return a===void 0}function k(a){return parseInt(a,16)}function l(a){return parseInt(a,10)}function m(a){return a.length===1?"0"+a:""+a}function n(a){return typeof a=="string"&&a.indexOf(".")!==-1&&parseFloat(a)===1}function o(a){return typeof a=="string"&&a.indexOf("%")!==-1}function p(a){return g(1,h(0,a))}function q(a,b){n(a)&&(a="100%");var c=o(a);return a=g(b,h(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),d.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function r(a){return[m(f(a.r).toString(16)),m(f(a.g).toString(16)),m(f(a.b).toString(16))].join("")}function s(a){function h(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var b,c,d,e=q(a.h,360),f=q(a.s,100),g=q(a.l,100);if(f===0)b=c=d=g;else{var i=g<.5?g*(1+f):g+f-g*f,j=2*g-i;b=h(j,i,e+1/3),c=h(j,i,e),d=h(j,i,e-1/3)}return{r:b*255,g:c*255,b:d*255}}function t(a){var b=q(a.r,255),c=q(a.g,255),d=q(a.b,255),e=h(b,c,d),i=g(b,c,d),j,k,l=(e+i)/2;if(e===i)j=k=0;else{var m=e-i;k=l>.5?m/(2-e-i):m/(e+i);switch(e){case b:j=(c-d)/m+(c<d?6:0);break;case c:j=(d-b)/m+2;break;case d:j=(b-c)/m+4}j/=6}return{h:f(j*360),s:f(k*100),l:f(l*100)}}function u(c){c=c.replace(a,"").replace(b,"").toLowerCase();var d;return(d=i.rgb.exec(c))?{r:l(d[1]),g:l(d[2]),b:l(d[3])}:(d=i.hsl.exec(c))?{h:l(d[1]),s:l(d[2]),l:l(d[3])}:(d=i.hex6.exec(c))?{r:k(d[1]),g:k(d[2]),b:k(d[3])}:(d=i.hex3.exec(c))?{r:k(d[1]+""+d[1]),g:k(d[2]+""+d[2]),b:k(d[3]+""+d[3])}:!1}function v(a){var b=null;return typeof a=="string"&&(a=u(a)),typeof a=="object"&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?b=a:a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(b=s(a))),b}function w(a){var b=this.toHsl();return b.h+=l(a),D(b)}function x(a){var b=this.toHsl();return b.l-=l(a),h(0,b.l),D(b)}function y(a){var b=this.toHsl();return b.l+=l(a),g(100,b.l),D(b)}function z(a,b){a=a||6,b=b||30;var c=this.toHsl(),d=360/b,e=[D(c)];for(c.h=(c.h-(d*a>>1)+720)%360;--a;)c.h=(c.h+d)%360,e.push(D(c));return e}function A(a){var b=this.toRgb(),c=D(a).toRgb(),d=(b.r*299+b.g*587+b.b*114)/1e3,f=(c.r*299+c.g*587+c.b*114)/1e3,i=h(b.r,c.r)-g(b.r,c.r)+h(b.g,c.g)-g(b.g,c.g)+h(b.b,c.b)-g(b.b,c.b);return{brightness:e(d-f),color:i}}function B(a){var b=this.diff(a);return b.brightness>125&&b.color>500}function C(a,b){var c=this.diff(a||"#000"),d=this.diff(b||"#fff");return c.brightness>d.brightness&&c.color>d.color?D(a):D(b)}var a=/^[\s,#]+/,b=/\s+$/,d=Math,e=d.abs,f=d.round,g=d.min,h=d.max,i=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),hsl:new RegExp("hsl"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}(),D=function(a){var b=v(a);return{hue:function(a){return w.call(this,a)},darken:function(a){return x.call(this,a)},lighten:function(a){return y.call(this,a)},analogous:function(a,b){return z.call(this,a,b)},readable:function(a){return B.call(this,a)},diff:function(a){return A.call(this,a)},contrast:function(a,b){return C.call(this,a,b)},hex:function(){return b?"#"+r(b):null},toRgb:function(){return b},isValid:function(){return b?!0:!1},rgb:function(){return b?"rgb("+[f(b.r),f(b.g),f(b.b)].join(", ")+")":null},rgba:function(a){return b?"rgba("+[f(b.r),f(b.g),f(b.b),j(a)?1:p(a)].join(", ")+")":null},toHsl:function(){return t(b)},hsl:function(){var a=t(b);return b?"hsl("+a.h+", "+a.s+"%, "+a.l+"%)":null}}};typeof c!="undefined"&&c.exports?c.exports=D:(global=function(){return this}(),global.SC=global.SC||{},global.SC.color=D)})()}),
define("config",["require","exports","module","lib/mixins/observing","_","config/client-ids","lib/store","lib/url"],function(a,b,c){var d=a("lib/mixins/observing"),e=a("_"),f=a("config/client-ids"),g=a("lib/store"),h=a("lib/url"),i=h.parse(location.search).query.visual==="true",j=i?"visual":"classic",k,l,m=c.exports=new g;d.applyTo(m),k=f[j].production,l="https://w.soundcloud.com/player/callback.html",k||window.console.error("Unknown host: %o","http://w.soundcloud.com/player/"),e.each({app_version:null,app_root:h.parse("http://w.soundcloud.com/player/").directory||"/",api_web_host:"https://api-widget.soundcloud.com/",public_api_host:"https://api.soundcloud.com/",eventlogger_tracking_url:"https://telemetry.soundcloud.com",widget_id:"widget_"+Date.now(),client_application_id:i?90575:43164,client_id:k,redirect_uri:l,fb_app_id:"19507961798",mixi_api_key:"1403ed11563185e9cff6cfeedf4f2ecf77fa459e",me:null,oauth_token:null,preferFlashAudio:!0,promotedContentAccessToken:"widget",router:null,widgetReady:!1,appView:null,widgetParams:{},wisHost:"https://wis.sndcdn.com",adsDisabled:!1},function(a,b){m.set(b,a,{silent:!0})}),m.finalize()}),
define("lib/connect",["require","exports","module","_","lib/backbone","config","lib/event-bus","lib/url","lib/persistent-store"],function(a,b,c){function s(a,b,c){var d=window.screenX+(window.outerWidth-b)/2,e=window.screenY+(window.outerHeight-c)/2;return window.open(a,"connectWithSoundCloud",["location=1","width="+b,"height="+c,"top="+e,"left="+d,"toolbar=no","scrollbars=yes"].join(","))}var d=a("_"),e=a("lib/backbone"),f=a("config"),g=a("lib/event-bus"),h=a("lib/url"),i=a("lib/persistent-store"),j=150,k="v=2",l="oauth_token",m="non-expiring fast-connect",n=new i("anonymous-user"),o=new i("auth"),p,q;o.on(l,function(a){r.setAuthToken(a.current)});var r=c.exports=d.extend({},e.Events,{setAuthToken:function(a){o.set(l,a)},getAuthToken:function(){return o.get(l)},isLoggedIn:function(){return!!this.getAuthToken()},login:function(){var a;return q?p&&!p.closed&&p.focus&&p.focus():(q=$.Deferred().fail(function(){q=null}),this.isLoggedIn()?q.resolve():(a=h.stringify({host:f.get("public_api_host").replace("api.",""),path:["connect"],query:{client_id:f.get("client_id"),response_type:"token",scope:m,display:"next",redirect_uri:f.get("redirect_uri")+"?"+k}}),p=s(a,450,500),function b(){(!p||p.closed)&&!r.isLoggedIn()?q.reject():p.closed?g.one("connect:hasUserData",q.resolve).broadcast("connect:login"):setTimeout(b,j)}())),q},logout:function(){o.reset(),g.trigger("connect:logout","logout")},getUserIdentifier:function(){var a;return r.isLoggedIn()?a=r.currentUserId():(a=n.get("id"),a||(a=Math.floor(Math.random()*1e3),n.set("id",a))),a},currentUserId:function(){return f.get("me").id}})}),
define("views/buttons/cookie-policy",["require","exports","module","config","lib/lingua","lib/play-manager","lib/view","views/buttons/cookie-policy.css","views/buttons/cookie-policy.tmpl"],function(a,b,c){function i(a){if(k()){var b=a?"on":"off";f[b]("change:current",j,this)}}function j(){this.rerender()}function k(){return d.get("widgetParams").visual}function l(){var a=f.getCurrentSound();return a?a.get("publisher_metadata").c_line_for_display:""}function m(){var a=f.getCurrentSound();return a?a.get("publisher_metadata").p_line_for_display:""}function n(){return[m(),l()].filter(Boolean).join(" ")}function o(a){a.preventDefault()}var d=a("config"),e=a("lib/lingua"),f=a("lib/play-manager"),g=a("lib/view"),h=c.exports=g.extend({css:a("views/buttons/cookie-policy.css"),template:a("views/buttons/cookie-policy.tmpl"),className:"cookiePolicy sc-background-light",events:{"click .cookiePolicy__pline":o},setup:function(){i.call(this,!0)},dispose:function(){i.call(this,!1)},renderDecorate:function(){this.toggleState("extended",k()&&!!m())},getTemplateData:function(){return{cookie_policy_visible:e.t("Cookie policy"),cookie_policy_a11y:e.t("SoundCloud cookie policy"),publisher_info:n()}}})}),
define("config/widget-params",["require","exports","module","lib/browser"],function(a,b,c){var d=a("lib/browser"),e=c.exports={auto_advance:!0,auto_play:!1,buying:!0,color:"FF5500",continuous_play:!0,download:!0,following:!0,hide_related:!1,inverse:!1,legacy_fallback:!0,liking:!0,secret_token:"",sharing:!0,show_artwork:!0,show_comments:d.isNextSupported?!0:!1,show_playcount:!0,show_reposts:!1,show_user:!0,single_active:!0,start_track:0,tracking:"",visual:!1,locale:"en"}}),
define("config/error-messages",["require","exports","module","lib/lingua"],function(a,b,c){var d=a("lib/lingua"),e=c.exports={USER_NOT_FOUND:function(){return d.t("Oops, we couldn’t find that profile.")},GROUP_NOT_FOUND:function(){return d.t("Oops, we couldn’t find that group.")},SOUND_NOT_FOUND:function(){return d.t("Oops, we couldn’t find that track.")},PLAYLIST_NOT_FOUND:function(){return d.t("Oops, we couldn’t find that playlist.")},INSTALL_FLASH:function(){return d.t('You need Adobe Flash Player to play sounds. <a href="http://get.adobe.com/flashplayer" target="_blank">Install Flash</a> and reload the page.')},EMPTY_PLAYLIST:function(){return d.t("This playlist is empty.")},SOUND_GEO_BLOCKED:function(){return d.t("The owner of this track has not made it available for streaming in your location.")},INVALID_URL_PARAM:function(){return d.t('You have not provided a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.')}}}),
define("lib/event-bus",["require","exports","module","_","lib/backbone","lib/persistent-store"],function(a,b,c){var d=a("_"),e=a("lib/backbone"),f=a("lib/persistent-store"),g,h,i,j,k;k=new f("broadcast"),g=String(Date.now()).substr(-8)*1e3+Math.floor(Math.random()*1e3),k.on("broadcast",function(a){var b=a.current;b&&b.appId!==g&&j.call(l,b)});var l=c.exports=d.extend({},e.Events,{broadcast:function(a,b){var c,d;return typeof a=="string"?(c=[].slice.call(arguments,1),b=a,a={}):c=[].slice.call(arguments,2),d=i(b,c),k.set("broadcast",d),a.excludeThis||j.call(this,d),this}});i=function(a,b){return{type:a,timestamp:Date.now(),appId:g,args:b}},j=function(a){this.trigger.apply(this,["broadcast:"+a.type].concat(a.args||[]))}}),
define("vendor/event-gateway/event-gateway",["require","exports","module"],function(a,b,c){(function(){function v(){clearTimeout(l),b=d=e=f=g=h=i=j=m=l=undefined,n=[],k=function(){throw new Error("EventGateway must be initialized")}}function w(){return Math.floor(Math.random()*1e6)}function x(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function y(a,b){var c=x(a),d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}function z(a){return a=typeof a=="object"?a:{},a.context=a.context||{},a.context.scope=a.context.scope||[],a}function A(a){return a.replace(t,"v$&")}function B(a,b,c){var d=a[c];return typeof d=="object"?b[c]=Object.keys(Q(d)).reduce(B.bind(null,d),{}):b[c]=""+d,b}function C(a,b){var c=Q(b);return a==="0.0.0"?Object.keys(c).reduce(B.bind(null,c),{}):c}function D(a,b,c,d){var e=i+(b?"/v1/events":"/v1/event"),f=JSON.stringify(a);if(d&&u)window.navigator.sendBeacon(e,f);else{var g=new window.XMLHttpRequest;g.onload=I.bind(null,g),g.onerror=J.bind(null,g,c&&D.bind(null,a,b,!1,!1)),g.open("post",e,!0),g.send(JSON.stringify(a))}}function E(a){m?(n.push(a),l||(l=setTimeout(F,m))):D(a,!1,!0,!1)}function F(a){clearTimeout(l),l=null,n.length&&(D(n.slice(),!0,!0,!!a),n.length=0)}function G(a,c,d){var i=Date.now(),k=window.location.href;R(d).then(function l(d){var l,m;d=d||{},d.anonymous_id=b,d.client_id=g,d.ts=i,d.url=d.url||k,h&&(d.app_version=h);if(f)for(l in f)d["exp_"+l]=f[l];e&&(d.origin=e),j&&!d.user&&(d.user=j),(m=document.referrer).length>0&&(d.referrer=m),E({event:a,version:A(c),payload:C(c,d)})})}function H(a){a.onload=a.onerror=null}function I(a){H(a)}function J(a,b){H(a),b&&!/^4/.test(a.status)&&setTimeout(b,r)}function K(a,b){var c=0,d=b.length;for(;c<d;c++)if(a[b[c]]===undefined)return!0;return!1}function L(a){return a?M("users",a):b}function M(a,b){return["soundcloud",a,b].join(":")}function N(a,b){b&&(a.query_urn=b.queryUrn,a.query_position=b.position)}function O(){}function P(a){var b={},c,d;if(a)for(c=1;c<arguments.length;++c)d=arguments[c],d in a&&(b[d]=a[d]);return b}function Q(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&a[b]!=null&&(c[b]=a[b]);return c}function R(a){return a&&typeof a.then=="function"?a:{then:function(b){return R(b(a))}}}var a,b,d,e,f,g,h,i,j,k,l,m,n,o="sc_anonymous_id",p=3e4,q=1e3,r=3e4,s="https://eventgateway.soundcloud.com",t=/^[^v]/,u=!!window.navigator.sendBeacon;v(),a={_anonymousId:null,initialize:function(c){if(d)return;if(!c.id)throw new Error("EventGateway: You need to pass an id");e=c.origin,c.user&&(j=M("users",c.user)),b=this._anonymousId=a.getAnonymousId(),this.checkpointIntervals={},g=c.id,h=c.appVersion||null,i=c.trackingUrl||s,m=c.batchTimeout||!1,d=!0,k=O},deinitialize:function(){v()},setUser:function(a){j=M("users",a)},setExperiments:function(a){f=a},getAnonymousId:function(){var b=a.anonymousIdStore.get();if(!b||b==="undefined")b=[w(),w(),w(),w()].join("-"),a.anonymousIdStore.set(b);return b},logEvent:G,pageview:function(a,b,c,d){k(),G("pageview","0.0.0",R(d).then(function(d){d=z(d);var e=L(a),f={user:e,level:b,chapter:c.join("::"),page_name:d.page_name,page_urn:d.page_urn,query_urn:d.query_urn,locale:d.locale};return y(f,d.params)}))},impression:function(a,b){k(),G("impression","1.16.0",R(b).then(function(a){a=z(a);var b=P(a,"impression_name","impression_category","impression_object","page_name","page_urn","ad_urn","monetized_object","monetization_type","promoted_by","external_media");return b.page_context=a.context.scope.join(":"),b}))},click:function(a,b,c,d){k(),G("click","0.0.0",R(d).then(function(d){d=z(d);var e={ad_urn:d.ad_urn,campaign:d.context.campaign,chapter:c.join("::"),context:d.context.scope.join(":"),external_media:d.external_media,level:b,monetization_type:d.monetization_type,monetized_object:d.monetized_object,promoted_by:d.promoted_by,urn:d.urn,user:L(a),click_name:d.click_name,click_object:d.click_object,click_target:d.click_target,page_name:d.page_name,page_urn:d.page_urn};return N(e,d.context.attribution),y(e,d.params)}))},audio:function(a){k(),G("audio","1.16.0",R(a).then(function(a){var b=a.id,c="soundcloud:tracks:"+b,d=this.checkpointIntervals,e=typeof a.checkpointInterval=="number"&&a.checkpointInterval>=q?a.checkpointInterval:null,f,g=P(a,"page_name","page_urn","source","in_playlist","playlist_position","reposted_by","track_length","protocol","action","trigger","ad_urn","monetization_type","promoted_by","policy","monetization_model");N(g,a.attribution),g.track=c,g.track_owner=M("users",a.trackOwnerId),g.playhead_position=a.playheadPosition,g.monetized_object=a.monetized_urn,clearInterval(d[b]);if(a.action==="play"){var h=Date.now()+a.track_length;f=x(g),f.action="checkpoint",d[b]=setInterval(function(){Date.now()<h?G("audio","1.16.0",f):clearInterval(d[b])},e||p)}else delete d[b];return g}.bind(this)))},audioPerformance:function(a){k(),G("audio_performance","0.0.0",R(a).then(function(a){if(K(a,["type","latency","protocol","playertype","host"]))throw new Error("EventGateway — AudioPerformance : One or multiple mandatory arguments are missing");return{type:a.type,latency:a.latency,protocol:a.protocol,player_type:a.playertype,host:a.host}}))},audioError:function(a){k(),G("audio_error","0.0.0",R(a).then(function(a){if(K(a,["error_code","protocol","player_type","host","url"]))throw new Error("EventGateway — AudioError : One or multiple mandatory arguments are missing");return{error_code:a.error_code,protocol:a.protocol,player_type:a.player_type,host:a.host,url:a.url}}))},appLoad:function(a,b){k(),G("appload","0.0.0",R(b).then(function(b){return{latency:b.latency,user:L(a),level:b.level}}))},statsView:function(a,b){G("stats_view","0.0.0",R(b).then(function(b){var c=L(a);return y({user:c},b)}))},anonymousIdStore:{get:function(){var a=document.cookie.split(o+"=");return a.length>1&&a[1].split(";")[0]},set:function(a){var b="."+window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),c=new Date,d;c.setTime(c.getTime()+31536e7),d="; expires="+c.toGMTString(),document.cookie=o+"="+a+d+"; path=/; domain="+b}},flush:F},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.EventGateway=a)})()}),
define("models/exception",["require","exports","module","lib/event-bus","lib/model"],function(a,b,c){var d=a("lib/event-bus"),e=a("lib/model"),f=c.exports=e.extend({url:null,lastFetchTime:1,fatal:!1,initialize:function(a){a=a||{},this.id||(a.id=this.id=this.cid,f.instances.set(this.id,this)),this.fatal=!!a.fatal,e.prototype.initialize.apply(this,arguments)}},{raise:function(a,b){var c=new f(a);c.release(),b=b||{},d.trigger("exception",c);if(b.hard)throw c}})}),
define("config/experiments",["require","exports","module","lib/endpoints","vendor/event-gateway/event-gateway","lib/support"],function(a,b,c){var d=a("lib/endpoints"),e=a("vendor/event-gateway/event-gateway"),f=a("lib/support"),g=c.exports={version:"05-11-2014_12:00",availableLayers:["widget_listening"],anonymousUserId:e.getAnonymousId(),assignmentServiceUrl:d.getEndpointUrl("assignments"),localStorageKey:"WIDGET::local::assignments",localStorageEnabled:f.localStorage}}),
define("vendor/experiments/experiments",["require","exports","module"],function(a,b,c){(function(){function d(b){if(!a._localStorageEnabled)return;localStorage.setItem(a._localStorageKey,b)}var a,b="assignments";a={_initialized:!1,_assignments:null,_localStorageKey:null,_localStorageEnabled:null,_availableLayers:null,_assignmentServiceUrl:null,_version:null,_anonymousId:null,initialize:function(c){return c=c||{},a._availableLayers=c.availableLayers||[],a._localStorageKey=c.localStorageKey||b,a._assignmentServiceUrl=c.assignmentServiceUrl+c.anonymousUserId,a._version=c.version,a._anonymousId=c.anonymousUserId,a._localStorageEnabled=c.hasOwnProperty("localStorageEnabled")?c.localStorageEnabled:!0,a._assignments=a.loadAssignments(),a._initialized=!0,a},reset:function(){a._availableLayers=[],a._localStorageKey=b,a._assignmentServiceUrl="",a._version=null,a._anonymousId=null,a._assignments=null},get:function(b,c){if(!a._initialized)return!1;var d=a.getLayers()||{};return d.hasOwnProperty(b)&&d[b].experimentName===c?d[b].variantName:!1},set:function(b,c,d){var e=a.getLayers();e[b]={experimentName:c,variantName:d}},fetchAssignments:function(){var b=$.Deferred(),c=a.getAssignments(),d=a._availableLayers,e=!!d.length,f={layers:d.join(",")};return a.isUpToDate(c,a._version)?b.resolve(a.formatAssignments()):e?(a.clearAssignments(),$.ajax({url:a._assignmentServiceUrl,type:"GET",dataType:"json",data:f,timeout:5e3}).done(function(c){a.buildAssignments(c),a.storeAssignments(),b.resolve(a.formatAssignments())}).fail(b.reject)):(a.clearAssignments(),b.resolve(a.formatAssignments())),b.promise()},isUpToDate:function(a,b){return a&&a._version===b},loadAssignments:function(){var b;try{b=JSON.parse(localStorage.getItem(a._localStorageKey))}catch(c){b={}}return b},buildAssignments:function(b){a._assignments={_version:a._version,layers:a.formatLayers(b)}},storeAssignments:function(){var b=a.getAssignments()||{};d(JSON.stringify(b))},clearAssignments:function(){a._assignments={},d(JSON.stringify({}))},getAssignments:function(){return a._assignments},getLayers:function(){return a.getAssignments().layers},formatAssignments:function(){var b={},c=a.getLayers(),d;return c&&(d=Object.keys(c),d.forEach(function(a){b[a]=c[a].variantId})),b},formatLayers:function(a){var b={};return a.forEach(function(a){b[a.layer_name]={experimentName:a.experiment_name,variantName:a.variant_name,variantId:a.variant_id}}),b},serialize:function(){var b=a.getLayers(),c,d,e=[];for(d in b)c=b[d],c&&c.experimentName&&c.variantName&&e.push("["+d+"] "+c.experimentName+": "+c.variantName);return e.join(", ")},setExperimentsFromQueryParams:function(b){var c,d,e,f,g;for(g in b)c=/^exp\.([^.]+)\.([^.]+)$/.exec(g),f=b[g],c&&(d=c[1],e=c[2]),d&&e&&f&&a.set(d,e,f)}},typeof c!="undefined"&&c.exports?c.exports=a:(window.SC=window.SC||{},window.SC.Experiments=a)})()}),
define("vendor/fastclick",["require","exports","module"],function(a,b,c){function d(a){"use strict";var b,c=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=a;if(!a||!a.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return d.prototype.onClick.apply(c,arguments)},this.onMouse=function(){return d.prototype.onMouse.apply(c,arguments)},this.onTouchStart=function(){return d.prototype.onTouchStart.apply(c,arguments)},this.onTouchMove=function(){return d.prototype.onTouchMove.apply(c,arguments)},this.onTouchEnd=function(){return d.prototype.onTouchEnd.apply(c,arguments)},this.onTouchCancel=function(){return d.prototype.onTouchCancel.apply(c,arguments)};if(d.notNeeded(a))return;this.deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;b==="click"?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;b==="click"?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),typeof a.onclick=="function"&&(b=a.onclick,a.addEventListener("click",function(a){b(a)},!1),a.onclick=null)}d.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,d.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),d.prototype.deviceIsIOS4=d.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d.prototype.deviceIsIOSWithBadTarget=d.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),d.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&a.type==="file"||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},d.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},d.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},d.prototype.determineEventType=function(a){return"use strict",this.deviceIsAndroid&&a.tagName.toLowerCase()==="select"?"mousedown":"click"},d.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&a.type.indexOf("date")!==0&&a.type!=="time"?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},d.prototype.updateScrollParent=function(a){"use strict";var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},d.prototype.getTargetElementFromEventTarget=function(a){return"use strict",a.nodeType===Node.TEXT_NODE?a.parentNode:a},d.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0];if(this.deviceIsIOS){d=window.getSelection();if(d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},d.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},d.prototype.onTouchMove=function(a){"use strict";if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0},d.prototype.findControl=function(a){return"use strict",a.control!==undefined?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},d.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase();if(d==="label"){b=this.findControl(g);if(b){this.focus(g);if(this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g)){if(a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&d==="input")return this.targetElement=null,!1;this.focus(g);if(!this.deviceIsIOS4||d!=="select")this.targetElement=null,a.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){e=g.fastClickScrollParent;if(e&&e.fastClickLastScrollTop!==e.scrollTop)return!0}return this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1},d.prototype.onTouchCancel=function(){"use strict",this.trackingClick=!1,this.targetElement=null},d.prototype.onMouse=function(a){return"use strict",this.targetElement?a.forwardedTouchEvent?!0:a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0:!0},d.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):a.target.type==="submit"&&a.detail===0?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},d.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},d.notNeeded=function(a){"use strict";var b,c;if(typeof window.ontouchstart=="undefined")return!0;c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(c){if(!d.prototype.deviceIsAndroid)return!0;b=document.querySelector("meta[name=viewport]");if(b){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(c>31&&window.innerWidth<=window.screen.width)return!0}}return a.style.msTouchAction==="none"?!0:!1},d.attach=function(a){return"use strict",new d(a)},c.exports=d}),
define("lib/flash-widget",["require","exports","module","lib/url","lib/utils","lib/support"],function(a,b,c){var d=a("lib/url"),e=a("lib/utils"),f=a("lib/support"),g=c.exports={start:function(){var a=document.getElementById("widget"),b,c,g={},h='<div style="position:absolute;width:100%;top:50px;text-align:center;"><p style="line-height:20px;">{errorMessage}</p><a href="http://soundcloud.com" title="Play on SoundCloud" class="g-sc-logo" style="display:inline-block">SoundCloud.com</a></div>';d.getQueryParam("legacy_fallback")==="false"?(c=h,g.errorMessage="Sorry, we don’t support your browser. Please upgrade to the latest version and try again."):f.flash?(c='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="flashwidget"><param name="movie" value="{flashPlayerSrc}"> </param><param name="allowscriptaccess" value="always"> </param><embed src="{flashPlayerSrc}" type="application/x-shockwave-flash" allowscriptaccess="always" width="100%" height="100%"> </embed></object>',g.flashPlayerSrc="//player.soundcloud.com/player.swf"+location.search+"&enable_api=true"):(c=h,g.errorMessage='You need Adobe Flash to play tracks. Please <a href="http://get.adobe.com/flashplayer" target="_blank">install Flash</a> and reload the page.'),b=e.supplant(c,g),a.className+=" noBorders fullSize",a.innerHTML=b}}}),
define("lib/global-xhr-handlers",["require","exports","module","lib/connect"],function(a,b,c){var d=a("lib/connect"),e=c.exports={401:function(a){var b=a.responseText.indexOf("geo_blocked")!==-1;b||d.logout()}}}),
define("lib/keyboard-shortcuts",["require","exports","module","_","lib/play-manager"],function(a,b,c){function h(a){return a.metaKey||a.shiftKey||a.ctrlKey||a.altKey}function j(a,b,c){i.call(a,Math.max(5,f)*1e3*(c==="next"?1:-1))}var d=a("_"),e=a("lib/play-manager"),f=0,g=c.exports={shortcuts:{playPause:{keyCode:["32","13"],fn:function(a){a&&e.toggle(a,{userInitiated:!0})}},load:{keyCode:["48","49","50","51","52","53","54","55","56","57"],fn:function(a,b){a&&!h(b)&&a.seek(a.getMediaDuration()/10*(b.keyCode-48))}},seekBackward:{keyCode:["37"],fn:function(a,b){a&&j(a,b,"prev")}},seekForward:{keyCode:["39"],fn:function(a,b){a&&j(a,b,"next")}},prev:{keyCode:["shiftKey+37","75"],fn:function(){e.playPrev({userInitiated:!0})}},next:{keyCode:["shiftKey+39","74"],fn:function(){e.playNext({userInitiated:!0})}}},handleKeyDown:function(a){var b=g.shortcuts,c=a.keyCode,i=c===13&&$(a.target).is(":tabbable")&&!a.isDefaultPrevented(),j,l,m;if(h(a)||i)return;var n=e.getCurrentSound();++f,j=k(c),d.find(d.sortBy(d.keys(j),"length").reverse(),function(d){var e=d.split("+"),f=e.every(function(b,f){if(f===e.length-1){var g=String(c)===e[f];return g&&e.length===1&&/[A-Za-z0-9%']/.test(String.fromCharCode(d))?!h(a):g}return a[b]});if(f)return m=b[j[d]],!0}),m&&(l=m.fn(n,a),l||a.preventDefault())},handleKeyUp:function(){f=0}},i=d.throttle(function(a){this.seekRelative(a)},200),k=d.memoize(function(a){var b=new RegExp("(^|\\+)"+a+"$"),c={};return d.each(g.shortcuts,function(a,e){d.each(a.keyCode,function(a){b.test(a)&&(c[a]=e)})}),c})}),
define("lib/lingua",["require","exports","module","lib/cookies","vendor/i18n/i18n","config/supported-locales"],function(a,b,c){function l(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return c===null?"":decodeURIComponent(c[1].replace(/\+/g," "))}function m(){return d.get(h.getLocaleCookieName())}function n(){var a=f.publicLanguageCodes,b=this.getBrowserPrimaryLocale(),c=a.indexOf(b);return c>-1?a[c]:f.defaultLocale}var d=a("lib/cookies"),e=a("vendor/i18n/i18n"),f=a("config/supported-locales"),g="locale",h,i,j=f.locales,k=c.exports={initialize:function(a){i=j[a]?a:f.defaultLocale,h=h||new e,h.setLocale(i),h.extend(j[i])},initializeFromUserSettings:function(){h=h||new e;var a=l(g),b=m(),c=a||b,d=n.call(this);this.initialize(c||d)},getBrowserPrimaryLocale:function(){var a=window.navigator,b=a.languages,c,d=a.userLanguage||b&&b[0]||a.language||"";return d=d.replace(/-/g,"_"),c=d.split("_"),c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():d},getLocale:function(){return i},t:function(a,b,c){c=c||{};var d=h.t(a,b,c.context,c.comment);return d},tp:function(a,b,c,d,e){e=e||{};var f=h.tp(a,b,c,d,e.context,e.comment);return f}}}),
define("lib/loader",["require","exports","module","_","lib/helpers/dom-helper"],function(a,b,c){var d=a("_"),e=a("lib/helpers/dom-helper"),f={},g=c.exports={setPackageMap:function(a){a._prefix&&d.each(a,function(b,c){c.charAt(0)!=="_"&&(a[c]=a._prefix+b)}),this.packageMap=a},loadLayout:function(b){var c=this.packageMap,d=c&&c[b],h,i=f[b],j;return i?i:d?(h=$.Deferred(),j=function(){h.resolve(a(b))},e.insertScript(d,{onload:j,onerror:h.reject}),i=f[b]=h.promise(),i):g.load(b)},load:function(b){var c=$.Deferred();return d.isArray(b)||(b=[b]),a(b,c.resolve),c}}}),
define("lib/persistent-store",["require","exports","module","lib/store","lib/mixins/persistent","lib/mixins/observing"],function(a,b,c){var d=a("lib/store"),e=a("lib/mixins/persistent"),f=a("lib/mixins/observing"),g=c.exports=d.extend();e.applyTo(g.prototype),f.applyTo(g.prototype)}),
define("lib/play-manager",["require","exports","module","_","backbone","lib/collection"],function(a,b,c){function k(a,b){b[a]("change:playable",n,this)[a]("pause",l,this)[a]("finish",m,this)}function l(a){this.trigger("pause",a.sound)}function m(a){var b=a.sound,c=this.indexOf(b)===this.getSounds().length-1;b.seek(0),c?this.trigger("finish",this.source):this.isContinuousPlaybackEnabled?this.playNext(!0):this.trigger("pause")}function n(a){a.isPlayable()||o(a)}function o(a,b){var c=x(j.indexOf(a));c&&j.play(c,b)}function p(){var a=this.source;a instanceof f&&a.on("add",r,this).on("remove",s,this),a.hold()}function q(){var a=this.source;a instanceof f&&a.off("add",r,this).off("remove",s,this),a.release()}function r(a,b,c){c.index<=this.cursor&&++this.cursor}function s(a,b,c){this.cursor&&c.index<=this.cursor&&--this.cursor}function t(){return!this._adDeferred&&this.getCurrentSound()&&this.getCurrentSound().get("policy")==="MONETIZE"&&g.adsEnabled()}function u(){return this._adDeferred&&this._adDeferred.state()==="pending"}function v(a,b){this._adDeferred=null,w.call(this,a,b)}function w(a,b){var c=this.source;this.pause(),a&&(this.setCursor(this.indexOf(a)),a.play(b),i=a,this.trigger("play",a)),this.length()-this.cursor<=h&&this.sourceIsCollection()&&!c.isFullyPopulated()&&c.fetch({add:!0})}function x(a){a=Math.max(0,j.cursor,a);var b=j.getSounds().slice(a),c=d.find(b,function(a){return a.isPlayable()});return c}var d=a("_"),e=a("backbone"),f=a("lib/collection"),g,h=3,i=null,j=c.exports=d.extend({},e.Events,{cursor:-1,source:null,isContinuousPlaybackEnabled:!0,sourceIsCollection:function(){return this.source&&this.source instanceof f},setSource:function(a,b){return b=d.defaults(b||{},{continuousPlay:!0}),this.source!==a&&(this.source&&q.call(this),this.source=a,a&&p.call(this),this.setCursor(-1)),this.isContinuousPlaybackEnabled=b.continuousPlay,this},length:function(){return this.getSounds().length},get:function(a){var b=this.source;return this.sourceIsCollection()?b.at(a):b},getSounds:function(){var a=this.source,b=[];return this.sourceIsCollection()?b=a.models:a&&(b=a.getSounds()),b},indexOf:function(a){return this.getSounds().indexOf(a)},getCurrentSound:function(){return this.get(this.cursor)||null},setCursor:function(a){var b=this.getCurrentSound(),c;if(a===this.cursor)return;b&&k.call(this,"off",b),this.cursor=Math.max(-1,Math.min((this.length()||0)-1,a)),c=this.getCurrentSound(),c&&k.call(this,"on",c),(b!==this.getCurrentSound()||!this.sourceIsCollection())&&this.trigger("change:current",{prev:b,current:this.getCurrentSound()})},play:function(a,b){b=b||{};if(!a.isPlayable()){(!j.isPlaying()||b.userAction)&&o(a,b);return}if(t.call(this))this._adDeferred=g.whenAdFinished(a,b),this._adDeferred.always(v.bind(this,a,b));else{if(u.call(this))return;w.call(this,a,b)}},pause:function(a,b){a=a||i,a&&a.isPlaying()&&a.pause(b),i=null},toggle:function(a,b){a&&(a.isPlaying()?this.pause(a,b):this.play(a,b))},playNext:function(a){this.cursor<this.length()-1&&this.play(this.get(this.cursor+1))},playPrev:function(){this.cursor>0&&this.play(this.get(this.cursor-1))},hasNextSound:function(){var a=this.source,b=this.cursor,c=this.length(),d=!(c&&b<c-1);return!d||a&&this.sourceIsCollection()&&(!a.isFullyPopulated()||!d)},prefetchCurrentSoundAudioAd:function(){t.call(this)&&g.prefetchAudioAd(this.getCurrentSound())},setAdManager:function(a){g=a},isPlaying:function(){var a=j.getCurrentSound();return a&&a.isPlaying()}})}),
define("lib/views/progress",["require","exports","module","config","lib/event-bus","lib/math","lib/view","lib/views/progress.css"],function(a,b,c){function i(){return f.clamp(this._status+Math.random()*this.options.trickleRate,0,.95)}function j(){this.done()}function k(a){var b=a?"on":"off";e[b]("widget:ready exception",j,this)}var d=a("config"),e=a("lib/event-bus"),f=a("lib/math"),g=a("lib/view"),h=c.exports=g.extend({className:"progress sc-background-orange",css:a("lib/views/progress.css"),template:function(){return""},defaults:{minimum:f.randomRange(.08,.15),trickleRate:.1,trickleSpeed:500},attributes:{role:"bar"},_status:null,setup:function(){k.call(this,!0)},dispose:function(){k.call(this,!1)},renderDecorate:function(){this.whenInserted().done(this.start.bind(this))},start:function(){this._status||this.set(0);var a=function(){this.addDeferred(setTimeout(function(){if(!this._status||this._status===1)return;this.set(i.call(this)),a()}.bind(this),this.options.trickleSpeed))}.bind(this);a()},set:function(a){this._status=a=f.clamp(a,this.options.minimum,1);var b=(-1+a)*100;window.requestAnimationFrame(function(){this.$el.css({"-webkit-transform":"translate3d("+b+"%, 0, 0)","-ms-transform":"translate3d("+b+"%, 0, 0)",transform:"translate3d("+b+"%, 0, 0)"}),a===1&&this.toggleState("hidden",!d.get("widgetParams").visual)}.bind(this))},done:function(){this.set(1)}})}),
define("router",["require","exports","module","lib/backbone","lib/event-bus","lib/loader","config"],function(a,b,c){var d=a("lib/backbone"),e=a("lib/event-bus"),f=a("lib/loader"),g=a("config"),h=c.exports=d.Router.extend({layoutArgs:null,layoutName:null,reload:function(){return d.history.loadUrl()},setRoutes:function(a){return a.forEach(function(a){this.route(a.route,a.name,a.handler)},this),this},apply:function(a,b){var c="layouts/"+a,d;this.setupDeferred&&this.setupDeferred.reject(),this.setupDeferred=d=$.Deferred(),f.loadLayout(c).done(function(c){if(d.state()!=="rejected"){this.layoutArgs=b,this.layoutName=a;var f=g.get("appView"),h=new c(b);f._teardown(),f.addSubview(h),f.$el.append(h.render().el),e.trigger("layout:change",f)}}.bind(this))}})}),
define("config/routes",["require","exports","module","_","backbone","config/error-messages","models/exception","config","lib/url","lib/utils","lib/resolve-path","config/resources"],function(a,b,c){function q(a,b){return a.push(r(b.resource,p(b.route),b.resource,t(b))),a.push(r(b.resource+"-permalink",p("/"+b.permalink),b.resource,s(b))),a}function r(a,b,c,d){return{name:a,route:b,resource:c,handler:d}}function s(a){return function(){var b=d.toArray(arguments),c=h.get("widgetParams").secret_token,e;o.lastIndex=0,e=a.permalink.replace(o,function(){return b.shift()}),c&&[l.SOUND,l.PLAYLIST].indexOf(a.resource)>-1&&(e+="/"+c),v.call(this,e,a.resource)}}function t(a){return function(b){var c=h.get("widgetParams"),e=c.visual,f=c.secret_token,g=a.resource,i=u(g,e),j;b=d.isNaN(Number(b))?b:Number(b),j={resource_id:b,resource_type:g},f&&(j.secret_token=f),this.apply(i,j)}}function u(a,b){var c;switch(a){case l.SOUND:c=b?"visual-single-sound":"single-sound";break;case l.PLAYLIST:case l.USER_SOUNDS:case l.USER_FAVORITES:case l.USER_SPOTLIGHT:case l.GROUP_SOUNDS:c=b?"visual-multi-sounds":"multi-sounds";break;default:c="error"}return c}function v(a,b){k(a).done(function(a){var c,d;c=e.history.getOptions(),c.url=a.location.replace(/\.json.*/,"");switch(b){case l.USER_FAVORITES:c.url+="/likes";break;case l.USER_SPOTLIGHT:c.url+="/spotlight"}d=i.stringify({query:c}),this.navigate(d,{trigger:!0,replace:!0})}.bind(this)).fail(function(a){if(a.status===404)return w(j.escapeHTML(e.history.getFragment()));g.raise({fatal:!0,xhr:a})})}function w(){g.raise({fatal:!0,message:f.INVALID_URL_PARAM})}var d=a("_"),e=a("backbone"),f=a("config/error-messages"),g=a("models/exception"),h=a("config"),i=a("lib/url"),j=a("lib/utils"),k=a("lib/resolve-path").resolveWithPublicApi,l=a("config/resources"),m="[a-zA-Z0-9_-]{1,255}",n={id:"[0-9]+",app:m,user:m,group:m,track:m,playlist:m},o=new RegExp(":("+Object.keys(n).join("|")+")","g"),p=function(){function a(a,b){return"("+n[b]+")"}return function(b){return o.lastIndex=0,new RegExp("^"+b.replace(o,a)+"$")}}();c.exports=[{route:"tracks/:id",permalink:":user/:track",resource:l.SOUND},{route:"users/:id",permalink:":user",resource:l.USER_SOUNDS},{route:"users/:id/favorites",permalink:":user/favorites",resource:l.USER_FAVORITES},{route:"users/:id/spotlight",permalink:":user/spotlight",resource:l.USER_SPOTLIGHT},{route:"groups/:id",permalink:"groups/:group",resource:l.GROUP_SOUNDS},{route:"playlists/:id",permalink:":user/sets/:playlist",resource:l.PLAYLIST}].reduce(q,[r("error","*error","exception",w)])}),
define("lib/support",["require","exports","module","_","lib/browser","lib/helpers/environment-helper"],function(a,b,c){function j(a){try{var b=!!a.getItem,c=!1,d;try{d=Date.now(),a.setItem(d,d),a.removeItem(d),c=!0}catch(e){}return b&&c}catch(f){return!1}}function k(){return f.getFlashPlugin()&&f.getFlashVersion()>=h}function l(){try{return!!window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg;").replace(/^no$/,"")}catch(a){return!1}}function m(){try{return!!window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("application/vnd.apple.mpegURL").replace(/^no$/,"")}catch(a){return!1}}function n(){return e.isIE9&&!e.isIEMobile?!1:l()}var d=a("_"),e=a("lib/browser"),f=a("lib/helpers/environment-helper"),g,h=9,i=c.exports={};g={audio:function(){return n()||k()},flash:function(){return k()},HTML5Audio:function(){return l()},HLSAudio:function(){return m()},sendBeacon:function(){return window.navigator.sendBeacon},newWidget:function(){return typeof window.JSON=="undefined"?!1:e.isIEMobile?!0:document.documentMode<=8||e.isIE6||e.isIE7||e.isIE8?!1:!0},sessionStorage:function(){try{return typeof sessionStorage!="undefined"&&j(sessionStorage)}catch(a){return!1}},localStorage:function(){try{return typeof localStorage!="undefined"&&j(localStorage)}catch(a){return!1}},webSocket:function(){return typeof window.WebSocket!="undefined"},WebWorker:function(){return!1},BlobBuilder:function(){return window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder},touch:function(){try{return window.hasOwnProperty("ontouchstart")}catch(a){return!1}},speech:function(){return"onwebkitspeechchange"in document.createElement("input")},corsImg:function(){return"crossOrigin"in new Image},transform3d:function(){var a=document.createElement("modernizr"),b=a.style,c=document.head||document.getElementsByTagName("head")[0],d=document.documentElement,e=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),f="@media ("+e.join("transform-3d),(")+"modernizr)",g=document.createElement("style"),h=document.createElement("div"),i=0,j,k;return j=function(a){while(a[i]){if(typeof b[a[i]]!="undefined")return!0;i++}},k=!!j(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),k&&typeof d.style.webkitPerspective!="undefined"&&(k=null,g.textContent=f+"{#modernizr{height:3px}}",c.appendChild(g),h.id="modernizr",d.appendChild(h),k=h.offsetHeight===3?!0:!1,g.parentNode.removeChild(g),h.parentNode.removeChild(h)),k},typedArrays:function(){try{return window.hasOwnProperty("Uint8Array")}catch(a){return!1}}},d.each(g,function(a,b){i[b]=!!a()}),g=null}),
define("lib/tracking",["require","exports","module","_","lib/analytics","config","lib/event-bus","tracking-events","lib/url"],function(a,b,c){function v(a,b){var c=d.last(a.split(":")),f=b&&b.model?b.model:b,g=f&&"getUrn"in f?f.getUrn():null,h=!1,i;switch(a){case"audio:play":case"audio:pause":case"audio:finish":c==="finish"&&(c="pause"),i=n;break;case j.LIKE_BUTTON_CLICKED:case j.FOLLOW_BUTTON_CLICKED:case j.SHARE_BUTTON_CLICKED:case j.UPSELL_CTA_BUTTON_CLICKED:case j.DOWNLOAD_LINK_CLICKED:case j.BUY_LINK_CLICKED:case j.SHARE_VIEW_OPENED:case j.LINK_BUTTON_CLICKED:case j.LINK_INPUT_CLICKED:case j.EMBED_BUTTON_CLICKED:case j.ARTWORK_CLICKED:case j.PLAYLIST_SCROLLED:case j.TITLE_LINK_CLICKED:case j.CREATOR_LINK_CLICKED:case j.LOGO_LINK_CLICKED:case j.RELATED_VIEW_OPENED:case j.RELATED_VIEW_CLICKED:i=p;break;case k.IMPRESSION:case k.CLICKED:case k.SKIPPED:case k.FINISH:i=q;break;case j.WAVEFORM_CLICKED:i=p,h=!0;break;case j.SHARE_ICON_CLICKED:i=p,c+="::"+b.shareIconType,g=b.model.getUrn();break;case l.LOAD:y(b)}if(h){r.hasOwnProperty(g)||(r[g]={});if(!r[g].hasOwnProperty(c))r[g][c]=!0;else return}c&&i===n?e.trackAudioEvent(c,f):i===q&&a===k.IMPRESSION?e.trackImpression(b.impressionName):i&&c&&e.trackClick({level:m,chapter:b&&b.chapter||[c,g]},b),a==="audio:finish"&&delete r[g]}function w(){e.trackPageView({level:m,chapter:[s,i.parse(window.location.href).query.url]})}function x(){if(window._gaq!=null){var a=window.innerWidth||document.body.clientWidth,b=window.innerHeight||document.body.clientHeight,c;a=Math.round(a/100)*100,b=Math.round(b/100)*100,c=a+"x"+b,window._gaq.push(["_trackEvent","Widget container size","Range",c])}}function y(a){e.trackAppLoad(m,B(),a.latency)}function z(a,b,c){if(!t(a))return;window._gaq!=null&&window._gaq.push(["_trackEvent",o,"JS - "+a,"file:"+b+"; line:"+c])}function A(a){var b=a.get("xhr");b&&b.status.toString().indexOf("5")===0&&window._gaq!=null&&window._gaq.push(["_trackEvent",o,b.status+" - "+b.statusText,"url:"+b.url])}function B(){return f.get("me").id||null}var d=a("_"),e=a("lib/analytics"),f=a("config"),g=a("lib/event-bus"),h=a("tracking-events"),i=a("lib/url"),j=h.UI,k=h.ADS,l=h.APP,m=0,n="Tracks",o="Error",p="UI",q="Ads",r={},s=i.parse(document.referrer).host,t,u=c.exports={init:d.once(function(){e.initialize();var a=["audio:play","audio:pause","audio:finish"];Object.keys(h).forEach(function(b){a.push.apply(a,d.values(h[b]))}),a.forEach(function(a){g.on(a,v.bind(null,a))}),window.onerror=z,g.on("exception",A).on("layout:change",function(){w(),x()})}),dispose:function(){e.dispose()}};t=function(){function b(a){return this.message.indexOf(a)>-1}var a=["Error: Permission denied to access property 'toString'","Script error.","stopAudioAdsTimer","ReferenceError: Can't find variable: dzPlayer","Error connecting to extension"];return function(c){return!a.some(b,{message:c})}}()}),
define("lib/url",["require","exports","module","_"],function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["---","scheme","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],f=a("_"),g,h=c.exports={parse:function(a,b){var c=d.exec(a),f,g,i={};b||(b=e);for(f=1;f<e.length;++f){g=e[f];if(b.indexOf(g)!==-1)if(c[f]||g==="query")switch(g){case"port":i[g]=parseInt(c[f],10);break;case"path":i[g]=c[f].split("/").map(decodeURIComponent).join("/");break;case"query":i[g]=h.parseQueryString(c[f]);break;default:i[g]=c[f]}}return i},joinPath:function(a){return a.filter(Boolean).map(encodeURIComponent).join("/")},parseQueryString:function(a){var b={};return a&&a.replace(/([^?=&]+)(?:=([^&]*))?/g,function(a,c,d){c=decodeURIComponent(c),d=decodeURIComponent(d||"");switch(typeof b[c]){case"object":b[c].push(d);break;case"undefined":b[c]=d;break;default:b[c]=[b[c],d]}}),b},stringify:function(a,b){var c=[],d,e;return b&&(e=h.parse(b),a.query&&e.query&&(f.extend(e.query,a.query),delete a.query),a=f.extend({},e,a)),a.scheme&&c.push(a.scheme+"://"),a.user&&(c.push(a.user),a.password&&c.push(":"+a.password),c.push("@")),a.host&&c.push(a.host),a.port&&c.push(":"+a.port),a.path&&(typeof a.path=="string"?c.push(a.path.split("/").map(encodeURIComponent).join("/")):c.push(h.joinPath(a.path))),d=g(a.query),d&&c.push("?"+d),a.fragment&&c.push("#"+a.fragment),c.join("")},modify:function(a,b){var c=h.parse(a);return f.isFunction(b)?c=b.call(null,c):typeof b=="object"&&(b.query&&(f.extend(c.query,b.query),delete b.query),f.extend(c,b)),h.stringify(c)},getQueryParam:function(a){return h.parseQueryString(window.location.search)[a]},getQueryParams:function(){var a,b;return function(c){var d=c||window.location.search;return d!==a&&(a=d,b=h.parseQueryString(d)),b}}()};g=function(a){var b,c,d,e,f,g=[];if(a)for(b in a)if(a.hasOwnProperty(b)){e=a[b];if(e!==null&&e!==f)if(typeof e=="object"){d=e.length;for(c=0;c<d;++c)g.push(encodeURIComponent(b)+"="+encodeURIComponent(e[c]).replace(/%2F/g,"/"))}else g.push(encodeURIComponent(b)+"="+encodeURIComponent(e).replace(/%2F/g,"/"))}return g.join("&")}}),
define("models/user",["require","exports","module","config","lib/mixins/has-image","lib/model"],function(a,b,c){function i(a,b){this.set(a,this.get(a)+(b?1:-1))}var d=a("config"),e=a("lib/mixins/has-image"),f=a("lib/model"),g={FREE:"free",PRO:"creator-pro",PRO_UNLIMITED:"creator-pro-unlimited"},h=c.exports=f.extend(e,{resource_type:"user",urnPrefix:"soundcloud:users",baseUrl:function(){return this.getEndpointUrl("user",{urn:this.getUrn()})},likesChanged:function(a){i.call(this,"likes_count",a)},getPlan:function(){var a=this.get("creator_subscriptions");if(a&&a[0])return a[0].product.id}},{Plans:g,resolve:function(a){if(a==="you"){var b=$.Deferred(),c=d.get("me");return b.resolve(c),b}return f._resolve(this,a,function(b){return b.get("permalink")===a})}})}),
define("lib/view",["require","exports","module","lib/backbone","config","lib/css","lib/views/mixins/stateful","lib/template","_","lib/utils","lib/customization"],function(a,b,c){function m(a,b){return i.defaults(b,a.prototype.defaults),a===l?b:m(a.__super__.constructor,b)}function n(a,b){var c,d;b=b||this.model,c=a?b.on:b.off,d=this.getObservedAttributes(b),d.forEach(function(a){c.call(b,"change:"+a,this.onModelChange,this)}.bind(this))}function o(a,b){var c;b=b||this.collection,c=a?"on":"off",b[c]("add",this.onAdd,this)[c]("remove",this.onRemove,this)[c]("reset",this.onCollectionReset,this)}var d=a("lib/backbone"),e=a("config"),f=a("lib/css"),g=a("lib/views/mixins/stateful"),h=a("lib/template"),i=a("_"),j=a("lib/utils"),k=a("lib/customization"),l=c.exports=d.View.extend(g,{ModelClass:null,requiredAttributes:null,observedAttributes:null,css:null,template:$.noop,LoadingView:null,loadingViewArgs:null,loadingTemplate:function(){return""},element2selector:{},_element2selector_cache:null,defaults:null,disposed:!1,subviews:null,_subviews_keys:null,_lastEventId:null,constructorArguments:null,_whenInsertedDefer:null,_deferreds:null,initialize:function(a){a=this.options=m(this.constructor,a||{}),this.constructorArguments=i.clone(a),a.resource_id&&this.ModelClass?this.model=this.getModel(a.resource_id,a.resource_type):typeof this.collection=="function"&&(this.collection=new this.collection),this._deferreds=[],this.subviews=[],this._subviews_keys=[],this.resetElementCache(),this._setup.call(this,a),this.model&&this.setupModelListeners(),this.collection&&this.setupCollectionListeners()},_setup:function(){this.setup.apply(this,arguments)},setup:$.noop,_dispose:function(){if(this.disposed)return;this._teardown(),this.dispose(),this.disposed=!0;while(this._deferreds.length)typeof this._deferreds[0]=="number"?clearTimeout(this._deferreds.shift()):this._deferreds[0].reject("viewDisposed");this.off(),this.model&&(this.teardownModelListeners(),this.model.release()),this.collection&&(this.teardownCollectionListeners(),this.collection.release()),this.$el.remove(),this._whenInsertedDefer&&(this._whenInsertedDefer.reject(),this._whenInsertedDefer=null),this._whenRenderedDefer&&(this._whenRenderedDefer.reject(),this._whenRenderedDefer=null),delete this.el,delete this.$el,delete this.model,delete this.collection,this.constructorArguments=null},dispose:$.noop,_teardown:function(){this.resetElementCache(),this.disposeSubviews(),this.teardown()},teardown:$.noop,disposeSubviews:function(){while(this.subviews.length)this.subviews.pop()._dispose();this.subviews=[],this._subviews_keys=[]},getModel:function(a,b){var c,d,e,f,g;return f={id:a,resource_type:b},e=this.ModelClass.getClass?this.ModelClass.getClass(f):this.ModelClass,c=e.hashFn(f),d=e.instances.get(c),d?d.hold():(g={id:a},b&&(g.resource_type=b),d=new e(g)),d},setupModelListeners:function(a){n.call(this,!0,a)},teardownModelListeners:function(a){n.call(this,!1,a)},setupCollectionListeners:function(a){o.call(this,!0,a)},teardownCollectionListeners:function(a){o.call(this,!1,a)},getRequiredAttributes:function(a){var b=this.requiredAttributes;return a||(a=this.model),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b||[]},getObservedAttributes:function(a){var b=this.observedAttributes,c;return a||(a=this.model),c=this.getRequiredAttributes(a),b&&!Array.isArray(b)&&(b=b[a.resource_type]),b?b.concat(c):c},addDeferred:function(a){return typeof a=="number"?this._deferreds.push(a):a.state()==="pending"&&(a.always(function(){var b=this._deferreds.indexOf(a);b>-1&&this._deferreds.splice(b,1)}.bind(this)),this._deferreds.push(a)),a},addSubview:function(a,b){return this.subviews.push(a),this._subviews_keys.push(b),b&&(this.subviews[b]=a),a},removeSubview:function(a){for(var b=this.subviews.length;b--;)if(this.subviews[b]===a){this._subviews_keys[b]&&delete this.subviews[this._subviews_keys[b]],this.subviews.splice(b,1),this._subviews_keys.splice(b,1);return}},getElement:function(a){var b,c,d;return this._element2selector_cache[a]===b&&(d=this.className.split(" ").shift(),c=this.element2selector[a]||"."+d+"__"+a,this._element2selector_cache[a]=this.$(c)),this._element2selector_cache[a]},resetElementCache:function(){this._element2selector_cache={}},render:function(){var a=this.hasData(),b=this.getTemplate(a),c=this.model||this.collection,d=a||!c?this._getTemplateData(a):c.toJSON();return b&&(h.render(b.bind(this),d,this.el),h.subviews(this)),this.css&&f.insert(this.css,this.colorCustomizable?function(a){var b=k.getColorParams();return i.each(b,function(a,c){b[c]=" "+a+" "}),j.replaceCSSVariables(a,b)}:undefined),a?(this.renderDecorate(),this._whenRenderedDefer||(this._whenRenderedDefer=$.Deferred()),this._whenRenderedDefer.resolve()):c&&(!b&&this.LoadingView&&this.addSubview(new this.LoadingView(i.result(this,"loadingViewArgs")),"loading").render().$el.appendTo(this.el),this.fetchData(c)),this},renderDecorate:$.noop,rerender:function(){this.disposed||(this._teardown(),this.render())},getTemplate:function(a){return a||!this.LoadingView&&!this.loadingTemplate?this.template:this.LoadingView?null:this.loadingTemplate},_getTemplateData:function(a){var b={};return this.model?b=this.getModelData():this.collection&&(b=this.getCollectionData()),b._options=i.clone(this.options),b._params=i.clone(e.get("widgetParams")),a&&(b=this.getTemplateData(b)||b),b},getTemplateData:$.noop,getCollectionData:function(){return this.collection.toJSON()},getModelData:function(){return this.model.toJSON()},fetchData:function(a){return a.fetch({attrs:this.getObservedAttributes(a)})},hasData:function(a){return a=a||this.model||this.collection,a?a.hasDataForView(this):!0},scrollIntoView:function(a){var b,c=this.$el.offset(),d,e,f,g,h,j,k;a=i.defaults({},a,{position:"auto"});if(!c)return!1;j=$(".g-main-scroll-area").first(),j.length||(j=$("#content")),f=$(document).scrollTop(),k=j.offset().top,d=f+k,e=f+$(window).height(),g=Math.floor(c.top),h=Math.floor(g+this.$el.height()),b=g>d&&h<e,b||(a.position==="top"||a.position==="auto"&&g<d?window.scrollTo(0,g-k):this.el.scrollIntoView(!1))},removeLoader:function(){var a=this.subviews.loading;a&&(a._dispose(),this.removeSubview(a))},isEquivalentTo:function(a,b){var c=b||{};return this.constructor===a&&i.isEqual(m(a,c),this.constructorArguments)},whenInserted:function(a){var b=this._whenInsertedDefer,c,d;return b||(a=a||document.body,d=function(e){e.closest(a).length!==0?this.disposed||b.resolve():c=setTimeout(d,100)}.bind(null,this.$el),this._whenInsertedDefer=b=$.Deferred(),b.fail(function(){clearTimeout(c)}),d()),b},whenRendered:function(){var a=this._whenRenderedDefer;return a||(a=this._whenRenderedDefer=$.Deferred()),a},whenReady:function(){var a=$.Deferred();return $.whenAll([this.whenInserted(),this.whenRendered()]).done(a.resolve.bind(a,this)),a},onModelChange:function(a,b,c,d){this._lastEventId!==d&&(this._lastEventId=d,this.rerender())},onCollectionReset:function(){this.rerender()},onAdd:$.noop,onRemove:$.noop});l.prototype.$$=l.prototype.getElement}),
define("vendor/underscore",["require","exports","module"],function(a,b,c){((function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){if(a instanceof z)return a;if(this instanceof z)this._wrapped=a;else return new z(a)};typeof b!="undefined"?(typeof c!="undefined"&&c.exports&&(b=c.exports=z),b._=z):a._=z,z.VERSION="1.4.4";var A=z.each=z.forEach=function(a,b,c){if(a==null)return;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return a==null?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)});if(!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},z.filter=z.select=function(a,b,c){var d=[];return a==null?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return a==null?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){if(!(d=d&&b.call(c,a,f,g)))return e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return a==null?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){if(d||(d=b.call(c,a,f,g)))return e}),!!d)};z.contains=z.include=function(a,b){return a==null?!1:u&&a.indexOf===u?a.indexOf(b)!=-1:C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.where=function(a,b,c){return z.isEmpty(b)?c?null:[]:z[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},z.findWhere=function(a,b){return z.where(a,b,!0)},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d};var D=function(a){return z.isFunction(a)?a:function(b){return b[a]}};z.sortBy=function(a,b,c){var d=D(b);return z.pluck(z.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||c===void 0)return 1;if(c<d||d===void 0)return-1}return a.index<b.index?-1:1}),"value")};var E=function(a,b,c,d){var e={},f=D(b||z.identity);return A(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};z.groupBy=function(a,b,c){return E(a,b,c,function(a,b,c){(z.has(a,b)?a[b]:a[b]=[]).push(c)})},z.countBy=function(a,b,c){return E(a,b,c,function(a,b){z.has(a,b)||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c,d){c=c==null?z.identity:D(c);var e=c.call(d,b),f=0,g=a.length;while(f<g){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return a==null?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,0,b):a[0]},z.initial=function(a,b,c){return j.call(a,0,a.length-(b==null||c?1:b))},z.last=function(a,b,c){return a==null?void 0:b!=null&&!c?j.call(a,Math.max(a.length-b,0)):a[a.length-1]},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,b==null||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){if(b?!d||g[g.length-1]!==c:!z.contains(g,c))g.push(c),f.push(a[d])}),f},z.union=function(){return z.uniq(k.apply(f,arguments))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=z.pluck(a,""+d);return c},z.object=function(a,b){if(a==null)return{};var c={};for(var d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(a==null)return-1;var d=0,e=a.length;if(c)if(typeof c=="number")d=c<0?Math.max(0,e+c):c;else return d=z.sortedIndex(a,b),a[d]===b?d:-1;if(u&&a.indexOf===u)return a.indexOf(b,c);for(;d<e;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(a==null)return-1;var d=c!=null;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);var e=d?c:a.length;while(e--)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f},z.bind=function(a,b){if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));var c=j.call(arguments,2);return function(){return a.apply(b,c.concat(j.call(arguments)))}},z.partial=function(a){var b=j.call(arguments,1);return function(){return a.apply(this,b.concat(j.call(arguments)))}},z.bindAll=function(a){var b=j.call(arguments,1);return b.length===0&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)};return function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},z.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}},z.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}},z.wrap=function(a,b){return function(){var c=[a];return i.apply(c,arguments),b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push(a[c]);return b},z.pairs=function(a){var b=[];for(var c in a)z.has(a,c)&&b.push([c,a[c]]);return b},z.invert=function(a){var b={};for(var c in a)z.has(a,c)&&(b[a[c]]=c);return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]==null&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var G=function(a,b,c,d){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var f=c.length;while(f--)if(c[f]==a)return d[f]==b;c.push(a),d.push(b);var g=0,h=!0;if(e=="[object Array]"){g=a.length,h=g==b.length;if(h)while(g--)if(!(h=G(a[g],b[g],c,d)))break}else{var i=a.constructor,j=b.constructor;if(i!==j&&!(z.isFunction(i)&&i instanceof i&&z.isFunction(j)&&j instanceof j))return!1;for(var k in a)if(z.has(a,k)){g++;if(!(h=z.has(b,k)&&G(a[k],b[k],c,d)))break}if(h){for(k in b)if(z.has(b,k)&&!(g--))break;h=!g}}return c.pop(),d.pop(),h};z.isEqual=function(a,b){return G(a,b,[],[])},z.isEmpty=function(a){if(a==null)return!0;if(z.isArray(a)||z.isString(a))return a.length===0;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!!a&&a.nodeType===1},z.isArray=w||function(a){return l.call(a)=="[object Array]"},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!!a&&!!z.has(a,"callee")}),typeof /./!="function"&&(z.isFunction=function(a){return typeof a=="function"}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||l.call(a)=="[object Boolean]"},z.isNull=function(a){return a===null},z.isUndefined=function(a){return a===void 0},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){var d=Array(a);for(var e=0;e<a;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return b==null&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var H={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};H.unescape=z.invert(H.escape);var I={escape:new RegExp("["+z.keys(H.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(H.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return b==null?"":(""+b).replace(I[a],function(b){return H[a][b]})}}),z.result=function(a,b){if(a==null)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),N.call(this,c.apply(z,a))}})};var J=0;z.uniqueId=function(a){var b=++J+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||K).source,(c.interpolate||K).source,(c.evaluate||K).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(M,function(a){return"\\"+L[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var N=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),(a=="shift"||a=="splice")&&c.length===0&&delete c[0],N.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return N.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})})).call(this)}),
define("lib/browser",["require","exports","module"],function(a,b,c){var d=navigator.userAgent.toLowerCase(),e=function(a){return a.test(d)},f=c.exports={};f.isOpera=typeof window.opera!="undefined"&&window.opera.toString()==="[object Opera]",f.isChrome=e(/chrome/),f.isWebKit=e(/webkit/),f.isSafari=!f.isChrome&&e(/safari/),f.isUIWebView=e(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i),f.isIE=!f.isOpera&&e(/msie/),f.isIE6=f.isIE&&e(/msie 6/),f.isIE7=f.isIE&&e(/msie 7/),f.isIE8=f.isIE&&e(/msie 8/),f.isIE9=f.isIE&&e(/msie 9/),f.isGecko=!f.isWebKit&&e(/gecko/),f.isWindows=e(/windows|win32/),f.isMac=e(/macintosh|mac os x/),f.isLinux=e(/linux/),f.isMobile=e(/mobile|Android|iPhone|iPod|iPad|PlayBook|Skyfire/i),f.isMobileSafari=f.isSafari&&f.isMobile,f.isAndroid=e(/android/),f.isiOS=e(/iphone|ipod|ipad/),f.isIEMobile=f.isMobile&&f.isIE,f.isSecure=/^https/i.test(window.location.protocol),f.isHiDPI=window.devicePixelRatio?window.devicePixelRatio>1:!1,f.isNextSupported=!f.isMobile||e(/iPad/i),f.backingStoreRatio=function(){var a=document.createElement("canvas"),b=a.getContext&&a.getContext("2d");if(b)return b.backingStorePixelRatio||b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||1}()}),
define("lib/promoted",["require","exports","module","_","lib/endpoints","lib/persistent-store","lib/url"],function(a,b,c){function k(a){var b=new Image;b.src=a}var d=a("_"),e=a("lib/endpoints"),f=a("lib/persistent-store"),g=a("lib/url"),h=new f("promoted-persistent"),i={addToSet:"add_to_set_click",follow:"follow_click",like:"like_click",play:"sound_play",skip:"sound_skip",finish:"sound_finish",impression:"impression",repost:"repost_click",share:"share_click",adClick:"ad_click",soundClickThrough:"sound_click",userClickThrough:"profile_click",purchaseClickThrough:"purchase_click"},j=c.exports={getAudioAdsUrl:function(a){var b={sc_a_id:h.get("sc_a_id"),referrer:g.parse(document.referrer).host,track_id:a,disgraceful:!1};return e.getEndpointUrl("audioAd",null,b)},trackEvent:function(a,b){j.getTrackingUrls(a,b).forEach(k)},storeTargetingAttrs:function(a){a.sc_a_id&&h.set("sc_a_id",a.sc_a_id)},getTrackingUrls:function(a,b){var c=b&&b.tracking&&b.tracking[i[a]]||[];return d.isArray(c)?c:[c]}}}),
define("lib/backbone",["require","exports","module","_","lib/url","lib/utils","backbone","lib/mixin"],function(a,b,c){var d=a("_"),e=a("lib/url"),f=a("lib/utils"),g=a("backbone"),h=a("lib/mixin"),i=g.Model.prototype,j=g.Collection.prototype,k="url";c.exports=g,d.extend(g.History.prototype,{getFragment:function(a){var b=this.getOptions(a);return b[k]||""},_getParams:function(a){return e.parse(f.unescapeHTML(a)).query},getOptions:function(a){var b,c,f,g;return b=this._getParams(a||location.search),b[k]=decodeURIComponent(b[k]),c=this._getParams(b[k]),f=e.parse(b[k]),f.path&&(f.host&&f.host!=="soundcloud.com"?g=f.path.replace(/^[#\/]/,""):g=f.path.replace(/\/+$/,"")),b[k]=g,b=d.extend(b,c),d.each(b,function(a,c){a==="false"?b[c]=!1:a==="true"?b[c]=!0:c==="start_track"&&(b[c]=parseInt(a,10))}),b}}),function(){function a(a,b){return function(){delete a._requests[b]}}function b(b){return function(c){var e;return c=d.extend({url:d.result(this,"url"),jqAjax:!1,saveRequest:!1,keepForever:!1,dataType:"json"},c),this._requests||(this._requests={}),e=this._requests[c.url],e?(c.success&&e.done(function(a){c.success(this,a)}.bind(this)),c.error&&e.fail(c.error)):(e=this._requests[c.url]=c.jqAjax?$.ajax(c):b.call(this,c),c.keepForever||e[c.saveRequest?"fail":"always"](a(this,c.url))),e}}i.fetch=b(i.fetch),j.fetch=b(j.fetch)}(),i.change=function(){var a=0;return function(b){var c;b&&b.force&&b.force.forEach(function(a){this._changed[a]=this.get(a)}.bind(this)),++a;for(c in this._changed)this._changed.hasOwnProperty(c)&&this.trigger("change:"+c,this,this._changed[c],b,a);this.trigger("change",this,b,a),this._previousAttributes=d.clone(this.attributes),this._changed={}}}(),g.Model.extend=g.Collection.extend=g.View.extend=function(a){return function(){var b=d.toArray(arguments),c=0,e,f;return e=b.filter(function(a,b){if(a instanceof h)return c=b+1,!0}),f=a.apply(this,b.slice(c)),e.forEach(function(a){a.applyTo(f.prototype)}),f}}(g.View.extend),j.add=function(a,b){var c,e,f,g,h,i,j={},k={},l,m;b||(b={}),a=d.isArray(a)?a.slice():[a];for(c=a.length;c--;){l=!1;if(!(g=a[c]=this._prepareModel(a[c],b)))l=!0;else if(j[h=g.cid]||this._byCid[h]||(i=g.id)!==null&&i!==m&&(k[i]||this._byId[i]))g.release(),l=!0;l?a.splice(c,1):j[h]=k[i]=g}for(c=0,f=a.length;c<f;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,g.id!==null&&g.id!==m&&(this._byId[g.id]=g);this.length+=f,e=b.at!==null&&b.at!==m?b.at:this.models.length,Array.prototype.splice.apply(this.models,[e,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(c=0,f=this.models.length;c<f;c++)j[(g=this.models[c]).cid]&&(b.index=c,g.trigger("add",g,this,b));return this}}),
define("lib/circuit-breaker",["require","exports","module","_","lib/backbone"],function(a,b,c){var d=a("_"),e=a("lib/backbone"),f=c.exports=Class.extend({enabled:!0,_breakCount:0,_failCount:0,_maxBreaks:0,_timeoutId:null,defaults:{tolerance:1,baseDelay:1e3,maxDelay:3e4,backoffRate:2,giveUp:null,enabled:!0},initialize:function(a){d.bindAll(this,"failed","succeeded"),this.setup(a)},setup:function(a){this.options=d.extend({},this.options||this.defaults,a),a=d.defaults(this.options,this.defaults);var b=a.maxDelay/a.baseDelay;if(a.backoffRate>1)while(b>1)++this._maxBreaks,b/=a.backoffRate;else this._maxBreaks=Infinity;a.enabled||this.disable()},dispose:function(){this.off(),this.clearTimeout()},clearTimeout:function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},failed:function(){++this._failCount>=this.options.tolerance&&this.disable()},succeeded:function(){this._breakCount=this._failCount=0},disable:function(a){if(this.enabled){var b=!a||a.autoEnable!==!1;this.enabled=!1,++this._breakCount,b&&(!this.options.giveUp||this._breakCount<this.options.giveUp)?this._timeoutId=setTimeout(this.enable.bind(this),this.currentDelay()):this.trigger("giveup"),this.trigger("disabled")}},enable:function(){this.enabled||(this.enabled=!0,this._failCount=0,this.trigger("enabled"))},currentDelay:function(){var a=this.options;return Math.min(a.baseDelay*Math.pow(a.backoffRate,Math.floor(Math.random()*Math.min(this._maxBreaks,this._breakCount))),a.maxDelay)}});d.extend(f.prototype,e.Events)}),
define("tracking-events",["require","exports","module"],function(a,b,c){c.exports={UI:{LIKE_BUTTON_CLICKED:"tracking:like_button_clicked",FOLLOW_BUTTON_CLICKED:"tracking:follow_button_clicked",SHARE_BUTTON_CLICKED:"tracking:share_button_clicked",UPSELL_CTA_BUTTON_CLICKED:"tracking:upsell_cta_button_clicked",DOWNLOAD_LINK_CLICKED:"tracking:download_link_clicked",BUY_LINK_CLICKED:"tracking:buy_link_clicked",SHARE_VIEW_OPENED:"tracking:share_view_opened",LINK_BUTTON_CLICKED:"tracking:link_button_clicked",LINK_INPUT_CLICKED:"tracking:link_input_clicked",EMBED_BUTTON_CLICKED:"tracking:embed_button_clicked",ARTWORK_CLICKED:"tracking:artwork_clicked",WAVEFORM_CLICKED:"tracking:waveform_clicked",SHARE_ICON_CLICKED:"tracking:share_icon_clicked",PLAYLIST_SCROLLED:"tracking:playlist_scrolled",TITLE_LINK_CLICKED:"tracking:title_link_clicked",CREATOR_LINK_CLICKED:"tracking:creator_link_clicked",LOGO_LINK_CLICKED:"tracking:logo_link_clicked",RELATED_VIEW_OPENED:"tracking:related_view_opened",RELATED_VIEW_CLICKED:"tracking:related_view_clicked"},ADS:{IMPRESSION:"tracking:impression",CLICKED:"tracking:ad:click",SKIPPED:"tracking:ad:skip",FINISH:"tracking:ad:finish"},APP:{LOAD:"tracking:appLoad"}}}),
define("lib/api/setters",["require","exports","module"],function(a,b,c){c.exports={PLAY:"play",PAUSE:"pause",TOGGLE:"toggle",SEEK_TO:"seekTo",SET_VOLUME:"setVolume",NEXT:"next",PREV:"prev",SKIP:"skip"}}),
define("lib/api/getters",["require","exports","module"],function(a,b,c){c.exports={GET_VOLUME:"getVolume",GET_DURATION:"getDuration",GET_POSITION:"getPosition",GET_SOUNDS:"getSounds",GET_CURRENT_SOUND:"getCurrentSound",GET_CURRENT_SOUND_INDEX:"getCurrentSoundIndex",IS_PAUSED:"isPaused"}}),
define("lib/api/events",["require","exports","module"],function(a,b,c){b.api={LOAD_PROGRESS:"loadProgress",PLAY_PROGRESS:"playProgress",PLAY:"play",PAUSE:"pause",FINISH:"finish",SEEK:"seek",READY:"ready",OPEN_SHARE_PANEL:"sharePanelOpened",CLICK_DOWNLOAD:"downloadClicked",CLICK_BUY:"buyClicked",ERROR:"error"},b.bridge={REMOVE_LISTENER:"removeEventListener",ADD_LISTENER:"addEventListener"}}),
define("lib/api/events-map",["require","exports","module","lib/api/events","tracking-events"],function(a,b,c){var d=a("lib/api/events").api,e=a("tracking-events"),f=c.exports={};f.audio={},f.audio[d.PLAY_PROGRESS]="audio:time",f.audio[d.PLAY]="audio:play",f.audio[d.PAUSE]="audio:pause",f.audio[d.FINISH]="audio:finish",f.audio[d.SEEK]="audio:seeked",f.ui={},f.ui[d.OPEN_SHARE_PANEL]=e.UI.SHARE_VIEW_OPENED,f.ui[d.CLICK_BUY]=e.UI.BUY_LINK_CLICKED,f.ui[d.CLICK_DOWNLOAD]=e.UI.DOWNLOAD_LINK_CLICKED}),
define("lib/model",["require","exports","module","_","lib/api-wrapper","lib/backbone","lib/connect","config","lib/endpoints","lib/resolve-path","lib/single","lib/url"],function(a,b,c){var d,e=a("_"),f=a("lib/api-wrapper"),g=a("lib/backbone"),h=a("lib/connect"),i=a("config"),j=a("lib/endpoints"),k=a("lib/resolve-path").resolveWithApiWeb,l=a("lib/single"),m=a("lib/url"),n=Array.prototype.slice;d=g.Model.extend({resource_type:null,lastFetchTime:null,getEndpointUrl:j.getEndpointUrl,_submodels:null,submodelMap:null,initialize:function(a,b){this._submodels=[],this.options=b,e.each(this.submodelMap,function(a,b){this.on("change:"+b,this.createSubmodel.bind(this,a,b))},this),this.setup.apply(this,arguments),e.each(this.submodelMap,function(a,b){this.get(b)&&this.createSubmodel(a,b)},this)},setup:$.noop,createSubmodel:function(a,b){this.addSubmodel(new a(this.get(b),{parse:!0}))},addSubmodel:function(){n.call(arguments).forEach(function(a){this._submodels.indexOf(a)===-1?this._submodels.push(a):a.release()}.bind(this))},getAttributesToBeSaved:function(){var a=this.toJSON(),b={};return b[f.toAPIResource(this.resource_type)]=a,b},baseUrl:function(){throw new Error("baseUrl should be defined for every model")},url:function(a){var b=this.getSecretToken(),c=e.result(this,a||"baseUrl");return b?m.modify(c,{query:{secret_token:b}}):c},getSecretToken:function(){return this.get("secret_token")},signedUrl:function(a){var b=this.get(a),c;return b?(c={scheme:"http",query:{client_id:i.get("client_id")}},h.isLoggedIn()&&(c.scheme="https",c.query.oauth_token=h.getAuthToken()),this.get("secret_token")&&(c.query.secret_token=this.get("secret_token")),m.modify(b,c)):null},toJSON:function(){var a=g.Model.prototype.toJSON.apply(this,arguments);return a._resource_id=this.resource_id,a._resource_type=this.resource_type,a},parse:function(a){var b;return typeof this.baseUrl=="string"&&(b=m.parse(this.baseUrl).query.secret_token),b||(b=this.extractSecretToken(a)),b&&(a.secret_token=b),a.permalink_url&&(a.permalink_url=a.permalink_url.replace(/^http:/,"https:").replace(/\/+$/,"")),a},extractSecretToken:$.noop,toString:function(){return this.resource_type?this.resource_type+" ("+(this.isNew()?"new":this.resource_id)+")"+": "+(this.attributes.permalink||this.attributes.title||this.attributes.name):Object.prototype.toString.call(this)},hasDataForView:function(a){return a.getRequiredAttributes(this).every(Object.prototype.hasOwnProperty,this.attributes)},updateResourceId:function(){var a=this.constructor.hashFn(this.attributes),b=this.resource_id;a&&(this.resource_id=a,this.constructor.instances.changeKey(b,a))},attrExists:function(a){var b=Object.prototype.hasOwnProperty;return e.isArray(a)?a.every(b,this.attributes):b.call(this.attributes,a)},getUrn:function(){if(this.urnPrefix&&this.id)return this.urnPrefix+":"+this.id},isPopulated:function(){return!!this.lastFetchTime}},{_resolve:function(a,b,c){var d=a.instances.find(c);return d?$.Deferred().resolve(d):k(b).then(function(b){return d=new a(b),d.release(),d})}}),c.exports=l.applyTo(d,{hashFn:function(a){return a&&a.id||null},onCleanup:function(a){a._submodels&&a._submodels.length&&(e.invoke(a._submodels,"release"),a._submodels.length=0)},prepareArgs:function(a,b){return b=b||{},a=a||{},b.parse&&(a=this.parse(a)),[a,b]},prepareInstance:function(a,b){return b=b||{},b.collection&&(this.lastFetchTime=Date.now()),e.isEmpty(a)||this.set(a),delete this.attributes.resource_id,this},getIncrementValue:function(a,b){var c=b&&b.collection;return c?c.constructor.instances.countFor(c.resource_id):1}})}),
define("models/sound",["require","exports","module","_","lib/endpoints","models/audible-interface","lib/mixins/batching-model","config","lib/mixins/has-image","lib/model","lib/widget-audio","models/user","lib/url"],function(a,b,c){function o(a){var b=$.Deferred();return p(a).fail(b.reject).then(q).done(b.resolve).fail(b.reject),b}function p(a){var b=$.Deferred(),c=new n({id:a});return c.getUserId()?b.resolve(c.getUserId()):c.fetch().done(function(){b.resolve(c.getUserId())}).fail(b.reject),b.always(c.release.bind(c)),b}function q(a){var b=new l({id:a}),c=$.Deferred();return b.getPlan()?c.resolve(b):b.fetch({saveRequest:!0}).done(c.resolve.bind(c,b)).fail(c.reject.bind(c,b)),c.always(b.release.bind(b)),c}function r(){var a=!this.isBlocked()&&this._streamsExist;a!==this._playable&&(this._playable=a,this.trigger("change:playable",this))}var d=a("_"),e=a("lib/endpoints"),f=a("models/audible-interface"),g=a("lib/mixins/batching-model"),h=a("config"),i=a("lib/mixins/has-image"),j=a("lib/model"),k=a("lib/widget-audio"),l=a("models/user"),m=a("lib/url"),n=c.exports=f.extend(g.withOptions({batchEndpoint:e.getEndpointUrl("trackBatch"),getBatchParams:function(a){var b=a.playlist;return{playlistId:b&&b.id,playlistSecretToken:b&&b.get("secret_token")}},skipBatching:function(a){return!a.collection}}),i,{resource_type:"sound",urnPrefix:"soundcloud:tracks",_streamsExist:!0,_playable:!0,audio:null,submodelMap:{user:l},playbackOptions:{},setup:function(){f.prototype.setup.apply(this,arguments),this.audio=k.createAudioFromSound(this),this.set("playable",!0),this.on("change:policy",r,this),r.call(this),d.proxy(this.audio,this,"toggle","seek","isPaused","isPlaying","isLoading","loadProgress"),["play","pause"].forEach(function(a){this[a]=function(b){this.playbackOptions=b||{},this.audio[a].call(this.audio,{userAction:this.playbackOptions.userAction})}},this)},currentTime:function(){return this.audio&&this.audio.currentTime()||0},parse:function(a){return f.prototype.parse.call(this,a),a.publisher_metadata=a.publisher_metadata||{},a},isExplicit:function(){var a=this.attributes;return!!a.publisher_metadata&&!!a.publisher_metadata.explicit},isEmbeddable:function(a){a=a||this.toJSON();if(!document&&!this.lastFetchTime)return!0;var b=m.parse(document.referrer),c=a.domain_lockings||[],e=a.embeddable_by;return e==="none"?!1:c.length?d.any(c,function(a){var c=b.host&&b.host.match(m.parse(a.domain).host);return c&&c.length}):!0},baseUrl:function(){var a=m.stringify({path:"/tracks/"+this.id,query:{secret_token:this.get("secret_token")}},h.get("public_api_host"));return this.getEndpointUrl("resolveWithAPIWeb",null,{url:a})},streamsUrl:function(){var a={secret_token:this.get("secret_token")};return this.getEndpointUrl("trackStreams",{id:this.id},a)},extractSecretToken:function(a){return m.parse(a.stream_url).query.secret_token},getSounds:function(){return[this]},getCurrentSound:function(){return this},duration:function(){return this.get("full_duration")||this.get("duration")},getMediaDuration:function(){return this.get("duration")},setHasStreamInfo:function(a){this._streamsExist!==a&&(this._streamsExist=a,r.call(this))},isPlayable:function(){return this._playable},isProcessing:function(){return this.get("state")!=="finished"},isEditing:function(){return!1},isShareable:function(){return this.get("embeddable_by")!=="none"&&!this.isPrivate()},isBlocked:function(){return this.get("policy")==="BLOCK"},isSnippetized:function(){return this.get("policy")==="SNIP"},areRelatedSoundsEnabled:function(){var a=this._relatedSoundsEnabledDefer,b;return a||(this._relatedSoundsEnabledDefer=a=$.Deferred(),this.isPrivate()?a.reject():(b=h.get("widgetParams").hide_related,o(this.id).done(function(c){b&&c.getPlan()===l.Plans.PRO_UNLIMITED?a.reject():a.resolve()}).fail(a.resolve))),a},getUserId:function(){return this.get("user_id")||null},getStreamProtocol:function(){var a=this;return a.audio&&a.audio.streamInfo&&a.audio.streamInfo.protocol||""},updateCommentCount:function(a){var b=this.get("comment_count");this.set({comment_count:b+(a?1:-1)})},setMonetizableTrack:function(a){a.hold(),this.addSubmodel(a),this._monetizableTrack=a},getMonetizableTrack:function(){return this._monetizableTrack},hasVisuals:function(){return!d.isEmpty(this.get("visuals"))}},{resolve:function(a,b,c){return j._resolve(this,[a,b,c],function(c){var d=c.get("user");return d&&c.get("permalink")===b&&d.permalink===a})},getUserBySoundId:o})}),
define("lib/mixins/observing",["require","exports","module","_","lib/backbone","lib/mixin"],function(a,b,c){var d=a("_"),e=a("lib/backbone"),f=a("lib/mixin"),g=c.exports=new f(d.extend({around:{set:function(a,b,c,d){var e=d&&d.silent,f,g;return e||(g=this.get(b)),f=a(b,c,d),!e&&g!==c&&this.trigger(b,{prev:g,current:c}),f},unset:function(a,b,c){var d=c&&c.silent,e,f;return d||(f=this.get(b)),e=a(b,c),!d&&f!==undefined&&this.trigger(b,{prev:f,current:undefined}),e}},before:{reset:function(a){(!a||!a.silent)&&this.each(function(a,b){this.trigger(b,{prev:this.get(b),current:undefined})},this)}}},e.Events))}),
define("config/client-ids",["require","exports","module"],function(a,b,c){c.exports={classic:{dev:"181fbe7e56ac80af29353323774890c3",staging:"8925a570bf9dc21c78991ddb5f4b2254",production:"cUa40O3Jg3Emvp6Tv4U6ymYYO50NUGpJ"},visual:{dev:"7582f2f46622ab908ba1d809f96ed037",staging:"3362fa8a84e2aff3385974f8adc7b38e",production:"a3e059563d7fd3372b49b37f00a00bcf"}}}),
define("lib/store",["require","exports","module","_"],function(a,b,c){var d=a("_"),e={};["each","forEach","map","find","detect","filter","select","reject","every","all","any","some","include","contains"].forEach(function(a){e[a]=function(){var b=[this._store];return b.push.apply(b,arguments),d[a].apply(d,b)}});var f=c.exports=Class.extend([e,{initialize:function(a){this._store={},this.length=0,this._final=!1,this.maxLength=a&&a.maxLength||!1,this.maxLength&&(this._keys=[])},maxLength:0,get:function(a){return this._store[a]},set:function(a,b){return this.has(a)?this.maxLength&&this._keys.splice(this._keys.indexOf(a),1):(++this.length,this.maxLength&&this.length>this.maxLength&&this.unset(this._keys[0])),this.maxLength&&this._keys.push(a),this._store[a]=b,this},unset:function(a){var b;return this.has(a)&&(--this.length,this._final?this._store[a]=b:(delete this._store[a],this.maxLength&&this._keys.splice(this._keys.indexOf(a),1))),this},reset:function(){return this._store={},this.maxLength&&(this._keys=[]),this._final=!1,this.length=0,this},has:function(a){return this._store.hasOwnProperty(a)},keys:function(){return Object.keys(this._store)},finalize:function(){this._final=!0}}])}),
define("views/buttons/cookie-policy.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".cookiePolicy{position:fixed;bottom:0;left:0;z-index:1000;padding:1px 3px;opacity:1;font-size:10px;border-top-right-radius:2px}.cookiePolicy__link{float:left}.cookiePolicy__link:focus{color:#000;text-decoration:underline;outline:none}.cookiePolicy__pline{display:none;position:absolute;right:3px;left:85px;text-align:right;cursor:default}.cookiePolicy.extended{right:0}.cookiePolicy.extended .cookiePolicy__pline{display:inline-block;margin-left:10px}.cookiePolicy.extended .cookiePolicy__link{margin-right:10px}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("views/buttons/cookie-policy.tmpl",["vendor/handlebars-runtime"],function(){return require("vendor/handlebars-runtime").template(function(a,b,c,d,e){function p(a,b){var c="",d;return c+=' <a href="#" class="cookiePolicy__pline sc-truncate sc-link-medium">',d=a.publisher_info,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"publisher_info",{hash:{}})),c+=o(d)+"</a>\n",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;g=b.publisher_info,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n<a href="https://soundcloud.com/pages/cookies" class="cookiePolicy__link sc-link-medium"> ',g={},h=b.cookie_policy_visible,g.visible=h,h=b.cookie_policy_a11y,g.screenreader=h,h=c.$a11y,j={},j.hash=g,g=h.call(b,j),f+=o(g)+"\n</a>\n",f})}),
define("lib/endpoints",["require","exports","module","_","lib/url","config/endpoints"],function(a,b,c){function g(a,b,c){var g=f[a];if(!g&&!1)throw new Error('Endpoint "'+a+'" is not defined in config/endpoints.js file.');return g.host+e.stringify({path:b?h(g.path,b):g.path,query:d.extend({},g.query,c)})}function h(a,b){return a.replace(/:([\w-]+)/g,function(a,c){return b[c]!=null?b[c]:""})}var d=a("_"),e=a("lib/url"),f=a("config/endpoints");c.exports={getEndpointUrl:g}}),
define("lib/utils",["require","exports","module"],function(a,b,c){function i(a,b,c){return(a||"").replace(c,function(a,c){var d=b[c];return typeof d=="string"||typeof d=="number"?d:a})}var d=/[&<>\"\']/g,e=function(a){return"&#"+a.charCodeAt(0)+";"},f=/(&(lt|gt|quot|apos|amp|#\d+);|.)/gi,g={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},h=function(a,b,c){return g[c]||(c?String.fromCharCode(c.substring(1)):b)};c.exports={unescapeHTML:function(a){return(a||"").replace(f,h)},escapeHTML:function(a){return(a||"").replace(d,e)},supplant:function(a,b){return i(a,b,/\{([^\{\}]*)\}/g)},replaceCSSVariables:function(a,b){return i(a,b,/\$([\w-]*)/g)}}}),
define("lib/cookies",["require","exports","module"],function(a,b,c){var d,e=window.location.hostname.replace(/.*\.(.+\..+)/,"$1"),f="."+e,g=864e5,h,i;d=c.exports={get:function(a){return i||(i={},window.document.cookie.split(/\s*;\s*/).forEach(function(a){var b=a.split("=");i[b[0]]=b[1]})),i[a]},set:function(a,b,c){window.document.cookie=[a+"="+b,c?"expires="+(new Date(Date.now()+c*g)).toGMTString():"","path=/","domain="+f].filter(Boolean).join(";"),h()},unset:function(a){d.set(a,"",-1),h()}},h=function(){i=null}}),
define("vendor/i18n/i18n",["require","exports","module","./lib/datetime","./lib/number","./locales/en","./locales/pt_BR","./locales/fr","./locales/es"],function(a,b,c){function m(a){this.phrases={},this.setLocale(a)}function n(){var a=o.call(this);this.number=new e(a),this.dateTime=new d(a,this.number)}function o(){return l[this.locale]||l[k]}function p(a,b){return b?a.replace(i,function(a,c,d,e){var f=b[c||d||e];return d?j(f):f}):a}function q(a,b){return l[a].pluralForm(b)}function r(a){return Array.isArray(a)?a[0]:a.toString()}function s(a){var b,c;for(var d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function t(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)a[e]===void 0&&(a[e]=d[e])}return a}function u(a){var b=a.dates,c=a.d3;return{decimal:a.delimiters.decimal,thousands:a.delimiters.thousands,grouping:c.grouping,currency:c.currency,dateTime:c.dateTime,date:c.date,time:c.time,periods:c.periods,days:b.weekdays,shortDays:b.shortWeekdays,months:b.months,shortMonths:b.monthsShort}}function v(a){var b=a.datePicker,c=a.dates;return{closeText:b.closeText,prevText:b.prevText,nextText:b.nextText,currentText:b.currentText,weekHeader:b.weekHeader,dateFormat:b.dateFormat,firstDay:b.firstDay,isRTL:b.isRTL,showMonthAfterYear:b.showMonthAfterYear,yearSuffix:b.yearSuffix,monthNames:c.months,monthNamesShort:c.monthsShort,dayNames:c.weekdays,dayNamesShort:c.shortWeekdays,dayNamesMin:c.minWeekdays}}var d=a("./lib/datetime"),e=a("./lib/number"),f="sclocale",g={};c.exports=m;var h="[a-zA-Z0-9_]+",i=new RegExp("\\[\\[\\[("+h+")\\]\\]\\]|"+"\\[\\[("+h+")\\]\\]|"+"(%d)","g"),j,k="en",l={en:a("./locales/en"),en_GB:a("./locales/en"),pt_BR:a("./locales/pt_BR"),fr:a("./locales/fr"),es:a("./locales/es")};m.prototype.getLocaleCookieName=function(){return f},m.prototype.setLocale=function(a){this.locale=l[a]?a:k,n.call(this)},m.prototype.setPhrases=function(a){this.phrases=a||{}},m.prototype.extend=function(a){s(this.phrases,a)},m.prototype.getLocaleDataFor=function(a){var b=o.call(this),c=g;switch(a){case"d3":return c.d3=c.d3||u(b);case"jquery.datepicker":return c["jquery.datepicker"]=c["jquery.datepicker"]||v(b);default:return b}},m.prototype.t=function(a,b,c,d){var e=(c?c+"::":"")+a,f=this.phrases[e]||a;return p.call(this,r(f),b)},m.prototype.tp=function(a,b,c,d,e,f){var g=(e?e+"::":"")+a,h=this.phrases[g],i=this.number.format(c);return h=h?h[q(this.locale,c)]:q("en",c)?b:a,p.call(this,r(h),t({"%d":i},d))},j=function(){function d(b){return a[b]||"&amp;"}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/[&<>"'`]/g,c=/[&<>"'`]/;return function(a){return!a&&a!==0?"":(a=""+a,c.test(a)?a.replace(b,d):a)}}()}),
define("config/supported-locales",["require","exports","module","_","config/locales/locale-fr.json","config/locales/locale-pt-br.json"],function(a,b,c){var d=a("_"),e={ar:"English (US)",de:"English (US)",en:"English (US)",en_GB:"English (US)",es:"English (US)",id:"English (US)",it:"English (US)",ja:"English (US)",ko:"English (US)",nl:"English (US)",pt_BR:"Português (Brasil)",th:"English (US)",ru:"English (US)",zh:"English (US)"},f=d.extend({},e,{fr:"Français"}),g={ar:{},de:{},en:{},en_GB:{},es:{},fr:a("config/locales/locale-fr.json"),id:{},it:{},ja:{},ko:{},nl:{},pt_BR:a("config/locales/locale-pt-br.json"),th:{},ru:{},zh:{}},h=d.keys(e),i=d.keys(f);c.exports={defaultLocale:"en",locales:g,publicLanguages:e,publicLanguageCodes:h,experimentalAndPublicLanguages:f,experimentalAndPublicLanguageCodes:i}}),
define("lib/helpers/dom-helper",["require","exports","module"],function(a,b,c){var d=c.exports={insertScript:function(a,b){var c=document.createElement("script"),e=document.getElementsByTagName("head")[0],f,g;c.async=!0,c.src=a,b=b||{},f=b.removeAfterLoad?e.removeChild.bind(e,c):b.onload,g=b.onerror,(f||g)&&d.onScriptLoad(c,f,g),e.appendChild(c)},onScriptLoad:function(a,b,c){b&&(a.addEventListener?a.addEventListener("load",b,!1):a.readyState&&(a.onreadystatechange=b)),c&&(a.onerror=c)}}}),
define("lib/mixins/persistent",["require","exports","module","_","lib/augment/augment-localStorage","lib/mixin","lib/support"],function(a,b,c){function m(a,b){return[h,a,b].join(i)}function n(a){var b=a.storage;if(b)try{return b.setItem(a.keyName,JSON.stringify(a._store)),!0}catch(c){return!1}}function o(a){var b;return a==="local"&&g.localStorage?b=window.localStorage:a==="session"&&g.sessionStorage?b=window.sessionStorage:b=e,b}function p(a){var b={},c=a.storage;return c&&(b=JSON.parse(c.getItem(a.keyName)||"{}")),b}function q(a){var b,c,e,f,g;g={dontPersist:!0};if(!a.key){d.each(d.values(k.local).concat(d.values(k.session)),function(a){a.reset(g)});return}j.lastIndex=0,b=j.exec(a.key),b&&(e=b[1],c=b[2],e&&c&&(f=k[e][c],f&&d.each(p(f),function(a,b){f.set(b,a,g)})))}function r(){if(!g.localStorage)return;var a=[],b=localStorage.length,c,d;for(c=0;c<b;c++)d=localStorage.key(c),d.indexOf(h+i)!==0&&a.push(d);a.forEach(function(a){localStorage.removeItem(a)})}var d=a("_"),e=a("lib/augment/augment-localStorage"),f=a("lib/mixin"),g=a("lib/support"),h="WIDGET",i="::",j=new RegExp("^"+h+i+"(\\S+?)"+i+"(\\S+)"),k={local:{},session:{}};r();var l=c.exports=new f({storage:null,keyName:null,type:null,namespace:null,around:{initialize:function(a,b,c){c=c||"local";if(k[c][b])return k[c][b];k[c][b]=this,a(),this.type=c,this.namespace=b,this.storage=o(c,b),this.keyName=m(c,b),this._store=p(this),this.length=d.keys(this._store).length}},after:{set:function(a,b,c){var d=!c||!c.dontPersist,e;d&&(e=n(this),e||this.unset(a))},unset:function(a,b){(!b||!b.dontPersist)&&n(this)},reset:function(a){(!a||!a.dontPersist)&&n(this)}},dispose:function(){this.storage.removeItem(this.keyName),this.reset({dontPersist:!0}),delete k[this.type][this.namespace]},write:function(){n(this)}});window.addEventListener("storage",q,!1)}),
define("lib/collection",["require","exports","module","lib/backbone","lib/endpoints","lib/single","lib/url","_"],function(a,b,c){var d,e=a("lib/backbone"),f=a("lib/endpoints"),g=a("lib/single"),h=a("lib/url"),i=a("_"),j={},k,l;d=e.Collection.extend({next_href:null,lastFetchTime:null,model:j,getEndpointUrl:f.getEndpointUrl,defaults:{offset:0,limit:5,secret_token:null},initialize:function(a,b){this.options=b=l(this.constructor,b||{}),this.setup(b)},setup:$.noop,_prepareModel:function(){var a=e.Collection.prototype._prepareModel.apply(this,arguments);return a&&a.hold(this._usageCount()-1),a},_removeReference:function(a){return a.release(this._usageCount()),e.Collection.prototype._removeReference.apply(this,arguments)},fetch:function(a){var b=this.url();return b?this._requests&&this._requests[b]||e.Collection.prototype.fetch.call(this,a).done(function(a){this.next_href=a.next_href||!1}.bind(this)):$.Deferred().done(a&&a.success).resolve({})},bulkFetch:function(a){var b=arguments[1],c=arguments[2],d,e;if(!b){this._requests=this._requests||{};if(this._requests.bulk)return this._requests.bulk;this._requests.bulk=b=$.Deferred(),b.always(function(){delete this._requests.bulk}.bind(this)),c=this.length,d=this.options.limit,this.next_href||(this.options.limit=a-this.length),b.always(function(){this.options.limit=d,k.call(this,{limit:d})}.bind(this))}return this.length<a&&this.url()?(this.lastFetchTime?e={add:!0}:e={},e.silent=!0,k.call(this,{limit:a-this.length}),this.fetch(e).done(function(){this.bulkFetch(a,b,c)}.bind(this)).fail(b.reject)):(c?this.rest(c).forEach(function(a){this.trigger("add",a,this)},this):this.trigger("reset",this,{}),b.resolve()),b},url:function(){if(this.next_href!==null)return this.next_href;var a=h.parse(i.result(this,"baseUrl"));return i.extend(a.query,{limit:this.options.limit,offset:this.options.offset,linked_partitioning:1,secret_token:this.getSecretToken()}),h.stringify(a)},getSecretToken:function(){return this.options.secret_token},parse:function(a){return a.collection},hasDataForView:function(){return!!this.lastFetchTime},isPopulated:function(){return!!this.lastFetchTime},isFullyPopulated:function(){return this.next_href===!1},setLimit:function(a){this.options.limit=a,this.next_href&&(this.next_href=h.modify(this.next_href,{query:{limit:a}}))},random:function(){return this.at(Math.floor(Math.random()*this.length))}}),d=c.exports=g.applyTo(d,{hashFn:function(a,b){return b&&b.resource_id||null},onHold:function(a,b,c){a.length&&a.at(0).hold&&a.invoke("hold",c)},onRelease:function(a){a.length&&a.at(0).release&&a.invoke("release")}}),l=function(a,b){return i.defaults(b,a.prototype.defaults),a===d?b:l(a.__super__.constructor,b)},k=function(a){if(this.next_href){var b=h.parse(this.next_href);i.extend(b.query,a),this.next_href=h.stringify(b)}}}),
define("lib/math",["require","exports","module"],function(a,b,c){var d=c.exports={sort:function(a){return a.sort(function(a,b){return a-b})},isInRange:function(a,b){return b=d.sort(b),a>=b[0]&&a<=b[1]},precise:function(a,b){return b=Math.pow(10,b||0),Math.round(a*b)/b},clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},randomRange:function(a,b){return Math.random()*(b-a)+a}}}),
define("lib/views/progress.css",["require","exports","module"],function(a,b,c){var d=c.exports=document.createElement("style"),e=".progress{pointer-events:none;position:fixed;z-index:100;top:0;left:0;width:100%;height:3px;-webkit-transform:translate3d(-100%,0,0);-ms-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);opacity:1;-webkit-transition:-webkit-transform .2s ease,opacity .6s linear;transition:transform .2s ease,opacity .6s linear}.progress.hidden{opacity:0}";d.styleSheet?d.styleSheet.cssText=e:d.appendChild(document.createTextNode(e)),e=null}),
define("lib/resolve-path",["require","exports","module","lib/endpoints","lib/url"],function(a,b,c){function f(a){return i(d.getEndpointUrl("resolveWithPublicAPI",null,{url:h(a)}))}function g(a){return i(d.getEndpointUrl("resolveWithAPIWeb",null,{url:h(a)}))}function h(a){return Array.isArray(a)&&(a=e.joinPath(a)),e.stringify({host:"https://soundcloud.com/",path:a})}function i(a){return $.ajax({url:a,dataType:"json"})}var d=a("lib/endpoints"),e=a("lib/url");c.exports={resolveWithApiWeb:g,resolveWithPublicApi:f}}),
define("config/resources",["require","exports","module"],function(a,b,c){c.exports={GROUP:"group",GROUP_SOUNDS:"group-sounds",PLAYLIST:"playlist",SOUND:"sound",USER:"user",USER_FAVORITES:"user-favorites",USER_SOUNDS:"user-sounds",USER_SPOTLIGHT:"user-spotlight"}}),
define("lib/helpers/environment-helper",["require","exports","module"],function(a,b,c){var d=c.exports={getFlashPlugin:function(){var a,b,c,d;if(typeof window.ActiveXObject!="undefined")try{d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d&&(a=d.GetVariable("$version"))}catch(e){}else navigator.plugins&&navigator.plugins.length>0&&(c="application/x-shockwave-flash",b=navigator.mimeTypes,b&&b[c]&&b[c].enabledPlugin&&b[c].enabledPlugin.description&&(a=b[c].enabledPlugin.description));return a},getFlashVersion:function(){var a=this.getFlashPlugin().match(/\d\S+/)[0].replace(/,/g,".").split(".");return[a[0],a[1]].join(".")},getOperatingSystem:function(){var a=navigator.appVersion;return a.indexOf("Win")!==-1?"Windows":a.indexOf("Mac")!==-1?"MacOS":a.indexOf("X11")!==-1?"UNIX":a.indexOf("Linux")!==-1?"Linux":"undefined-OS"},getBrowser:function(){var a=navigator.userAgent,b=a.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i),c=a.match(/version\/([\.\d]+)/i),d,e;return e=b&&c!==null?c[1]:b[2],d=b?[b[1],e]:[navigator.appName,navigator.appVersion],d.join()}}}),
define("lib/analytics",["require","exports","module","_","lib/support","lib/ad-manager","config","lib/event-bus","vendor/event-gateway/event-gateway","lib/futures","config/resources","lib/helpers/urn-helper","lib/lingua","vendor/includes/comscore","vendor/includes/google-analytics"],function(a,b,c){function q(a,b){var c=s(b)&&f.getCurrentAd(),e=b.playbackOptions,g=b.playlist,h=["user_id","duration","monetization_model","policy"],i=Math.round(b.currentTime());return j.all([!b.attrExists(h)&&b.fetch()].filter(Boolean)).then(function(){var f=d.extend(t(),{in_playlist:g?g.getUrn():null,playlist_position:g?g.getSoundIndex(b):null,id:b.id,trackOwnerId:b.getUserId(),track_length:b.getMediaDuration(),protocol:b.getStreamProtocol(),action:a,playheadPosition:i,trigger:e.userAction?"manual":"auto",policy:b.get("policy"),monetization_model:b.get("monetization_model"),checkpointInterval:e.checkpointInterval});return c&&d.extend(f,{ad_urn:c.get("audio").ad_urn,monetization_type:c.getMonetizationType(),monetized_urn:c.sound.getMonetizableTrack().getUrn(),policy:null,monetization_model:null}),f})}function r(a){var b=f.getCurrentAd(),c=f.getCurrentSound(),e;return e=a==="companion_display"?b.get("companion_display"):b.get("audio"),d.extend(t(),{impression_name:a,impression_object:c.getUrn(),ad_urn:e.ad_urn,monetization_type:b.getMonetizationType(),monetized_object:c.getMonetizableTrack().getUrn(),promoted_by:null,external_media:e.ad_visual||null})}function s(a){return f.getCurrentSound()===a}function t(){var a=g.get("widgetParams").visual,b=g.get("router").layoutArgs,c=b.resource_id,d=b.resource_type;return{page_name:u(d,a),page_urn:v(d,c)}}function u(a,b){var c="";switch(a){case k.SOUND:c="tracks";break;case k.PLAYLIST:c="playlists";break;case k.USER_SOUNDS:c="users:tracks";break;case k.USER_FAVORITES:c="users:likes";break;case k.USER_SPOTLIGHT:c="users:spotlight";break;case k.GROUP_SOUNDS:c="groups";break;default:c="error"}return(b?"visual:":"classic:")+c}function v(a,b){function d(a){return l.generate(a,b)}var c=null;switch(a){case k.SOUND:c=d("sound");break;case k.PLAYLIST:c=d("playlist");break;case k.USER_SOUNDS:case k.USER_FAVORITES:case k.USER_SPOTLIGHT:c=d("user");break;case k.GROUP_SOUNDS:c=d("group")}return c}var d=a("_"),e=a("lib/support"),f=a("lib/ad-manager"),g=a("config"),h=a("lib/event-bus"),i=a("vendor/event-gateway/event-gateway"),j=a("lib/futures"),k=a("config/resources"),l=a("lib/helpers/urn-helper"),m=a("lib/lingua"),n=a("vendor/includes/comscore"),o=a("vendor/includes/google-analytics"),p=c.exports={initialize:function(){d.invoke([o],"include");var a=g.get.bind(g),b=a("me").id,c=(window.location.search.match(/(?:\?|&)origin=(\w+)/)||[])[1];i.initialize({id:a("client_application_id"),appVersion:a("app_version"),trackingUrl:a("eventlogger_tracking_url"),user:b,origin:c,batchTimeout:e.sendBeacon?5e3:1e3}),b||h.on("connect:hasUserData",d.once(function(){i.setUser(a("me").id)}))},dispose:function(){i.flush(!0)},trackAudioEvent:function(a,b){i.audio(q(a,b))},trackAppLoad:function(a,b,c){i.appLoad(b,{level:a,latency:c})},trackPageView:function(a){n.include();var b=g.get("me").id||null,c=a.level,d=a.chapter,e={locale:m.getLocale()};i.pageview(b,c,d,e)},trackClick:function(a,b){var c=g.get("me").id||null,d=a.level,e=a.chapter;i.click(c,d,e,b)},trackClickV1:function(a){i.logEvent("click","1.16.0",d.extend(t(),a))},trackImpression:function(a){var b;if(d.isString(a))switch(a){case"companion_display":case"audio_ad_impression":b=r(a)}else d.isObject(a)&&(b=d.extend(t(),a));b&&i.impression(null,b)}}}),
define("lib/mixins/has-image",["require","exports","module","lib/mixin","config/resources"],function(a,b,c){var d=a("lib/mixin"),e=a("config/resources"),f=c.exports=new d({before:{initialize:function(){switch(this.resource_type){case e.USER:this.imageAttribute="avatar_url";break;case e.GROUP:case e.PLAYLIST:case e.SOUND:this.imageAttribute="artwork_url"}if(!this.imageAttribute&&!1)throw new Error("This resource_type is not allowed, you might want to add it?")}}})}),
define("lib/css",["require","exports","module","_","lib/browser"],function(a,b,c){var d=a("_"),e=a("lib/browser"),f=document.getElementsByTagName("head")[0],g=e.isIE9,h,i;g&&(h=document.createElement("style"),i=[]);var j=c.exports={insert:function(a,b){d.isArray(a)||(a=[a]),a.forEach(function(a){if(g){if(i.indexOf(a)>-1)return;i.push(a),h.innerText+=b?b(a.innerHTML):a.innerHTML,a=h}a.parentNode||(!g&&b&&(a.innerHTML=b(a.innerHTML)),f.appendChild(a))})}}}),
define("lib/views/mixins/stateful",["require","exports","module","_","lib/mixin"],function(a,b,c){var d=a("_"),e=a("lib/mixin"),f=c.exports=new e({states:null,_states:null,toggleState:function(a,b){var c,e;return this.disposed?this:(this.states||(this.states={}),this.states[a]||(this.states[a]=a),this._states=this._states||{},this._states[a]=this._states[a]||!1,b=typeof b!="undefined"?!!b:!this._states[a],this._states[a]===b?this:(this._states[a]=b,c=this.states[a],typeof c=="string"?(e=c,this.$el[b?"addClass":"removeClass"](e)):d.isFunction(c)?c.call(this,b):c&&c[b?"setup":"teardown"].call(this),this.trigger("state:"+a,b),this))},getState:function(a){return!!this._states&&!!this._states[a]}})}),
define("lib/template",["require","exports","module","vendor/handlebars-runtime","lib/subview-plugin","lib/template-helpers","_"],function(a,b,c){var d=a("vendor/handlebars-runtime"),e=a("lib/subview-plugin"),f=a("lib/template-helpers"),g=a("_");g.each(f,function(a,b){d.registerHelper(b,a)});var h=c.exports={render:function(a,b,c){var d=a(b||{}),e,f,h;return c?(g.isArray(c)?(e=c[0],f=c[1],h=document.createElement(e),f&&$(h).attr(f)):h=c,h.innerHTML=d,h):d},subviews:function(a){e.replacePlaceholders(a)}}}),
define("lib/customization",["require","exports","module","config","vendor/color/color"],function(a,b,c){function m(a){var b=a.hue(n(a));return a.diff(b.hex()).brightness<h&&b.darken(5),b}function n(a){var b=a.toHsl();return(b.h<=180?"-":"+")+(b.l>=25&&b.l<=75?"12":"24")}var d=a("config"),e=a("vendor/color/color"),f="#FFFFFF",g="#333333",h=20,i=10,j=15,k,l=c.exports={getColorParams:function(){if(!k){var a=e(d.get("widgetParams").color);k={mainColor:a.hex(),mainContrastColor:a.contrast(f,g).hex(),mainColorShade:m(a).hex(),mainColorDarker:a.darken(i).hex(),mainColorLighter:a.lighten(j).hex()}}return k}}}),
define("lib/mixin",["require","exports","module","vendor/remixin"],function(a,b,c){c.exports=a("vendor/remixin")}),
define("lib/single",["require","exports","module","_","backbone","lib/gc-store"],function(a,b,c){function k(a){return a?function(b){l(b),a.apply(b,arguments)}:l}function l(a){a.off&&a.off(),a.stopListening&&a.stopListening()}var d=a("_"),e=a("backbone"),f=a("lib/gc-store"),g=$.noop,h=0,i=6e4,j;c.exports={applyTo:function m(a,b){b=d.extend({neverRelease:!1,cleanupInstantly:!1,hashFn:function(){return null},prepareArgs:function(){return arguments},prepareInstance:function(){return this},getIncrementValue:function(){return 1},onHold:g,onRelease:g,onCleanup:null,GC_INTERVAL:i},b,a),delete b.prototype;var c,l=a.extend||e.Model.extend,n=b.neverRelease,o,p,q,r,s,t;return c=new f({autoCleanup:b.cleanupInstantly,onCleanup:k(b.onCleanup),onIncrement:b.onHold,onDecrement:b.onRelease}),n?q=r=s=g:(s=function(){c.cleanup(),p=c.length?setTimeout(s,b.GC_INTERVAL):null},q=function(a){c.increment(this.resource_id,a)},r=function(a){c.decrement(this.resource_id,a)}),t={hold:q,release:r,_usageCount:function(){return c.countFor(this.resource_id)},constructor:function(){var d=o.prepareArgs.apply(this,arguments),e=o.hashFn.apply(this,d)||"f-"+ ++h,f=o.neverRelease?1:o.getIncrementValue.apply(null,d),g=c.get(e);if(g)return this.constructor.neverRelease||g.hold(f),o.prepareInstance.apply(g,d),g;g=this,!p&&!o.cleanupInstantly&&(p=setTimeout(s,b.GC_INTERVAL)),c.set(e,g),g.constructor.neverRelease||g.hold(f-1),g.resource_id=e,j(a).apply(g,d),o.prepareInstance.apply(g,d)}},o=l.call(a,t,b),d.extend(o,{__constructor__:j(a),reset:function(){c.reset(),p&&(clearTimeout(p),p=null)},extend:function(b){var c,e;return b=b||{},d.isArray(b)&&(b=d.extend.apply(null,[{}].concat(b))),b.hasOwnProperty("constructor")||(b.constructor=j(a)),c=l.apply(o,arguments),c.extend=l,e=m(c,o),e.__super__&&(e.__super__=e.__super__.constructor.__super__),e},instances:function(){return c.add=function(a){var b=o.hashFn(a.attributes);a.resource_id=b,b&&this.set(b,a)},c}(),getNewInstance:function(){function d(){return j(a).apply(this,b)}var b=arguments,c;return d.prototype=o.prototype,c=new d,c}})}},j=function(a){return a.__constructor__||a}}),
define("models/audible-interface",["require","exports","module","_","config/resources","config","lib/play-manager","config/widget-params","vendor/embed/embed","lib/helpers/datetime-helper","lib/model"],function(a,b,c){var d=a("_"),e=a("config/resources"),f=a("config"),g=a("lib/play-manager"),h=a("config/widget-params"),i=a("vendor/embed/embed"),j=a("lib/helpers/datetime-helper"),k=a("lib/model"),l;l=function(){throw new Error("Abstract method should be implemented in subclass")};var m=c.exports=k.extend({isEmbeddable:l,isShareable:l,getCurrentSound:l,getSounds:l,initAudio:function(){var a=this.getCurrentSound();a&&a.audio.initAudio()},setup:function(){this.on("destroy",this.pause,this)},isNowPlaying:function(){return g.getCurrentSound()===this},isPrivate:function(){return this.get("sharing")==="private"},isPlaylist:function(){return this.resource_type===e.PLAYLIST},likesChanged:function(a){this.set({likes_count:Math.max(0,(this.get("likes_count")||0)+(a?1:-1))})},getEmbedCode:function(a){var b=this.attributes,c=d.clone(f.get("widgetParams"));return d.each(c,function(a,b){b in h&&a===h[b]&&delete c[b]}),a=a||{},a.params=c,i(b,a)},getShareURL:function(){return this.get("permalink_url")+(this.isPrivate()?"/"+this.get("secret_token"):"")},getDeeplinkURL:function(a){var b=/(\b(?:[0-5]?[0-9])(?::[0-5][0-9]){1,2}\b)/g;return d.isUndefined(a)?a=this.currentTime()!==0?this.timecode():"":a=a.match(b)?b.exec(a)[0]:"",a&&(a="#t="+a),this.get("permalink_url")+a},play:l,pause:l,seek:l,isPlaying:l,isProcessing:l,isEditing:l,loadProgress:l,currentTime:l,toggle:function(){this[this.isPlaying()?"pause":"play"]()},stop:function(){this.seek(0),this.pause()},isPaused:function(){return!this.isPlaying()},seekRelative:function(a){this.seek(this.currentTime()+a)},duration:function(){return this.get("duration")},progress:function(){return this.currentTime()/this.duration()},timecode:function(){return j.timecode(this.currentTime())},toggleMute:function(a){var b=this.getCurrentSound();b&&b.audio.toggleMute(a)},getVolume:function(){var a=this.getCurrentSound(),b;return a&&(b=a.audio.getVolume()),b},setVolume:function(a){var b=this.getCurrentSound();b&&b.audio.setVolume(a)}})}),
define("lib/mixins/batching-model",["require","exports","module","_","lib/mixin","lib/futures","lib/errors/unauthorized-viewer","lib/url"],function(a,b,c){function n(a){return a?h.stringify({query:a}):"default"}function o(a){return!this.id||a.jqAjax||a.saveRequest||a.batch===!1||this.get("sharing")==="private"}function p(a,b,c,d){this.batchEndpoint=a,this.batchParams=b,this.maxQueueSize=c,this.flushInterval=d,this.queue={},this.timer=null}function q(a,b){return $.ajax({url:a,type:"get",data:b,contentType:"application/json",processData:!0,timeout:3e3}).then(function(a,b,c){return{body:a,status:c.status,headers:{}}})}var d=a("_"),e=a("lib/mixin"),f=a("lib/futures"),g=a("lib/errors/unauthorized-viewer"),h=a("lib/url"),i=50,j=50,k=function(){return null},l=function(){return!1},m=c.exports=new e({applyTo:function(a,b){var c=b.batchEndpoint,d=b.maxQueueSize||j,e=b.flushInterval||i,f=b.getBatchParams||k,g=b.skipBatching||l,h={};this.around(a,{fetch:function(a,b){b||(b={});if(g(this)||o.call(this,b))return a(b);this._requests||(this._requests={});if(!this._requests[this.id]){var i=f(this)||null,j=n(i),k=h[j]||(h[j]=new p(c,i,d,e));this._requests[this.id]=k.add(this,b)}return this._requests[this.id]}})}});p.prototype={getIds:function(){var a=d.reduce(this.queue,function(a,b,c){return b.deferred.state()==="pending"&&(a[c]=b),a},{});return Object.keys(a).sort()},add:function(a,b){var c=this.queue[a.id]=this.queue[a.id]||{callsigs:[],deferred:f.defer()};return c.callsigs.push({model:a,options:b}),this.timer||(this.timer=window.setTimeout(this.flush.bind(this),this.flushInterval)),Object.keys(this.queue).length===this.maxQueueSize&&this.flush(),c.deferred},flush:function(){var a=this.getIds(),b=this.queue;window.clearTimeout(this.timer),this.timer=null,this.queue={};if(a.length<1)return;q(this.batchEndpoint,d.extend({ids:a.join(",")},this.batchParams)).then(function(c){var e=c.body,f=d.map(d.pluck(e,"id"),String),h=Date.now();e.forEach(function(a){var c=a.id,d=b[c];d&&(d.callsigs.forEach(function(b){var c=b.model;c.lastFetchTime=h,c.set(c.parse(a),b.options)}),d.deferred.resolve())}),d.difference(a,f).forEach(function(a){var c=b[a];c&&c.callsigs.forEach(function(a){a.model.trigger("error",a.model,new g,a.options)})}),d.each(b,function(a){a.deferred.reject()})})}}}),
define("lib/widget-audio",["require","exports","module","_","lib/audiomanager","lib/browser","lib/event-bus","vendor/event-gateway/event-gateway","lib/global-xhr-handlers","vendor/scaudio/scaudio"],function(a,b,c){function m(a){j.setAudioManagerOnce(e);var b=new j({soundId:a.id,duration:a.getMediaDuration.bind(a),streamUrlsEndpoint:a.streamsUrl.bind(a),asyncFetch:!f.isMobile,protocols:p(),eventLogger:h,ajax:s,debug:!1});return b._progressEvents=k.slice(),b.on("all",n.bind(b,a),this),b}function n(a,b,c){var d=o.call(this,b,a);d.forEach(function(b){var d={sound:a,model:a,controller:this.controller,args:c};g.trigger("audio:"+b,d),a.trigger(b,d)},this);switch(b){case l.STREAMS:case l.NO_STREAMS:a.setHasStreamInfo(!!this.streamInfo);break;case l.NO_PROTOCOL:case l.FLASH_NOT_LOADED:case l.AUDIO_ERROR:a.setHasStreamInfo(!1);break;case l.REGISTERED:a.set("playback_count",a.get("playback_count")+1)}}function o(a,b){var c="";switch(a){case l.PLAY:c="play-intent";break;case l.PLAY_START:c="play";break;case l.PAUSE:c="pause";break;case l.FINISH:c="finish";break;case l.SEEKED:c="seeked";break;case l.FLASH_BLOCK:c="flash-block";break;case l.FLASH_UNBLOCK:c="flash-unblock";break;case l.TIME:c="time",this._progressEvents.length&&b.progress()>=this._progressEvents[0].value&&(c+=" "+this._progressEvents.shift().name)}return c?c.split(" "):[]}function p(){var a=[j.Protocols.HLS,j.Protocols.RTMP,j.Protocols.HTTP];return q()&&(a=d.without(a,j.Protocols.RTMP)),a}function q(){var a=(window.location.search.match(/(?:\?|&)origin=(\w+)/)||[])[1];return a==="twitter"}function s(a){return $.ajax(d.extend({},a,r()))}var d=a("_"),e=a("lib/audiomanager"),f=a("lib/browser"),g=a("lib/event-bus"),h=a("vendor/event-gateway/event-gateway"),i=a("lib/global-xhr-handlers"),j=a("vendor/scaudio/scaudio"),k=[{name:"progress-10",value:.1},{name:"progress-95",value:.95}],l=j.Events;c.exports={createAudioFromSound:m};var r=d.memoize(function(){return{statusCode:Object.keys(i).reduce(function(a,b){a[b]=d.noop},{})}})}),
define("vendor/handlebars-runtime",["require","exports","module"],function(a,b,c){var d={};c.exports=d,d.VERSION="1.0.beta.5",d.helpers={},d.partials={},d.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},d.registerPartial=function(a,b){this.partials[a]=b},d.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")});var e=Object.prototype.toString,f="[object Function]";d.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,g="",h=e.call(a);h===f&&(a=a.call(this));if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(h==="[object Array]"){if(a.length>0)for(var i=0,j=a.length;i<j;i++)g+=d(a[i]);else g=c(this);return g}return d(a)}),d.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e+=c(a[f]);else e=d(this);return e}),d.registerHelper("if",function(a,b){var c=e.call(a);return c===f&&(a=a.call(this)),!a||d.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),d.registerHelper("unless",function(a,b){var c=b.fn,e=b.inverse;return b.fn=e,b.inverse=c,d.helpers["if"].call(this,a,b)}),d.registerHelper("with",function(a,b){return b.fn(a)}),d.registerHelper("log",function(a){d.log(a)}),d.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},d.Exception.prototype=new Error,d.SafeString=function(a){this.string=a},d.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,e=function(b){return a[b]||"&amp;"};d.Utils={escapeExpression:function(a){return a instanceof d.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,e):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),d.VM={template:function(a){var b={escapeExpression:d.Utils.escapeExpression,invokePartial:d.VM.invokePartial,programs:[],program:function(a,b,c){var e=this.programs[a];return c?d.VM.program(b,c):e?e:(e=this.programs[a]=d.VM.program(b),e)},programWithDepth:d.VM.programWithDepth,noop:d.VM.noop};return function(c,e){return e=e||{},a.call(b,d,c,e.helpers,e.partials,e.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,e,f,g){var h={helpers:e,partials:f,data:g};if(a===undefined)throw new d.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,h);if(!d.compile)throw new d.Exception("The partial "+b+" could not be compiled when running in runtime-only mode");return f[b]=d.compile(a),f[b](c,h)}},d.template=d.VM.template}),
define("config/endpoints",["require","exports","module","config"],function(a,b,c){var d=a("config"),e=d.get("api_web_host"),f=d.get("public_api_host");c.exports={user:{host:e,path:"users/:urn"},playlist:{host:e,path:"playlists/:id",query:{representation:"full"}},track:{host:e,path:"tracks/:urn"},trackBatch:{host:e,path:"tracks"},relatedTracks:{host:e,path:"tracks/:id/related"},spotlightItems:{host:e,path:"users/:id/spotlight"},userLikes:{host:e,path:"users/:id/likes"},assignments:{host:e,path:"assignments/"},userStreamItems:{host:e,path:"stream/users/:id"},userTracks:{host:e,path:"users/:id/tracks"},audioAd:{host:e,path:"audio-ad"},resolveWithAPIWeb:{host:e,path:"resolve",query:{url:null}},trackStreams:{host:f,path:"i1/tracks/:id/streams"},group:{host:f,path:"groups/:id"},groupTracks:{host:f,path:"groups/:id/tracks"},comment:{host:f,path:"comments/:id"},myFollowers:{host:f,path:"me/followers"},myFollowings:{host:f,path:"me/followings"},userFollowers:{host:f,path:"users/:id/followers"},myGroups:{host:f,path:"me/groups"},myTrackLikes:{host:f,path:"e1/me/track_likes/"},commentHeads:{host:f,path:"app/widget/tracks/:id/comments",query:{filter_replies:1}},resolveWithPublicAPI:{host:f,path:"resolve",query:{url:null,"_status_code_map[302]":200,_status_format:"json"}}}}),
define("vendor/i18n/lib/datetime",["require","exports","module"],function(a,b,c){function j(a,b){function j(b,c,d){if(b instanceof Date){d=d||Date.now();var e=d-b,f=e>0,g,i=null,j,k,l=a.relativeTime;c=c&&parseInt(c,10)||1e3,e=Math.abs(e);if(e<=c)return f?l.justNow:l.rightNow;for(g in h)if(h.hasOwnProperty(g)){if(e<h[g])break;i=g,e/=h[g]}return e=Math.floor(e),j=f?l.past:l.future,k=l[i](e),j.replace(/%s/i,k)}throw new Error("toRelativeTime method expects first argument to be Date")}function r(b,c){var d,e,f,g,h,i,k=a.dates;if(b instanceof Date)return c==="relative"?j(b):(d=b.getDate(),e=b.getDay(),f=b.getMonth(),g=b.getFullYear(),h=s(b.getMinutes()),i=[["YYYY",g],["MMMM",k.months[f]],["DDDD",k.weekdays[e]],["MMM",k.monthsShort[f]],["DD",d],["MM",f+1],["HH",b.getHours()],["mm",h]],i.reduce(function(a,b){return a.replace(new RegExp(b[0],"g"),b[1])},t(c)));throw new Error("format method expects first argument to be Date")}function t(b){var c;switch(b){case"iso":return"YYYY-MM-DD";case"readable":c="readable";break;case"readable_time":c="readableTime";break;case"readable_abbreviated":c="readableAbbreviated";break;case"readable_with_weekday":c="readableWithWeekday";break;default:c="default"}return a.dateFormats[c]}function u(a){var b,d;return b=typeof a=="number"?new Date(a):k(a),d=b-Date.now(),Math.abs(d)>7*g?!1:(c=d,!0)}function v(){return Date.now()+c}function w(b,c){if(isNaN(b))return b;var g=[],h=Math.floor(b/f),i=Math.floor(b/e%60),j=Math.floor(b/d%60),k=a.relativeTime;return c&&c.inWords?(h>0&&g.push(k.hour(h)),i>0&&g.push(k.min(i)),(j>0||i===0&&h===0)&&g.push(k.sec(j)),g.join(" ")):(h>0&&g.push(h),c&&c.minimal&&h===0&&i===0?g.push(""):g.push(i<10&&h>0?"0"+i:i),g.push(j<10?"0"+j:j),g.join(":"))}function x(a){return b.zeroPad(a.getHours(),2)+":"+b.zeroPad(a.getMinutes(),2)}var c=0;return{time:i,toRelativeTime:j,format:r,fromString:k,setServerTime:u,nowAtServer:v,timecode:w,stringToTime:l,convert:m,floorTo30Minutes:n,parseTime:o,formatTime:x,getTimezoneOffset:p,getBounds:q}}function k(a){return new Date(Date.parse(a)||a)}function l(a){var b=/^\d+(\.\d+)?$/g,c=/^(?:npt:)?(?:(?:(\d+):)?(\d\d?):)?(\d\d?)(\.\d+)?$/,d=/^(?:(\d\d?)[hH])?(?:(\d\d?)[mM])?(\d\d?)[sS]$/,e;return b.test(a)?parseFloat(a)*1e3:(e=c.exec(a)||d.exec(a),e?(3600*(parseInt(e[1],10)||0)+60*(parseInt(e[2],10)||0)+parseInt(e[3],10)+(parseFloat(e[4])||0))*1e3:0)}function m(a,b,c){c=c||"s";var d="smh",e=d.indexOf(b),f=d.indexOf(c);if(e===-1||f===-1)throw new Error('Units must be expressed as either "h", "m" or "s"');return Math.round(Math.pow(60,f-e)*a)}function n(a){return a=new Date(a),a.setMinutes(a.getMinutes()-a.getMinutes()%30),a}function o(a){var b=a.match(/^\s*(\d{1,2})\s*(?::\s*(\d{1,2}))?\s*(?:(a|p)m?)?\s*$/i),c,d,e;if(!b)return;c=b[1]&&parseInt(b[1],10),d=b[2]&&parseInt(b[2],10),e=b[3]&&b[3].toLowerCase();if(c>23||d>59)return;if(e)if(e==="p"){if(c<12)c+=12;else if(c>13)return}else if(e==="a")if(c===12)c=0;else if(c>12)return;return d||(d=0),[c,d]}function p(){var a=new Date(2009,0,1,6,0,0),b=new Date(2009,6,1,6,0,0),c;return c=a.getUTCHours()>b.getUTCHours()?a.getTimezoneOffset():b.getTimezoneOffset(),c}function q(a){if(a.offset==null)return{};var b=new Date;r(b,a.resolution);var c=+(new Date(+b+a.offset*i[a.resolution])),d=+(new Date(c+(a.duration-1)*i[a.resolution]));return{from:c,to:d}}function r(a,b){switch(b){case"day":a.setUTCHours(0,0,0,0);break;case"hour":a.setUTCMinutes(0,0,0)}}function s(a){return("0"+a).substr(-2)}c.exports=j;var d=1e3,e=6e4,f=60*e,g=24*f,h={sec:1e3,min:60,hour:60,day:24,month:30,year:12},i={minute:e,hour:f,day:g}}),
define("vendor/i18n/lib/number",["require","exports","module"],function(a,b,c){function d(a){return{round:e,format:function(b,c){if(b===""||b==null||isNaN(b)||Math.abs(b)===Infinity)return"";b=parseFloat(b);var d=c&&c.precision||0,f=a.delimiters;return d=Math.max(Math.min(d,20),0),b=e(b,d,c&&c.roundingFn),(""+b).split(".").map(function(a,b){return b===0?a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+f.thousands):a}).join(f.decimal)},zeroPad:function(a,b){if(a==null)return a;a+="";var c=b-a.length;return c>0&&(a=(new Array(c+1)).join("0")+a),a}}}function e(a,b,c){c=c||Math.round;var d=Math.pow(10,b||0);return c(a*d)/d}c.exports=d}),
define("vendor/i18n/locales/en",["require","exports","module"],function(a,b,c){function e(a,b){return function(b){return a[d.pluralForm(b)].replace(/%d/i,b)}}var d=c.exports={delimiters:{thousands:",",decimal:"."},relativeTime:{justNow:"Just now",rightNow:"Right now",future:"in %s",past:"%s",sec:e(["1 second","%d seconds"]),min:e(["1 minute","%d minutes"]),hour:e(["1 hour","%d hours"]),day:e(["1 day","%d days"]),month:e(["1 month","%d months"]),year:e(["1 year","%d years"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortWeekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minWeekdays:["Su","Mo","Tu","We","Th","Fr","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(a){return a!==1?1:0}}}),
define("vendor/i18n/locales/pt_BR",["require","exports","module"],function(a,b,c){function e(a,b){return function(b){return a[d.pluralForm(b)].replace(/%d/i,b)}}var d=c.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Agora a pouco",rightNow:"Agora a pouco",future:"em %s",past:"%s",sec:e(["1 segundo","%d segundos"]),min:e(["1 minuto","%d minutos"]),hour:e(["1 hora","%d horas"]),day:e(["1 dia","%d dias"]),month:e(["1 mês","%d meses"]),year:e(["1 ano","%d anos"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"MMM DD, YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekdays:["Domingo","Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sábado"],shortWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],minWeekdays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fechar",prevText:"Anterior",nextText:"Próximo",currentText:"Hoje",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(a){return a!==1?1:0}}}),
define("vendor/i18n/locales/fr",["require","exports","module"],function(a,b,c){function e(a,b){return function(b){return a[d.pluralForm(b)].replace(/%d/i,b)}}var d=c.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Récemment",rightNow:"Maintenant",future:"dans %s",past:"%s",sec:e(["1 seconde","%d secondes"]),min:e(["1 minute","%d minutes"]),hour:e(["1 heure","%d heures"]),day:e(["1 jour","%d jours"]),month:e(["1 mois","%d mois"]),year:e(["1 an","%d ans"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthsShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],weekdays:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortWeekdays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],minWeekdays:["Di","Lu","Ma","Me","Je","Ve","Sa"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(a){return a>1?1:0}}}),
define("vendor/i18n/locales/es",["require","exports","module"],function(a,b,c){function e(a,b){return function(b){return a[d.pluralForm(b)].replace(/%d/i,b)}}var d=c.exports={delimiters:{thousands:".",decimal:","},relativeTime:{justNow:"Ahora mismo",rightNow:"Ahora mismo",future:"dans %s",past:"%s",sec:e(["1 segundo","%d segundos"]),min:e(["1 minuto","%d minutos"]),hour:e(["1 hora","%d horas"]),day:e(["1 día","%d días"]),month:e(["1 mes","%d meses"]),year:e(["1 año","%d años"])},dateFormats:{readable:"DD MMMM YYYY",readableTime:"DD MMMM YYYY HH:mm",readableAbbreviated:"DD MMM YYYY",readableWithWeekday:"DDDD, DD MMMM YYYY","default":"DD/MM/YYYY"},dates:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdays:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],shortWeekdays:["Dom.","Lun.","Mar.","Mié.","Jue.","Vie.","Sáb."],minWeekdays:["Do","Lu","Ma","Mi","Ju","Vi","Sá"]},d3:{grouping:[3],currency:["$",""],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"]},datePicker:{closeText:"Cerrar",prevText:"Ant",nextText:"Sig",currentText:"Hoy",weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},pluralForm:function(a){return a!==1?1:0}}}),
define("config/locales/locale-fr.json",[],{"Oops, we couldn’t find that profile.":"Oups, ce profil est introuvable","Oops, we couldn’t find that group.":"Oups, ce groupe est introuvable.","Oops, we couldn’t find that track.":"Oups, ce titre est introuvable.","Oops, we couldn’t find that playlist.":"Oups, cette playlist est introuvable.",'You need Adobe Flash Player to play sounds. <a href="http://get.adobe.com/flashplayer" target="_blank">Install Flash</a> and reload the page.':'Adobe Flash Player est nécessaire pour écouter des titres. <a href="http://get.adobe.com/flashplayer" target="_blank">Installez Flash</a> et réactualisez la page.',"This playlist is empty.":"Cette playlist est vide.","The owner of this track has not made it available for streaming in your location.":"Le propriétaire de ce titre ne l'a pas rendu disponible à la diffusion là où vous vous trouvez.",'You have not provided a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.':"L'URL SoundCloud fournie n'est pas valide. <a href=\"https://soundcloud.com/pages/embed\">En savoir plus</a> sur l'utilisation des lecteurs SoundCloud.","Play on SoundCloud":"Écouter sur SoundCloud",Retry:"Réessayer",'This playlist can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>':'Impossible d\'écouter cette playlist hors de SoundCloud <br><a href="[[url]]">Écouter sur SoundCloud</a>',"This playlist can’t be played outside of SoundCloud":"Impossible d'écouter cette playlist hors de SoundCloud",'This track can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>':'Impossible d\'écouter ce titre hors de SoundCloud <br><a href="[[url]]">Écouter sur SoundCloud</a>',"This track can’t be played outside of SoundCloud":"Impossible d'écouter ce titre hors de SoundCloud",Advertisement:"Publicité","Why Ads?":"Pourquoi des publicités ?",'Skip in <span class="skipAd__remaining">[[secondsremaining]]</span>':'Passer dans <span class="skipAd__remaining">[[secondsremaining]]</span>','Your track will start in <span class="skipAd__remaining">[[secondsremaining]]</span>':'Votre titre démarrera dans <span class="skipAd__remaining">[[secondsremaining]]</span>','Track starts in <span class="skipAd__remaining">[[secondsremaining]]</span>':'La lecture de votre titre commencera dans <span class="skipAd__remaining">[[secondsremaining]]</span>',"Cookie policy":"Politique d'utilisation des cookies","SoundCloud cookie policy":"Politique d'utilisation des cookies sur SoundCloud",Download:"Télécharger",Join:"Adhérer",Joined:"Adhéré","Hide share options":"Masquer les options",Share:"Partager","Leave a comment at [[timecode]]":"Laisser un commentaire à [[timecode]]","Click to reply to [[username]]":"Cliquez pour répondre à [[username]]","Sorry, something went wrong.":"Nous sommes désolés, un problème est survenu.","Buy all":"Acheter tout","Liked tracks of [[[username]]]":"Titres aimés par [[[username]]]","Spotlight tracks of [[[username]]]":"Titres épingles de [[[username]]]","Latest tracks by [[[username]]]":"Derniers titres de [[[username]]]",'Tracks from the <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> group':'Titres du groupe <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> ',"Visit [[username]]’s profile":"Consulter le profil de [[username]]","Go to this playlist’s page":"Accéder à la page de cette playlist",'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]’s profile">[[known_follower_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 abonné</a> dont<a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Consulter le profil de [[known_follower_name]]’s profile">[[known_follower_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] abonnés</a> dont<a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Consulter le profil de [[known_follower_name]]">[[known_follower_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 abonné</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] abonnés</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]’s profile">[[known_member_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 abonné</a> dont<a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Consulter le profil de [[known_member_name]]">[[known_member_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] abonnés</a> dont<a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Consulter le profil de [[known_member_name]]">[[known_member_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">[[nombre]] membre</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] membres</a>'],"[[title]] on SoundCloud":"[[title]] sur SoundCloud","Share to [[socialnetwork]]":"Partager avec [[socialnetwork]]","[[title]] by [[username]]":"[[title]] par [[username]]","Liked tracks of [[username]]":"Titres aimés par [[username]]","Latest tracks by [[username]]":"Titres les plus récents par [[username]]","Tracks from [[group]]":"Titres de [[group]]",Embed:"Embarquer",Link:"Lien","Open on SoundCloud":"Ouvrir sur SoundCloud","Player controls":"Contrôles du lecteur","Hear more tracks like this":"Écouter plus de titres comme celui-ci",Play:"Écouter",Pause:"Mettre en pause",'Play more tracks by <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Écouter plus de titres de <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play another track by <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Écouter un autre titre de <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play more tracks like <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Écouter plus de titres comme <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play another track like <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Écouter un autre titre comme <a class="sc-link-white" href="[[link]]">[[text]]</a>',Preview:"Aperçu","Play another track":"Écouter un autre titre",track:["titre","titres"],"1 play":["1 écoute","[[number]] écoutes"],"View track":"Voir le titre","Try it free for 30 days":"Essai gratuit pendant 30 jours","Hear full track":"Écouter le titre en entier","Explore more music & audio like [[[title]]] on SoundCloud.":"Explorez plus de musique comme [[[title]]] sur SoundCloud.","Get in on Google Play":"Téléchargez l'application sur Google Play","Download on the App Store":"Télécharger dans l’App Store","Upgrade to SoundCloud Go":"Passez à SoundCloud Go","Get our expanded catalog, with offline listening and no ads.":"Bénéficiez de notre catalogue étendu avec l'écoute hors ligne et sans publicités","Hear more on<br/>SoundCloud":"Découvrez plus<br/>sur SoundCloud","Back to track in [[[seconds]]]":"Retour au titre dans [[[seconds]]]","Liked tracks":"Titres aimés","Featured tracks":"Titres en vogue","Latest tracks":"Titres récents","1 track":["%d titre","%d titres"],"1 follower":["%d abonné","%d abonnés"],"We're still processing this track or playlist.":"Ce titre ou cette playlist est encore en cours de traitement.","button::Buy all":"Acheter tout","button::Buy":"Acheter","button::Follow back":"Suivre aussi","button::Following":"Abonné(e)","button::Follow":"Suivre","button::Like":"J'aime","button::Liked":"Vous aimez","sound::This track is not available in your country.":"Ce titre n'est pas disponible dans votre pays.","sound::Play related tracks":"Écouter des titres similaires","sound::Not available in your country":"Non disponible dans votre pays"}),
define("config/locales/locale-pt-br.json",[],{"Oops, we couldn’t find that profile.":"Ops, não foi possível encontrar esse perfil.","Oops, we couldn’t find that group.":"Ops, não foi possível encontrar esse grupo.","Oops, we couldn’t find that track.":"Ops, não foi possível encontrar esta faixa.","Oops, we couldn’t find that playlist.":"Ops, não foi possível encontrar essa playlist.",'You need Adobe Flash Player to play sounds. <a href="http://get.adobe.com/flashplayer" target="_blank">Install Flash</a> and reload the page.':'Você precisa do Adobe Flash Player para reproduzir sons. <a href="http://get.adobe.com/flashplayer" target="_blank">Instale o Flash</a> e recarregue a página.',"This playlist is empty.":"Esta playlist está vazia.","The owner of this track has not made it available for streaming in your location.":"O dono desta faixa não a disponibilizou para streaming em sua localização.",'You have not provided a valid SoundCloud URL. <a href="https://soundcloud.com/pages/embed">Learn more</a> about using SoundCloud players.':'Você não forneceu um URL válido da SoundCloud. <a href="https://soundcloud.com/pages/embed">Saiba mais</a> sobre como usar os players da SoundCloud.',"Play on SoundCloud":"Reproduzir na SoundCloud",Retry:"Tentar novamente",'This playlist can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>':'Esta playlist não pode ser reproduzida fora da SoundCloud <br><a href="[[url]]">Reproduza na SoundCloud</a>',"This playlist can’t be played outside of SoundCloud":"Esta playlist não pode ser reproduzida fora da SoundCloud",'This track can’t be played outside of SoundCloud <br><a href="[[url]]">Play on SoundCloud</a>':'Esta faixa não pode ser reproduzida fora da SoundCloud <br><a href="[[url]]">Reproduzir na SoundCloud</a>',"This track can’t be played outside of SoundCloud":"Esta faixa não pode ser reproduzida fora da SoundCloud",Advertisement:"Anúncio","Why Ads?":"Por que anúncios?",'Skip in <span class="skipAd__remaining">[[secondsremaining]]</span>':'Pular em <span class="skipAd__remaining">[[secondsremaining]]</span>','Your track will start in <span class="skipAd__remaining">[[secondsremaining]]</span>':'Sua faixa vai começar em <span class="skipAd__remaining">[[secondsremaining]]</span>','Track starts in <span class="skipAd__remaining">[[secondsremaining]]</span>':'A faixa começa em <span class="skipAd__remaining">[[secondsremaining]]</span>',"Cookie policy":"Política de Cookies","SoundCloud cookie policy":"Política de Cookies da SoundCloud",Download:"Baixar",Join:"Participar",Joined:"Cadastrado","Hide share options":"Ocultar opções de compartilhamento",Share:"Compartilhar","Leave a comment at [[timecode]]":"Deixar um comentário às [[timecode]]","Click to reply to [[username]]":"Clicar para responder a [[username]]","Sorry, something went wrong.":"Ocorreu um erro.","Buy all":"Comprar tudo","Liked tracks of [[[username]]]":"Curtiu as faixas de [[[username]]]","Spotlight tracks of [[[username]]]":"Faixas em destaque de [[[username]]]","Latest tracks by [[[username]]]":"Faixas mais recentes de [[[username]]]",'Tracks from the <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a> group':'Faixas do grupo <a class="sc-link-dark multiSoundDetails__link" href="[[link]]">[[title]]</a>',"Visit [[username]]’s profile":"Visite o perfil de [[username]]","Go to this playlist’s page":"Ir para a página desta playlist",'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a> including <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visit [[known_follower_name]]’s profile">[[known_follower_name]]</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 seguidor</a> incluindo <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visite o perfil de [[known_follower_name]]">[[known_follower_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] seguidores</a> incluindo <a class="sc-link-dark" href="[[known_follower_permalink_url]]" title="Visite o perfil de [[known_follower_name]]">[[known_follower_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/followers">1 follower</a>':['<a class="sc-link-dark" href="[[permalink_url]]/followers">1 seguidor</a>','<a class="sc-link-dark" href="[[permalink_url]]/followers">[[number]] seguidores</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a> including <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visit [[known_member_name]]’s profile">[[known_member_name]]</a>':['<a class="sc-link-dark" href=”[[permalink_url]]/members">1 membro</a> incluindo <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visite o perfil de [[known_member_name]]">[[known_member_name]]</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] seguidores</a> incluindo <a class="sc-link-dark" href="[[known_member_permalink_url]]" title="Visite o perfil de [[known_member_name]]">[[known_member_name]]</a>'],'<a class="sc-link-dark" href="[[permalink_url]]/members">1 member</a>':['<a class="sc-link-dark" href="[[permalink_url]]/members">1 membro</a>','<a class="sc-link-dark" href="[[permalink_url]]/members">[[number]] membros</a>'],"[[title]] on SoundCloud":"[[Título]] na SoundCloud","Pin it":"Fixar","Share to [[socialnetwork]]":"Compartilhar no [[socialnetwork]]","[[title]] by [[username]]":"[[title]] de [[username]]","Liked tracks of [[username]]":"Faixas curtidas de [[username]]","Latest tracks by [[username]]":"Últimas faixas de [[username]]","Tracks from [[group]]":"Faixas de [[group]]",Embed:"Embutir","Open on SoundCloud":"Abrir na SoundCloud","Player controls":"Controles do reprodutor","Hear more tracks like this":"Ouça mais faixas como esta",Play:"Reproduzir",Pause:"Pausar",'Play more tracks by <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Reproduzir mais faixas de <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play another track by <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Reproduzir outra faixa de <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play more tracks like <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Reproduzir mais faixas como <a class="sc-link-white" href="[[link]]">[[text]]</a>','Play another track like <a class="sc-link-white" href="[[link]]">[[text]]</a>':'Reproduzir outra faixa como <a class="sc-link-white" href="[[link]]">[[text]]</a>',Preview:"Pré-vizualização","Play another track":"Reproduzir outra faixa",track:["faixa","faixas"],"1 play":["1 reprodução","[[number]] reproduções"],"View track":"Exibir faixa","Try it free for 30 days":"Experimente grátis por 30 dias","Hear full track":"Ouvir faixa completa","Explore more music & audio like [[[title]]] on SoundCloud.":"Explore mais músicas e áudios como [[[title]]] na SoundCloud.","Get in on Google Play":"Adquira na Google Play","Download on the App Store":"Baixar na AppStore","Upgrade to SoundCloud Go":"Fazer upgrade para o SoundCloud Go","Get our expanded catalog, with offline listening and no ads.":"Obtenha nosso catálogo expandido, com escuta offline e sem anúncios.","Hear more on<br/>SoundCloud":"Ouça mais na<br/>SoundCloud","Back to track in [[[seconds]]]":"Voltar para faixa em [[[seconds]]]","Liked tracks":"Faixas curtidas","Featured tracks":"Faixas em destaque","Latest tracks":"Faixas recentes","1 track":["1 faixa","%d faixas"],"1 follower":["1 seguidor","%d seguidores"],"We're still processing this track or playlist.":"Ainda estamos processando essa faixa ou playlist.","button::Buy all":"Comprar tudo","button::Buy":"Comprar","button::Follow back":"Voltar atrás","button::Following":"Seguindo","button::Follow":"Seguir","button::Like":"Curtir","button::Liked":"Curtiu","sound::This track is not available in your country.":"Esta faixa não está disponível no seu país.","sound::Play related tracks":"Reproduzir faixas relacionadas","sound::Not available in your country":"Não disponível no seu país"}),
define("lib/augment/augment-localStorage",["require","exports","module"],function(a,b,c){(function(a){var d={},e={};d.length=0,d.getItem=function(a){return e[a]||null},d.setItem=function(a,b){typeof b=="undefined"?d.removeItem(a):(e[a]=""+b,d.length++)},d.removeItem=function(a){delete e[a],d.length--},d.key=function(a){return Object.keys(e)[a]||null},d.clear=function(){e={},d.length=0},typeof b=="object"?c.exports=d:a.localStorageMemory=d})(this)}),
define("lib/futures",["require","exports","module","_"],function(a,b,c){var d,e=a("_");c.exports=d={defer:function(a){var b=$.Deferred(),c=b.promise();return e.isFunction(a)?(a.call(c,b.resolve,b.reject),c):(e.isObject(a)&&e.isFunction(a.then)&&a.then(b.resolve,b.reject),b)},settled:function(a){return $.whenAll(a)},all:function(a){return $.when.apply($,a)},resolve:function(a){return $.Deferred().resolve(a)},reject:function(a){return $.Deferred().reject(a)},promisify:function(a){return function(){var b=$.Deferred();return a.apply(null,e.toArray(arguments).concat(function(a,c){a?b.reject(a):b.resolve(c)})),b.promise()}},call:function(a){var b=$.Deferred(),c=e.tail(arguments,1);try{b.resolve(a.apply(null,c))}catch(d){b.reject(d)}return b.promise()},mapEither:function(a,b){return b.then(a,a)},sequential:function(a){return a.reduce(function(a,b){function c(){return b().then(d.reject)}return a.then(b,c)},$.Deferred().resolve())},delay:function(a){var b=d.defer();return window.setTimeout(b.resolve.bind(b),a),b}}}),
define("lib/helpers/urn-helper",["require","exports","module"],function(a,b,c){var d={playlists:"playlist",sounds:"track",tracks:"track",groups:"group",users:"user"},e={playlists:"playlist",sounds:"sound",tracks:"sound",groups:"group",users:"user"},f={playlist:"playlists",sound:"tracks",group:"groups",user:"users"},g=c.exports={getAsAttributes:function(a){var b=a.split(":"),c=b[2],f=e[b[1]];return/\D/.test(c)||(c=parseInt(c,10)),f==="user"&&c==="system"&&(c=193),{id:c,kind:d[b[1]],resource_type:f}},generate:function(a,b){var c=f[a];return c?"soundcloud:"+c+":"+b:null}}}),
define("vendor/includes/comscore",["require","exports","module","lib/helpers/dom-helper"],function(a,b,c){var d,e=a("lib/helpers/dom-helper");d=c.exports={include:function(){var a=window._comscore=window._comscore||[];a.push({c1:"7",c2:"16601931",c3:"43164"}),e.insertScript("https://sb.scorecardresearch.com/beacon.js")}}}),
define("vendor/includes/google-analytics",["require","exports","module","lib/helpers/dom-helper"],function(a,b,c){var d,e=a("lib/helpers/dom-helper");d=c.exports={include:function(){var a=window._gaq=window._gaq||[];a.push(["_setAccount","UA-2519404-20"],["_gat._anonymizeIp"],["_trackPageview"]),e.insertScript("https://ssl.google-analytics.com/ga.js")}}}),
define("lib/subview-plugin",["require","exports","module","_"],function(a,b,c){function g(b,c){var d=b.getAttribute("data-id"),f=e[d],g,h,i;f.__path?(h=a(f.__path),delete f.__path):(h=f.__class,delete f.__class),delete e[d],f.key&&(i=f.key,delete f.key),g=c.addSubview(new h(f),i),g.render(),b.parentNode.replaceChild(g.el,b)}function h(b,c){var g,h;return typeof b=="string"?(c.hash.__path=b,h=a(b)):(c.hash.__class=b,h=b),c.hash.args&&(d.isFunction(c.hash.args)&&(c.hash.args=c.hash.args(this)),c.hash=d.extend({},c.hash.args,c.hash)),delete c.hash.args,c.hash.className&&(c.hash.className=[h.prototype.className,c.hash.className].filter(Boolean).join(" ")),g=f++,e[g]=c.hash,'<view data-id="'+g+'"></view>'}function i(a){a.$("view").each(function(){g(this,a)})}var d=a("_"),e={},f=0;b.handlebarHelper=h,b.replacePlaceholders=i}),
define("lib/template-helpers",["require","exports","module","lib/helpers/a11y-helper","vendor/handlebars-runtime","lib/helpers/number-helper","lib/helpers/image-helper","lib/helpers/i18n-helper","lib/lingua","lib/subview-plugin","vendor/usertext/usertext"],function(a,b,c){function m(a,b,c,d){return i.tp(b,c,a,d.hash,q(d))}function n(a,b){return i.tp(h.cleanBlockText(b.fn()),h.cleanBlockText(b.inverse()),a,b.hash,q(b))}function o(a,b){return i.t(a,b.hash,q(b))}function p(a){return i.t(h.cleanBlockText(a.fn()),a.hash,q(a))}function q(a){return{comment:a.hash._comment,context:a.hash._context}}var d=a("lib/helpers/a11y-helper"),e=a("vendor/handlebars-runtime"),f=a("lib/helpers/number-helper"),g=a("lib/helpers/image-helper"),h=a("lib/helpers/i18n-helper"),i=a("lib/lingua"),j=a("lib/subview-plugin"),k=a("vendor/usertext/usertext"),l=c.exports={$a11y:function(a){return new e.SafeString(d.getAccessibleMarkup(a.hash))},$debug:function(){return window.console.log.apply(window.console,[].slice.call(arguments,0,arguments.length-1)),""},$image:function(a,b){return new e.SafeString(g.markup(a,b.hash))},$view:function(){return new e.SafeString(j.handlebarHelper.apply(this,arguments))},$shortnumber:f.shorten,$formatnumber:f.format,$usertextOneline:function(){var a=k.withDefaults({paragraphs:!1,whitelist:[],externalLinks:!1});return function(b,c){if(c.hash.escapeExpression===undefined||c.hash.escapeExpression)b=e.Utils.escapeExpression(b);return new e.SafeString(a(b,c.hash))}}(),$t:function(){var a=arguments.length;if(a===2)return o.apply(this,arguments);if(a===1)return p.apply(this,arguments);throw new Error("Invalid signature to t helper, expected 1 or 2 arguments, got "+a)},$tp:function(){var a=arguments.length;if(a===4)return m.apply(null,arguments);if(a===2)return n.apply(null,arguments);throw new Error("Invalid signature to tp helper, expected 4 or 2 arguments, got: "+a)}}}),
define("vendor/remixin",["require","exports","module","_"],function(a,b,c){!function(b){var d=b(a("_"));c.exports=d}(function(a){function b(){this.mixins=a.initial(arguments),this.properties=a.last(arguments)}function c(a,b){this.applyTo=function(c){a.applyTo(c,b)}}function d(a,b){return null==a?b.slice():e(i(a),b)}function e(b,c){return b.concat(a.difference(c,b))}function f(a,b){return null==a?b:d(h(a),h(b)).join(" ")}function g(b,c){return a.extend({},c,b)}function h(b){return a.compact(b.split(k))}function i(b){return a.isArray(b)?b:[b]}var j=["before","after","around","requires","override","defaults","applyTo","requirePrototype","merge"],k=/\s+/;return a.extend(b.prototype,{applyTo:function(b,c){var d=this.properties;this.defaults(b,d.defaults),this.extend(b,d),this.merge(b,d.merge),a.invoke(this.mixins,"applyTo",b),["requires","requirePrototype","override","before","after","around"].forEach(function(a){this[a](b,d[a])},this),d.applyTo&&d.applyTo.call(this,b,c)},withOptions:function(a){return new c(this,a)},before:function(b,c){a.each(c,function(a,c){var d=b[c];b[c]=function(){return a.apply(this,arguments),d.apply(this,arguments)}})},after:function(b,c){a.each(c,function(a,c){var d=b[c];b[c]=function(){var b=d.apply(this,arguments);return a.apply(this,arguments),b}})},around:function(b,c){a.each(c,function(a,c){var d=b[c];b[c]=function(){var b=0,c=arguments.length,e=Array(c+1);for(e[0]=d.bind(this);c>b;++b)e[b+1]=arguments[b];return a.apply(this,e)}})},override:function(b,c){a.extend(b,c)},defaults:function(b,c){a.each(c,function(a,c){b.hasOwnProperty(c)||(b[c]=a)})},merge:function(b,c){a.each(c,function(c,e){if(null!=c){var h=b[e];b[e]=a.isArray(c)?d(h,c):a.isString(c)?f(h,c):g(h,c)}})},extend:function(b,c){var d=a.omit(c,j);a.extend(b,d)},requires:a.noop,requirePrototype:a.noop}),c.prototype=b.prototype,b})}),
define("lib/gc-store",["require","exports","module","lib/store","lib/mixins/usage-counting"],function(a,b,c){var d=a("lib/store"),e=a("lib/mixins/usage-counting"),f=c.exports=d.extend();e.applyTo(f.prototype)}),
define("vendor/embed/embed",["require","exports","module"],function(a,b,c){(function(){var a,b,d,e,f,g,h,i;a={html5:{allowed_params:["url","auto_play","color","show_artwork"],supported_types:["track","playlist","group","user","app"],root_url:"https://w.soundcloud.com/player/",template:'<iframe width="100%" height="{height}" scrolling="no" frameborder="no" src="{src}"></iframe>',height:{single:166,multi:450}},flash:{allowed_params:["url","auto_play","color","show_artwork","show_comments","show_playcount"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="{height}" width="100%"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><embed allowscriptaccess="always" src="{src}" type="application/x-shockwave-flash" width="100%" height="{height}"></embed></object>',height:{single:81,multi:165}},mini:{allowed_params:["url","auto_play","color","player_type","font"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="18" width="100%"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed wmode="transparent" allowscriptaccess="always" height="18" width="100%" src="{src}"></embed></object>',height:{single:18,multi:18}},artwork:{allowed_params:["url","auto_play","color","player_type"],supported_types:["track","playlist","group","user"],root_url:"https://player.soundcloud.com/player.swf",template:'<object height="{height}" width="{height}"><param name="movie" value="{src}"></param><param name="allowscriptaccess" value="always"></param><embed allowscriptaccess="always" width="{height}" height="{height}" src="{src}" type="application/x-shockwave-flash"></embed></object>',height:{single:300,multi:300}}},h={track:'<span><a href="{resource_url}">{resource_title}</a> by <a href="{user_url}">{user_name}</a></span>',playlist:'<span><a href="{resource_url}">{resource_title}</a> by <a href="{user_url}">{user_name}</a></span>',user:'<span>Latest sounds by <a href="{resource_url}">{resource_title}</a></span>',group:'<span><a href="{resource_url}">{resource_title}</a></span>'},b=function(a){return[].slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)a[c]=b[c]}),a},g={render:function(a,b){var c=/\{([^\{\}]*)\}/g;return b.replace(c,function(b,c){var d=a[c];return typeof d=="string"||typeof d=="number"?d:b})},html:function(b,c){var d=a[c.type].template,e=c.text?h[b.resource_type]||"":"";return this.render(b,d)+this.render(b,e)},wordpress:function(a,b){var c=b.type==="html5",d=a.api_url,e=i(b.params,b.type).replace(/&amp;/g,"&"),f=b.type==="artwork"?a.height:"100%";return'[soundcloud url="'+d+'"'+(e.length?' params="'+e+'"':"")+' width="'+f+'" height="'+a.height+'" iframe="'+c+'" /]'}},e=function(c,e){var h={type:"html5",format:"html",text:!1},j=d(c),k,l;e=b(h,e),e.params=b({},e.params),l=a[e.type];if(l.supported_types.indexOf(c.kind)===-1)return!1;if(e.type==="artwork"||e.type==="mini")e.params.player_type=e.type.replace("mini","tiny");e.type==="flash"&&(e.text=!0),k={user_name:c.user?c.user.username:null,user_url:c.user?c.user.permalink_url.replace(/^http:/,"https:"):null,resource_title:c.title||c.name||c.username,resource_url:c.permalink_url.replace(/^http:/,"https:"),resource_type:c.kind,api_url:j,height:f(c,e,l),params:e.params,src:[l.root_url,"?",i(b({url:j},e.params),e.type)].join("")};if(g[e.format])return g[e.format](k,e)},d=function(a){var b=a.secret_uri||a.uri,c=a.sharing==="public";return c&&(b=b.replace(/\?secret_token=([^&]*)/,"")),b.replace(/^http:/,"https:")},i=function(b,c){var d,e,f,g,h,i,j=[];if(b)for(d in b)if(b.hasOwnProperty(d)&&a[c].allowed_params.indexOf(d)!==-1){g=b[d];if(g!==null&&g!==h)if(typeof g=="object"){f=g.length;for(e=0;e<f;++e)j.push(encodeURIComponent(d)+"="+encodeURIComponent(g[e]).replace(/%2F/g,"/"))}else j.push(encodeURIComponent(d)+"="+encodeURIComponent(g).replace(/%2F/g,"/"))}return j.join("&amp;")},f=function(a,b,c){return b.height?b.height:a.kind==="track"?c.height.single:c.height.multi},typeof c!="undefined"&&c.exports?c.exports=e:(window.SC=window.SC||{},window.SC.getEmbedCode=e)})()}),
define("lib/helpers/datetime-helper",["require","exports","module"],function(a,b,c){var d=1e3,e=60*d,f=60*e,g=c.exports={timecode:function(a){var b,c;return isNaN(a)?a:(b=[],c={h:Math.floor(a/f),m:Math.floor(a/e%60),s:Math.floor(a/d%60)},c.h>0&&b.push(c.h),b.push(c.m<10&&c.h>0?"0"+c.m:c.m,c.s<10?"0"+c.s:c.s),b.join(":"))}}}),
define("lib/errors/unauthorized-viewer",["require","exports","module"],function(a,b,c){function d(){var a=Error.apply(this,arguments);a.name=this.name="UnauthorizedViewerError",this.message="User is unauthorized to view this resource.",this.stack=a.stack}d.prototype=Object.create(Error.prototype),c.exports=d}),
define("lib/audiomanager",["require","exports","module","lib/browser","config","vendor/audiomanager/audiomanager.min","lib/event-bus"],function(a,b,c){function j(a){var b=a.controller,c=$(b.getContainerElement()),g=$(".playButton"),h=g.offset(),i=b.getState()===d.States.ERROR;if(e.isGecko){f.get("appView").$el.append(c),c.toggleClass("fullscreen",i);return}c.toggleClass("blocked",i).css({top:i?h.top:0,left:i?h.left:0})}var d,e=a("lib/browser"),f=a("config"),g=a("vendor/audiomanager/audiomanager.min"),h=a("lib/event-bus"),i=1e3/60;c.exports=d=new g({flashAudioPath:"/player/assets/swf/flashAudio-e3e74daf.swf",flashObjectID:"flashAudioObject",flashLoadTimeout:500,updateInterval:i,debug:!1}),d.Errors=g.Errors,d.States=g.States,d.UPDATE_INTERVAL=i,h.one("audio:flash-block audio:flash-unblock",j)}),
define("vendor/scaudio/scaudio",["require","exports","module"],function(a,b,c){c.exports=function(a){function c(d){if(b[d])return b[d].exports;var e=b[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,c),e.loaded=!0,e.exports}var b={};return c.m=a,c.c=b,c.p="",c(0)}([function(a,b,c){function F(a){return this._hooksPause.every(function(b){return b(a)})}function G(a){var b=a.resource_id||a.id||a.cid;if(!b)throw new Error("Your model should have a unique `id`, `cid` or `resource_id` property");return b}function H(a){s=a,a&&(d.AudioManagerStates=a.States)}function I(){var a=i();return Q.call(this,!0).done(function(b){a.resolve(b.url)}).fail(function(){a.reject()}),a.promise()}function J(a){var b=this.options,c;return c={id:this.getId(),src:a.url,duration:q.result(b.duration),title:this.options.title,mimeType:a.mimeType,forceSingle:b.useSinglePlayer},s.createAudioPlayer(c,{streamUrlProvider:I.bind(this)})}function K(a,b){var c=b?"on":"off";a[c]("state-change",be,this)[c]("position-change",M,this)[c]("metadata",L,this)}function L(){this.trigger(j.METADATA)}function M(){this._prevPosition!==this.currentTime()&&(this.trigger(j.TIME),this._prevPosition=this.currentTime())}function N(){this._initAudioDefer&&(this._initAudioDefer.reject(),this._initAudioDefer=null,this.streamInfo=null)}function O(){N.call(this),this.controller&&(this._storedPosition=this.currentTime(),this.controller.kill(),this.controller=null,this.trigger(j.RESET))}function P(){this._registerPlays=!0,this.pause(),this.trigger(j.FINISH)}function Q(a){var b=i(),c=this.streamInfo&&!a;return c?b.resolve(this.streamInfo):R.call(this).done(function(a){var c=o.choosePreferredStream(a,this.options);c?b.resolve(c):(this.trigger(j.NO_PROTOCOL),u.warn("(%s) Could not match a protocol of given media descriptor to one of the supported protocols (%s), aborting attempt to play.",this.getId(),this.options.protocols),b.reject())}.bind(this)).fail(function(a){u.warn("(%s) Stream request failed with status: %d",this.getId(),a.status),T.call(this,a),U.call(this,a),S.call(this,a),V.call(this,a),b.reject()}.bind(this)),b.promise()}function R(){if(this.options.streamUrls&&!this._usedPrefetchUrls){var a=i(),b;return this._usedPrefetchUrls=!0,b=q.result(this.options.streamUrls),a.resolve(b),a.promise()}return this.ajax({type:"GET",url:q.result(this.options.streamUrlsEndpoint),dataType:"json",async:this.options.asyncFetch,timeout:this.options.asyncFetch?z:y})}function S(a){a.status>=400&&a.status<500&&this.trigger(j.REQUEST_FAILURE)}function T(a){var b=a.status>=400&&a.status<500&&(a.responseText||"").indexOf("geo_blocked")!==-1;b&&this.trigger(j.GEO_BLOCKED)}function U(a){a.status===0&&this.trigger(j.NO_CONNECTION)}function V(a){a.status>=500&&this.trigger(j.API_FAILURE)}function W(){return this.controller&&this.controller.getCapabilities&&this.controller.getCapabilities()?this.controller.getCapabilities().needsUrlRefresh:!0}function X(a){if(!W.call(this))return!0;var b=this._initAudioDefer&&this._initAudioDefer.state(),c=o.streamValidForPlayingFrom(this.streamInfo,a);return this.controller&&this.controller.hasStreamUrlProvider&&this.controller.hasStreamUrlProvider()?!0:b&&(b==="pending"||b==="resolved"&&c)}function Y(a){a&&!this._bufferingTimeout?this._bufferingTimeout=window.setTimeout(function(){this._isBuffering=!0,this.trigger(j.BUFFERRING_START)}.bind(this),A):a||(this._bufferingTimeout&&(window.clearTimeout(this._bufferingTimeout),this._bufferingTimeout=null),this._isBuffering&&(this._isBuffering=!1,this.trigger(j.BUFFERRING_END)))}function Z(){this.off(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEKED),this.seekTimeEventHandler=null}function $(){this._errorRecoveryFlagsResetTimeout=window.setTimeout(function(){this._errorRecoveryTime=null,this._errorRecoveryCounts=0}.bind(this),E)}function _(){this._errorRecoveryFlagsResetTimeout&&window.clearTimeout(this._errorRecoveryFlagsResetTimeout)}function ba(){var a=this.isPlaying(),b=Date.now();_.call(this);if(this._errorRecoveryTime&&this._errorRecoveryTime+C>b&&this._errorRecoveryCounts>D){this.trigger(j.AUDIO_ERROR,this);return}this._errorRecoveryTime=Date.now(),this._errorRecoveryCounts++,O.call(this),a&&this.play({seek:this.currentTime(),userInitiated:!1})}function bb(a){this.logAudioError({error_code:a,protocol:this.streamInfo?this.streamInfo.protocol:undefined,player_type:this.controller?this.controller.getType():undefined,host:this.streamInfo?p.getUrlHost(this.streamInfo.url):undefined,url:this.streamInfo?this.streamInfo.url:undefined})}function bc(){var a,b=s.Errors;if(!this.controller){u.error("(%s) Controller is null, aborting error handler.",this.getId(),this),bb.call(this,null),ba.call(this);return}a=this.controller&&this.controller.getErrorID(),u.error("(%s) %s",this.getId(),this.controller.getErrorMessage?this.controller.getErrorMessage():"Controller does not provide getErrorMessage()"),bh(a,"MSE","GENERIC","HTML5_AUDIO_DECODE","HTML5_AUDIO_SRC_NOT_SUPPORTED","FLASH_PROXY","FLASH_RTMP_CONNECT_FAILED","FLASH_RTMP_CANNOT_PLAY_STREAM")&&bb.call(this,a);switch(a){case b.FLASH_PROXY_CANT_LOAD_FLASH:this.trigger(j.FLASH_NOT_LOADED);break;case b.FLASH_PROXY_FLASH_BLOCKED:this.trigger(j.FLASH_BLOCK);break;case b.FLASH_RTMP_CONNECT_FAILED:q.without(this.options.protocols,m.RTMP);case b.FLASH_RTMP_CANNOT_PLAY_STREAM:case b.FLASH_RTMP_CONNECT_CLOSED:case b.HTML5_AUDIO_NETWORK:case b.HTML5_AUDIO_ABORTED:case b.HTML5_AUDIO_DECODE:case b.HTML5_AUDIO_SRC_NOT_SUPPORTED:case b.GENERIC_AUDIO_ENDED_EARLY:case b.MSE_BAD_OBJECT_STATE:case b.MSE_NOT_SUPPORTED:case b.MSE_MP3_NOT_SUPPORTED:case b.MSE_HLS_NOT_VALID_PLAYLIST:case b.MSE_HLS_PLAYLIST_NOT_FOUND:case b.MSE_HLS_SEGMENT_NOT_FOUND:ba.call(this);break;case b.GENERIC_AUDIO_OVERRUN:P.call(this);break;default:u.error("(%s) Unhandled audio error code: %s",this.getId(),a,this)}}function bd(a,b){this.options.debug&&bf.call(this,a,b);switch(a){case j.PAUSE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case j.PLAY:var c=b;this.toggleMute(t.muted),this.setVolume(t.volume),this._isPlaying=!1,this._isPlayActionQueued=!0,this._userInitiatedPlay=c.userInitiated!==undefined?!!c.userInitiated:!0,bi.call(this);break;case j.PLAY_START:this._isPlaying=!0,this._isPlayActionQueued=!1,this._registerPlays&&this.registerPlay();break;case j.BUFFERRING_START:case j.SEEK:this._isPlaying&&(this._isPlaying=!1,this._isPlayActionQueued=!0);break;case j.BUFFERRING_END:case j.SEEKED:this._isPlayActionQueued&&(this._isPlaying=!0,this._isPlayActionQueued=!1);break;case j.NO_CONNECTION:this.pause(),this._hasNoConnection=!0,this._noConnectionSince=Date.now();break;case j.API_FAILURE:this.pause();break;case j.REQUEST_FAILURE:this._isPlaying=!1,this._isPlayActionQueued=!1;break;case j.GEO_BLOCKED:this._isGeoBlocked=!0;break;case j.NO_STREAMS:Y.call(this,!1),N.call(this),bk.call(this);break;case j.STREAMS:this._isGeoBlocked=!1,this._noConnectionSince=null,this._hasNoConnection=!1;break;case j.ONLINE:bj.call(this);break;case j.OFFLINE:}}function be(a){var b=s.States,c=s.Errors;switch(a){case b.IDLE:bg.call(this),this.controller&&this.controller.getErrorID()===c.FLASH_PROXY_FLASH_BLOCKED&&this.trigger(j.FLASH_UNBLOCK);break;case b.PAUSED:bg.call(this),Y.call(this,!1),this.seekTimeEventHandler&&this.isPaused()&&Z.call(this),this.isPlaying()&&this.trigger(j.PAUSE,{position:this.currentTime()});break;case b.PLAYING:bg.call(this),Y.call(this,!1),$.call(this),this.trigger(j.PLAY_RESUME);break;case b.LOADING:case b.SEEKING:bg.call(this),Y.call(this,!0);break;case b.ENDED:bg.call(this),P.call(this);break;case b.ERROR:Y.call(this,!1),bc.call(this)}this.trigger(j.STATE_CHANGE,a)}function bf(a,b){var c=this.options.title;c=c&&c.length?" ["+c.replace(/\s/g,"").substr(0,6)+"]":"",a===j.STATE_CHANGE?u("(%s)%s Event: %s (%s)",this.getId(),c,a,b):a===j.TIME&&!this._loggedTime?u("(%s)%s Event: %s %dms",this.getId(),c,a,this.currentTime()):a!==j.TIME&&u("(%s)%s Event: %s",this.getId(),c,a),this._loggedTime=a===j.TIME}function bg(){this._initAudioDefer&&this._initAudioDefer.resolve()}function bh(a){return s.Errors[a]===undefined?!1:Array.prototype.slice.call(arguments,1).some(function(b){return a.indexOf(b)===0})}function bi(){function a(){var a=window.navigator.onLine;u("Navigator `onLine` status is now: "+a),window.setTimeout(function(){window.navigator.onLine===a&&this.trigger(a?j.ONLINE:j.OFFLINE)}.bind(this),500)}this._onlineEventsRegistered||(this._onlineEventsRegistered=!0,window.addEventListener("online",a.bind(this)),window.addEventListener("offline",a.bind(this)))}function bj(){if(this.hasNoConnection()&&this._isPlayRetryQueued){var a=Date.now()-this._noConnectionSince;this._isPlayRetryQueued=!0,a<this.options.retryAfterNoConnectionEventTimeout&&this.play({userInitiated:!1})}}function bk(){this.hasNoConnection()&&!this._userInitiatedPlay&&(this._isPlayRetryQueued=!0)}var d,e=c(1),f=c(6),g=c(8),h=c(9),i=c(2).Deferred,j=c(7),k=c(14),l=c(10),m=c(15),n=c(16),o=c(18),p=c(12),q=c(13),r=c(19),s,t={muted:!1,volume:1},u,v=[],w={},x={soundId:w,duration:w,title:null,registerEndpoint:null,streamUrlsEndpoint:w,resourceId:!1,debug:!1,asyncFetch:!0,useSinglePlayer:!0,protocols:[m.PREVIEW,m.HLS,m.RTMP,m.HTTP],extensions:[k.MP3],maxBitrate:Infinity,mediaSourceEnabled:!1,mseFirefox:!1,mseSafari:!1,eventLogger:null,logErrors:!0,logPerformance:!0,ajax:null,retryAfterNoConnectionEventTimeout:6e4,fadeOutDurationOnPause:0,fadeOutDurationOnConcurrentStreaming:0,fadeOutDurationOnFinish:0,fadeOutAlgo:r.VolumeAutomator.Algos.EaseInOut,previewOnly:!1},y=6e3,z=6e3,A=400,B=6e4,C=6e3,D=3,E=3e4;d=a.exports=function(a,b){arguments.length===1?b=a:d.setAudioManager(a);if(!s)throw new Error("SCAudio: AudioManager instance must be set with `SCAudio.setAudioManager()` or passed via the constructor");this.options=q.extend({},x,b);var c=Object.keys(this.options).filter(function(a){return this.options[a]===w},this);if(c.length)throw new Error("SCAudio: pass into constructor the following options: "+c.join(", "));n.prioritizeAndFilter(this.options),this.controller=null,this.streamInfo=null,this._userInitiatedPlay=this._registerPlays=!0,this._registerCounts=this._errorRecoveryCounts=0,this._isPlayActionQueued=this._onlineEventsRegistered=this._usedPrefetchUrls=this._isPlaying=this._isBuffering=this._hasNoConnection=!1,this._initAudioDefer=this._expirationTimeout=this._bufferingTimeout=this._errorRecoveryTime=this._errorRecoveryFlagsResetTimeout=this._storedPosition=this._prevPosition=this._noConnectionSince=null,this.options.debug&&(this._loggedTime=!1),this._modelListeners={},this._hooksPause=[],this.audioPerfMonitor=new g(this,this.logAudioPerformance.bind(this)),this.audioLogger=new f(this),this.volumeAutomator=new r.VolumeAutomator(this),u=u||h({enabled:this.options.debug,buffer:!0,label:"scaudio"})},q.extend(d.prototype,l,{constructor:d,initAudio:function(){return this._initAudioDefer||(this._initAudioDefer=i(),Q.call(this).done(function(a){var b=!0;this.streamInfo&&(b=!1),this.streamInfo=a,b&&this.trigger(j.STREAMS),this.controller=J.call(this,a),K.call(this,this.controller,!0),be.call(this,this.controller.getState())}.bind(this)).fail(function(){this.trigger(j.NO_STREAMS)}.bind(this)),this._initAudioDefer.done(function(){this.trigger(j.CREATED)}.bind(this))),this._initAudioDefer.promise()},updateOptions:function(a){q.extend(this.options,a)},registerPlay:function(){var a=this.options.soundId,b=this.options.registerEndpoint,c=!1;return b&&v.indexOf(a)===-1&&(v.push(a),window.setTimeout(function(){var b=v.indexOf(a);b>-1&&v.splice(b,1)},B),this.ajax({type:"POST",url:q.result(b),dataType:"json"}),this._registerCounts++,this._registerPlays=!1,this.trigger(j.REGISTERED),c=!0),c},toggle:function(){this[this.isPaused()?"play":"pause"]()},play:function(a){var b;if(a&&a.seek!=null)b=a.seek;else{if(this.isPlaying())return;b=this.currentTime()}a=q.extend({},a,{position:b}),this.trigger(j.PLAY,a),X.call(this,b)||(O.call(this),this._isPlayActionQueued=!0),this.initAudio().done(function(){this._isPlayActionQueued&&(this._storedPosition=null,this.trigger(j.PLAY_START,a),this.controller&&this.controller.play(b))}.bind(this)),Y.call(this,!0)},pause:function(a){if(this.isPaused())return;a=q.extend({},a,{position:this.currentTime()});if(!F.call(this,a))return;this.trigger(j.PAUSE,a),this.callPauseOnController()},callPauseOnController:function(){this.controller&&this.controller.pause()},registerHook:function(a,b){switch(a){case"pause":this._hooksPause.push(b);break;default:throw new Error("can`t register hook for "+a)}},getListenTime:function(){return this.audioLogger?this.audioLogger.getListenTime():0},dispose:function(){this.audioLogger=null,this.audioPerfMonitor=null,q.without(v,this.options.soundId),window.clearTimeout(this._bufferingTimeout),N.call(this),this.controller&&(this.controller.kill(),this.controller=null),delete this.controller,this.trigger(j.DESTROYED),this.off()},seek:function(a){if(!this.controller)return;if(a>=q.result(this.options.duration)){P.call(this);return}this.seekTimeEventHandler&&this.off(j.TIME,this.seekTimeEventHandler),this.seekTimeEventHandler=q.after(2,function(){Z.call(this)}.bind(this)),this.on(j.TIME,this.seekTimeEventHandler),this.trigger(j.SEEK,{from:this.currentTime(),to:a});if(this.isPlaying()&&!X.call(this,a)){O.call(this),this.play({seek:a});return}this.controller.seek(a)},seekRelative:function(a){this.controller&&this.seek(this.currentTime()+a)},currentTime:function(){return this._storedPosition?this._storedPosition:this.controller?this.controller.getCurrentPosition():0},loadProgress:function(){var a=0;return this.controller&&(a=this.controller.getLoadedPosition()/this.controller.getDuration(),a=a>=.99?1:a),a},duration:function(){return this.controller&&this.controller.getDuration()||0},buffered:function(){return this.controller&&this.controller.getLoadedPosition()||0},isPaused:function(){return!this.isPlaying()},isBuffering:function(){return this._isBuffering},isPlaying:function(){return this._isPlayActionQueued||this._isPlaying},isLoading:function(){return!!this.controller&&this.controller.getState()===s.States.LOADING},hasNoConnection:function(){return!!this._hasNoConnection},hasStreamInfo:function(){return!!this.streamInfo},isGeoBlocked:function(){return!!this._isGeoBlocked},toggleMute:function(a){d.toggleMute(a)},isMuted:function(){return d.isMuted()},setVolume:function(a){d.setVolume(a)},getVolume:function(){return d.getVolume()},logAudioPerformance:function(a){!!this.getEventLogger()&&this.options.logPerformance&&this.getEventLogger().audioPerformance(a)},logAudioError:function(a){!!this.getEventLogger()&&this.options.logErrors&&this.getEventLogger().audioError(a)},getAudioManagerStates:function(){return s.States},getId:function(){return this.options.resourceId||this.options.soundId},getEventLogger:function(){return this.options.eventLogger},registerModelEventListener:function(a,b){var c=G(a);if(this._modelListeners[c])throw new Error("Data model is already registered (forgot to unregister it or registering twice?)");this._modelListeners[c]=b=b.bind(this,a),this.on("all",b)},unregisterModelEventListener:function(a){var b=G(a);this._modelListeners[b]&&(this.off("all",this._modelListeners[b]),delete this._modelListeners[b])},ajax:function(a){return this.options.ajax?this.options.ajax(a):e(a)},trigger:function(a,b){bd.call(this,a,b),l.trigger.call(this,a,b)}}),q.extend(d,{getSettings:function(){return t},setSettings:function(a){q.extend(t,a)},setAudioManager:H,setAudioManagerOnce:q.once(H),toggleMute:function(a){t.muted=a===undefined?!t.muted:!!a,s&&s.setVolume(t.muted?0:1)},isMuted:function(){return t.muted},setVolume:function(a){t.volume=a===undefined?1:a,s&&s.setVolume(t.volume)},getVolume:function(){return t.volume},Extensions:k,Protocols:m,Events:j,BUFFER_DELAY:A,PLAY_REGISTRATION_TIMEOUT:B})},function(a,b,c){var d=c(2).Deferred,e=4,f=a.exports=function(a){var b,c,f,g,h,i,j,k;a&&(f=a.data||null,c=a.url||"",b=a.type||"GET",g=a.dataType||"text",h=a.async,i=a.timeout,j=a.beforeSend||null);var l=d();h=h!==!1;var m=new XMLHttpRequest;return m.open(b,c,h),h&&(m.responseType="text"),j&&j(m),m.onreadystatechange=function(){if(m.readyState!==e)return;clearTimeout(k);if(m.status!==0&&m.status<400){var a=m.responseText;if(g==="json")try{a=JSON.parse(a)}catch(b){l.reject(m);return}l.resolve(a)}else l.reject(m)},i!=null&&(k=setTimeout(function(){m.readyState!==e&&(m.abort(),l.reject(m))},i)),m.send(f),l.promise()}},function(a,b,c){a.exports=c(3)},function(a,b,c){var d=a.exports=c(4),e=Array.prototype.slice;d.extend({Deferred:function(a){var b=[["resolve","done",d.Callbacks("once memory"),"resolved"],["reject","fail",d.Callbacks("once memory"),"rejected"],["notify","progress",d.Callbacks("memory")]],c="pending",e={state:function(){return c},always:function(){return f.done(arguments).fail(arguments),this},then:function(){var a=arguments;return d.Deferred(function(c){d.each(b,function(b,e){var g=e[0],h=a[b];f[e[1]](d.isFunction(h)?function(){var a=h.apply(this,arguments);a&&d.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===f?c:this,[a])}:c[g])}),a=null}).promise()},promise:function(a){return a!=null?d.extend(a,e):e}},f={};return e.pipe=e.then,d.each(b,function(a,d){var g=d[2],h=d[3];e[d[1]]=g.add,h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock),f[d[0]]=g.fire,f[d[0]+"With"]=g.fireWith}),e.promise(f),a&&a.call(f,f),f},when:function(a){var b=0,c=e.call(arguments),f=c.length,g=f!==1||a&&d.isFunction(a.promise)?f:0,h=g===1?a:d.Deferred(),i=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===j?h.notifyWith(b,c):--g||h.resolveWith(b,c)}},j,k,l;if(f>1){j=new Array(f),k=new Array(f),l=new Array(f);for(;b<f;b++)c[b]&&d.isFunction(c[b].promise)?c[b].promise().done(i(b,l,c)).fail(h.reject).progress(i(b,k,j)):--g}return g||h.resolveWith(l,c),h.promise()}})},function(a,b,c){function g(a){var b=f[a]={};return d.each(a.split(e),function(a,c){b[c]=!0}),b}var d=a.exports=c(5),e=/\s+/,f={};d.Callbacks=function(a){a=typeof a=="string"?f[a]||g(a):d.extend({},a);var b,c,e,h,i,j,k=[],l=!a.once&&[],m=function(d){b=a.memory&&d,c=!0,j=h||0,h=0,i=k.length,e=!0;for(;k&&j<i;j++)if(k[j].apply(d[0],d[1])===!1&&a.stopOnFalse){b=!1;break}e=!1,k&&(l?l.length&&m(l.shift()):b?k=[]:n.disable())},n={add:function(){if(k){var c=k.length;(function f(b){d.each(b,function(b,c){var e=d.type(c);e==="function"?(!a.unique||!n.has(c))&&k.push(c):c&&c.length&&e!=="string"&&f(c)})})(arguments),e?i=k.length:b&&(h=c,m(b))}return this},remove:function(){return k&&d.each(arguments,function(a,b){var c;while((c=d.inArray(b,k,c))>-1)k.splice(c,1),e&&(c<=i&&i--,c<=j&&j--)}),this},has:function(a){return d.inArray(a,k)>-1},empty:function(){return k=[],this},disable:function(){return k=l=b=undefined,this},disabled:function(){return!k},lock:function(){return l=undefined,b||n.disable(),this},locked:function(){return!l},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],k&&(!c||l)&&(e?l.push(b):m(b)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!c}};return n}},function(a,b){function f(a){return a==null?String(a):e[d.call(a)]||"object"}function g(a){return c.type(a)==="function"}function h(a){return c.type(a)==="array"}function i(a,b,c){var d,e=0,f=a.length,h=f===undefined||g(a);if(c){if(h){for(d in a)if(b.apply(a[d],c)===!1)break}else for(;e<f;)if(b.apply(a[e++],c)===!1)break}else if(h){for(d in a)if(b.call(a[d],d,a[d])===!1)break}else for(;e<f;)if(b.call(a[e],e,a[e++])===!1)break;return a}function j(a){return!a||c.type(a)!=="object"?!1:!0}function k(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;typeof h=="boolean"&&(k=h,h=arguments[1]||{},i=2),typeof h!="object"&&!c.isFunction(h)&&(h={}),j===i&&(h=this,--i);for(;i<j;i++)if((a=arguments[i])!=null)for(b in a){d=h[b],e=a[b];if(h===e)continue;k&&e&&(c.isPlainObject(e)||(f=c.isArray(e)))?(f?(f=!1,g=d&&c.isArray(d)?d:[]):g=d&&c.isPlainObject(d)?d:{},h[b]=c.extend(k,g,e)):e!==undefined&&(h[b]=e)}return h}var c=a.exports={type:f,isArray:h,isFunction:g,isPlainObject:j,each:i,extend:k,noop:function(){}},d=Object.prototype.toString,e={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(a){e["[object "+a+"]"]=a.toLowerCase()})},function(a,b,c){function f(a){this.listenTime+=a.from-this.currentTime,this.currentTime=a.to}function g(a){this.listenTime+=a.position-this.currentTime,this.currentTime=a.position}function h(a){this.currentTime=a.position}var d,e=c(7);d=a.exports=function(a){this.scAudio=a,this.listenTime=0,this.currentTime=0,this.scAudio.on(e.SEEK,f,this).on(e.PLAY_START,h,this).on(e.PAUSE,g,this)},d.prototype={constructor:d,getListenTime:function(){return this.listenTime+this.scAudio.currentTime()-this.currentTime}}},function(a,b){var c={CREATED:"created",STATE_CHANGE:"state-change",DESTROYED:"destroyed",PLAY:"play",PLAY_START:"play-start",PLAY_RESUME:"play-resume",METADATA:"metadata",PAUSE:"pause",FINISH:"finish",RESET:"reset",SEEK:"seek",SEEKED:"seeked",GEO_BLOCKED:"geo_blocked",BUFFERRING_START:"buffering_start",BUFFERRING_END:"buffering_end",BUFFERING_START:"buffering_start",BUFFERING_END:"buffering_end",FLASH_NOT_LOADED:"flash_not_loaded",FLASH_BLOCK:"flash_blocked",FLASH_UNBLOCK:"flash_unblocked",AUDIO_ERROR:"audio_error",TIME:"time",NO_STREAMS:"no_streams",STREAMS:"streams",NO_PROTOCOL:"no_protocol",NO_CONNECTION:"no_connection",API_FAILURE:"api_failure",REQUEST_FAILURE:"request_failure",REGISTERED:"registered",ONLINE:"online",OFFLINE:"offline"};a.exports=c},function(a,b,c){function k(){if(!this.scAudio.controller){j.warn("Can´t initialize when controller is null");return}if(this.controller){j.warn("(%s) Setup was called while it was already initialized (returned with a no-op)",this.scAudio.getId());return}j("(%s) Initialized",this.scAudio.getId()),this.controller=this.scAudio.controller,this.protocol=this.scAudio.streamInfo.protocol,this.host=h.getUrlHost(this.scAudio.streamInfo.url)}function l(){if(!this.controller)return;j("(%s) Reset",this.scAudio.getId()),this.controller=this.protocol=this.host=null,this.timeToPlayMeasured=!1}function m(a){var b=this.scAudio.getAudioManagerStates();a===b.LOADING?this.timeToPlayMeasured&&t.call(this):i.isNull(this.bufferingStartTime)||u.call(this)}function n(){this.metadataLoadStartTime=Date.now()}function o(){if(i.isNull(this.metadataLoadStartTime)){j.warn("(%s) onMetadataEnd was called without onMetadataStart being called before.",this.scAudio.getId());return}this.log({type:"metadata",latency:Date.now()-this.metadataLoadStartTime}),this.metadataLoadStartTime=null}function p(){this.playClickTime=Date.now()}function q(){if(this.timeToPlayMeasured)return;if(i.isNull(this.playClickTime)){j.warn("(%s) onPlayResume was called without onPlayStart being called before.",this.scAudio.getId());return}this.log({type:"play",latency:Date.now()-this.playClickTime}),this.playClickTime=null,this.timeToPlayMeasured=!0}function r(){if(this.scAudio.isPaused())return;this.seekStartTime=Date.now()}function s(){if(this.scAudio.isPaused())return;if(i.isNull(this.seekStartTime)){j.warn("(%s) onSeekEnd was called without onSeekStart being called before.",this.scAudio.getId());return}this.log({type:"seek",latency:Date.now()-this.seekStartTime}),this.seekStartTime=null}function t(){if(this.bufferingStartTime)return;this.bufferingStartTime=Date.now()}function u(){if(i.isNull(this.bufferingStartTime)){j.warn("(%s) onBufferingEnd was called without onBufferingStart being called before.",this.scAudio.getId());return}v.call(this),this.bufferingStartTime=null}function v(){i.isNull(this.bufferingStartTime)||(i.isNull(this.bufferingTimeAccumulated)&&(this.bufferingTimeAccumulated=0),this.bufferingTimeAccumulated+=Date.now()-this.bufferingStartTime)}function w(){v.call(this);if(i.isNull(this.bufferingTimeAccumulated))return;this.log({type:"buffer",latency:this.bufferingTimeAccumulated}),this.bufferingStartTime=this.bufferingTimeAccumulated=null}var d,e=c(9),f=c(7),g=c(10),h=c(12),i=c(13),j;d=a.exports=function(a,b){this.scAudio=a,this.logFn=b,this.controller=null,this.reset(),j=j||e({enabled:a.options.debug,buffer:!0,label:"audioperf"}),a.on(f.CREATED,k,this).on(f.RESET,l,this).on(f.DESTROYED,l,this).on(f.SEEK,r,this).on(f.SEEKED,s,this).on(f.PLAY,p,this).on(f.PLAY_START,n,this).on(f.PLAY_RESUME,q,this).on(f.PAUSE,w,this).on(f.FINISH,w,this).on(f.STATE_CHANGE,m,this).on(f.METADATA,o,this)},i.extend(d.prototype,g,{constructor:d,log:function(a){if(!this.controller){j.warn("(%s) Monitor log was called while controller is null (returned with a no-op)",this.scAudio.getId());return}i.extend(a,{protocol:this.protocol,host:this.host,playertype:this.controller.getType()}),j("(%s) event type: %s, latency: %d, protocol: %s, host: %s playertype: %s",this.scAudio.getId(),a.type,a.latency,a.protocol,a.host,a.playertype),this.logFn(a)},reset:function(){this.bufferingStartTime=this.bufferingTimeAccumulated=this.playClickTime=this.seekStartTime=this.metadataLoadStartTime=null,this.timeToPlayMeasured=!1}})},function(a,b){function f(){function A(a,b){if(!e)return;for(var c=arguments.length,f=Array(c>2?c-2:0),g=2;g<c;g++)f[g-2]=arguments[g];typeof b=="string"?b=" "+b:(f.unshift(b),b="");var h=[B()+" | "+x+(u?"%c":"")+b].concat(y,f);i?w.push({level:a,logArgs:h})>t&&w.shift():d[a].apply(d,h)}function B(){var a=new Date,b=v===null?0:a-v,c=u?"%c":"";return v=+a,c+g(a)+(c+" ("+c)+h("+"+b+"ms"," ",8)+(c+")")}function C(a){return a.enable=function(){e=!0},a.disable=function(){e=!1},a.bufferOn=function(){i=!0},a.bufferOff=function(){i=!1,w.length=0},a.flush=n()?function(){w.forEach(function(a){var b=a.level,c=a.logArgs;d[b].apply(d,c)}),w.length=0}:function(){},a}var a=o.apply(undefined,arguments),b=a.enabled,e=b===undefined?!0:b,f=a.buffer,i=f===undefined?!1:f,j=a.label,p=j===undefined?"":j,q=a.plainOutput,r=q===undefined?!1:q,s=a.bufferSize,t=s===undefined?1e3:s;if(!n())return C(c.reduce(function(a,b){return a[b]=a},function(){}));d.CL||(d.CL={_cssCounter:0});var u=!r&&m(),v=null,w=[],x=k(p,u),y=u?["color: green","color: grey","color: blue","color: grey",l(p),""]:[],z=d.CL[p]=C(c.reduce(function(a,b){return a[b]=A.bind(null,b),a},A.bind(null,"log")));return z}function g(a){return i(a.getHours())+":"+i(a.getMinutes())+":"+i(a.getSeconds())+"."+h(a.getMilliseconds(),"0",3)}function h(a,b,c){return j(b,c-(""+a).length)+a}function i(a){return h(a,"0",2)}function j(a,b){return b>0?(new Array(b+1)).join(a):""}function k(a,b){return(b?"%c":"")+(a?a:"")}function m(){if(typeof navigator=="undefined")return!1;var a=navigator.userAgent;return/chrome|firefox|opr/i.test(a)&&!/msie|edge/i.test(a)}function n(){return d&&c.every(function(a){return typeof d[a]=="function"})}function o(){var a=arguments.length<=0||arguments[0]===undefined?!0:arguments[0],b=arguments.length<=1||arguments[1]===undefined?"":arguments[1];return typeof a=="object"&&a||{enabled:a,label:b}}"use strict",a.exports=f;var c=["log","info","warn","error"],d=typeof console!="undefined"?console:null,e=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",l=function(){var a=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(b){return b?"background:"+a[d.CL._cssCounter++%a.length]+";"+e:""}}()},function(a,b,c){a.exports=c(11)},function(a,b,c){(function(){function h(){return{keys:Object.keys||function(a){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError("keys() called on a non-object");var b,c=[];for(b in a)a.hasOwnProperty(b)&&(c[c.length]=b);return c},uniqueId:function(a){var b=++g+"";return a?a+b:b},has:function(a,b){return e.call(a,b)},each:function(a,b,c){if(a==null)return;if(d&&a.forEach===d)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++)b.call(c,a[e],e,a);else for(var g in a)this.has(a,g)&&b.call(c,a[g],g,a)},once:function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}}}var c=this,d=Array.prototype.forEach,e=Object.prototype.hasOwnProperty,f=Array.prototype.slice,g=0,i=h(),j;j={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!l(this,"once",a,[b,c])||!b)return this;var d=this,e=i.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,h,j,k,m;if(!this._events||!l(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:i.keys(this._events);for(h=0,j=g.length;h<j;h++){a=g[h];if(f=this._events[a]){this._events[a]=d=[];if(b||c)for(k=0,m=f.length;k<m;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}}return this},trigger:function(a){if(!this._events)return this;var b=f.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;typeof b=="object"&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}};var k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if(typeof c=="object"){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){var f=c.split(k);for(var g=0,h=f.length;g<h;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b)}},n={listenTo:"on",listenToOnce:"once"};i.each(n,function(a,b){j[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=i.uniqueId("l"));return e[f]=b,typeof c=="object"&&(d=this),b[a](c,d,this),this}}),j.bind=j.on,j.unbind=j.off,j.mixin=function(a){var b=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return i.each(b,function(b){a[b]=this[b]},this),a},typeof a!="undefined"&&a.exports&&(b=a.exports=j),b.BackboneEvents=j})(this)},function(a,b){var c={getUrlParams:function(a){var b={},c=a.indexOf("?");return c>-1&&a.substr(c+1).split("&").forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b},getUrlHost:function(a){var b=a.split("//"),c;return b[0]===a?c=b[0].split("/")[0]:c=b[1]?b[1].split("/")[0]:"",c}};a.exports=c},function(a,b){function d(){function h(a){c.push(a),f.postMessage(d,"*")}function i(a){a.data===d&&(a.stopPropagation(),c.length>0&&c.shift()())}var a=window,b=a.document;if(!a.postMessage)return function(b){a.setTimeout(b,0)};var c=[],d="zero-timeout-message-"+Math.random(),e=b.createElement("iframe");e.style.display="none",e.src="",b.documentElement.appendChild(e);var f=e.contentWindow,g=f.document;return g.open(),g.write(""),g.close(),f.addEventListener("message",i,!0),h}var c={extend:function(a){var b=Array.prototype.slice.call(arguments,1);return b.forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},each:function(a,b,c){Object.keys(a).forEach(function(d){b.call(c||null,a[d],d)})},without:function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)},result:function(a){var b=a;return c.isFunction(b)&&(b=a()),b},isFunction:function(a){return typeof a=="function"},after:function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},isNull:function(a){return a===null},once:function(a){var b=!1,c;return function(){if(b)return c;b=!0,c=a.apply(this,arguments)}},setImmediate:function(){var a;return function(b){a||(a=d()),a(b)}}()};a.exports=c},function(a,b){var c={AAC:"aac",MP3:"mp3",OGG:"ogg",OPUS:"opus",WAV:"wav"};a.exports=c},function(a,b){var c={HTTP:"http",RTMP:"rtmp",HLS:"hls",PREVIEW:"preview"};a.exports=c},function(a,b,c){function g(a){return f.supportsMediaSourceExtensions()&&a.mediaSourceEnabled&&(f.isChrome()&&f.getChromeVersion()>=35||f.isFirefox()&&a.mseFirefox||f.isSafari()&&a.mseSafari)}function h(a){return function(b){var c=!1;switch(b){case e.PREVIEW:c=a.previewOnly&&f.supportsHTML5Audio();break;case e.RTMP:c=f.supportsFlash();break;case e.HTTP:c=f.supportsHTML5Audio()||f.supportsFlash();break;case e.HLS:c=g(a)}return c}}function i(a){return f.isSafari()||f.isFirefox()?[e.PREVIEW,e.HLS,e.HTTP,e.RTMP]:a}function j(a){a.protocols=i(a.protocols).filter(h(a))}var d,e=c(15),f=c(17);d={prioritizeAndFilter:j},a.exports=d},function(a,b){function e(a){return a.test(window.navigator.userAgent.toLowerCase())}function f(a,b){try{return window.navigator.userAgent.toLowerCase().match(a)[b]}catch(c){return null}}function g(){try{return parseInt(f(/chrom(e|ium)\/([0-9]+)\./,2),10)}catch(a){return NaN}}function h(){return!n()&&!l()&&e(/safari/)}function i(){return h()&&e(/version\/7\.1/)}function j(){return h()&&e(/version\/8/)&&!e(/version\/80/)}function k(){return h()&&e(/version\/9\./)}function l(){return!n()&&e(/chrom(e|ium)/)}function m(){return e(/firefox/)}function n(){return e(/edge/)}function o(){return n()&&e(/windows\snt/)}function p(){return n()&&e(/windows\sphone/)}function q(){return!!window.MediaSource&&(window.MediaSource.isTypeSupported("audio/mpeg")||window.MediaSource.isTypeSupported("audio/mp4"))}function r(){try{return window.hasOwnProperty("Audio")&&!!(new window.Audio).canPlayType("audio/mpeg")}catch(a){return!1}}function s(){try{var a=h()&&e(/version\/5\.0/),b=window.hasOwnProperty("Audio")&&(!!(new window.Audio).canPlayType('audio/x-mpegURL; codecs="mp3"')||!!(new window.Audio).canPlayType('vnd.apple.mpegURL; codecs="mp3"'));return!a&&b}catch(c){return!1}}function t(){return v(u())>=d}function u(){var a,b,c,d;if(typeof window.ActiveXObject!="undefined")try{d=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d&&(a=d.GetVariable("$version"))}catch(e){a=null}else window.navigator&&window.navigator.plugins&&window.navigator.plugins.length>0&&(c="application/x-shockwave-flash",b=window.navigator.mimeTypes,b&&b[c]&&b[c].enabledPlugin&&b[c].enabledPlugin.description&&(a=b[c].enabledPlugin.description));return a}function v(a){if(!a)return 0;var b=a.match(/\d\S+/)[0].replace(/,/g,".").split(".");return parseFloat([b[0],b[1]].join("."))||0}var c,d=9;c={flashPlugin:u,isSafari:h,isSafari71:i,isSafari8:j,isSafari9:k,isChrome:l,getChromeVersion:g,isFirefox:m,isEdge:n,isEdgeDesktop:o,isEdgeMobile:p,supportsNativeHLSAudio:s,supportsHTML5Audio:r,supportsFlash:t,supportsMediaSourceExtensions:q},a.exports=c},function(a,b,c){function k(a){var b=g.getUrlHost(a);return i.every(function(a){return b.indexOf(a)!==0})}function l(a,b){return a!==e.HLS||!!k(b)}function m(a,b){if(!a)return!1;var c=a.issuedAt+n(a.protocol,a.duration);return o(a.protocol)?Date.now()+a.duration-(b||0)<c:Date.now()<c}function n(a,b){var c=o(a);return j+(c?f.result(b):0)}function o(a){return a===e.HTTP||a===e.HLS}function p(a,b){function s(a){return a*-1}function t(a,b){return Math.abs(b-d)-Math.abs(a-d)}var c={},d=b.maxBitrate,e=b.protocols,g=b.extensions,h,i,j,k,m,n,o,p,q,r;f.each(a,function(a,b){var d=b.split("_"),e=d[0],f=d[1],g=d[2];c[e]=c[e]||{},c[e][f]=c[e][f]||{},c[e][f][g]=a});for(m=0,n=e.length;m<n;++m){k=e[m];for(p=0,q=g.length;p<q;++p){o=g[p];if(c[k]&&c[k][o]){h=Object.keys(c[k][o]).map(Number).sort(s),i=d===Infinity,j=d===-Infinity,i||j?d=h[i?"pop":"shift"]():d=h.sort(t).pop(),r=c[k][o][d];if(!l(k,r))continue;return{url:r,bitrate:d,protocol:k,extension:o,issuedAt:Date.now(),duration:f.result(b.duration)}}}}return null}var d,e=c(15),f=c(13),g=c(12),h=.9,i=[],j=Math.floor(12e4*h);d={choosePreferredStream:p,streamValidForPlayingFrom:m},a.exports=d},function(a,b,c){var d,e,f=c(7),g=c(13),h=g.extend,i=g.setImmediate,j={Linear:0,EaseOut:1,EaseInOut:2};a.exports=d={},d.VolumeAutomator=e=function(a){this.scAudio=a,this.fadeOutAlgo=this.options().fadeOutAlgo,this.fadeOutActive=!1,this.initialVolume=undefined;if(!e.isSupported())return;var b=this.options();["fadeOutDurationOnPause","fadeOutDurationOnFinish","fadeOutDurationOnConcurrentStreaming"].forEach(function(a){typeof b[a]!="number"&&(b[a]=0)}),this.scAudio.registerHook("pause",this.hookPause.bind(this)),this.scAudio.on(f.TIME,this.onTime,this),this.scAudio.on(f.PLAY_RESUME,this.onPlay,this)},d.VolumeAutomator.isSupported=function(){var a=new window.Audio,b=a.volume,c=b===0?1:b/2;return a.volume=c,a.volume===c},d.VolumeAutomator.Algos=j,h(e.prototype,{options:function(){return this.scAudio.options},doFadeOut:function(a,b,c){this.fadeOutActive=!0;var d=Date.now()-(c||0),e=function(){if(!this.fadeOutActive)return;var c=(Date.now()-d)/b,f,g=this.initialVolume;if(c>=1)a&&this.scAudio.callPauseOnController(),this.cancelFadeout();else{switch(this.fadeOutAlgo){case j.Linear:f=g*(1-c);break;case j.EaseOut:f=g*(1/((c+.1)*10)-.05);break;case j.EaseInOut:default:f=g*(Math.cos(c*Math.PI)/2+.5)}this.scAudio.setVolume(f),i(e)}}.bind(this);this.initialVolume=this.scAudio.getVolume(),e()},cancelFadeout:function(){if(!this.fadeOutActive)return;this.fadeOutActive=!1,this.scAudio.setVolume(this.initialVolume),this.initialVolume=undefined},isFadeOutEnabled:function(){return this.options().fadeOutDurationOnConcurrentStreaming||this.options().fadeOutDurationOnPause||this.options().fadeOutDurationOnFinish},hookPause:function(a){return this.options().fadeOutDurationOnConcurrentStreaming&&a.pause_reason==="concurrent_streaming"?(this.doFadeOut(!0,this.options().fadeOutDurationOnConcurrentStreaming),!1):this.options().fadeOutDurationOnPause?(this.doFadeOut(!0,this.options().fadeOutDurationOnPause),!1):!0},onPlay:function(){if(!this.isFadeOutEnabled())return;this.cancelFadeout()},onTime:function(){if(!this.options().fadeOutDurationOnFinish)return;var a=this.scAudio.currentTime(),b=this.scAudio.duration(),c=this.options().fadeOutDurationOnFinish;!this.fadeOutActive&&a+c>=b&&this.doFadeOut(!1,c,a+c-b)}})}])}),
define("lib/helpers/a11y-helper",["require","exports","module","vendor/handlebars-runtime"],function(a,b,c){var d=a("vendor/handlebars-runtime"),e=c.exports={getAccessibleMarkup:function(a){return'<span class="sc-visuallyhidden">'+d.Utils.escapeExpression(a.screenreader)+"</span>"+(a.visible?'<span aria-hidden="true">'+d.Utils.escapeExpression(a.visible)+"</span>":"")}}}),
define("lib/helpers/number-helper",["require","exports","module"],function(a,b,c){function e(a){var b=a<100?10:1;return Math.floor(a*b)/b}var d=c.exports={format:function(a){return typeof a!="number"&&(a=parseInt(a,10)),a!==a?"":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},shorten:function(a){var b=1e3,c;return[{limit:Math.pow(b,1),unit:""},{limit:Math.pow(b,2),unit:"K"},{limit:Math.pow(b,3),unit:"M"},{limit:Math.pow(b,4),unit:"B"}].some(function(d){return a<d.limit&&(c=e(a/(d.limit/b))+d.unit),!!c}),c}}}),
define("lib/helpers/image-helper",["require","exports","module","lib/helpers/name-helper","_","lib/math","lib/browser","lib/support","lib/html-helper"],function(a,b,c){function s(a){var b,c,d;return l.lastIndex=0,b=a.replace(l,function(a,b,f,g,h){return e.find(n,function(a,b){if(a[1]===h)return c=b,!0}),d=b,f}),d?{index:c,key:parseInt(b,10),type:d}:null}function t(a,b){var c=e.find(n,function(a){return a[0]>=b})||e.last(n);return c[1]==="t20x20"&&a==="artworks"?"tiny":c[1]}function u(a){l.lastIndex=0;var b=l.exec(a),c;return b&&(c=b[3].charCodeAt(0)%4+1,c!==1&&(a=a.replace("//i1.","//i"+c+"."))),a}function v(a){m[a.type]||(m[a.type]={}),m[a.type][a.key]|=1<<a.index}var d=a("lib/helpers/name-helper"),e=a("_"),f=a("lib/math"),g=a("lib/browser"),h=a("lib/support"),i=a("lib/html-helper"),j,k=/default/,l=/^.*\/([a-z0-9]+)-0*([a-z0-9]+)-([a-z0-9]+)-([a-z0-9]+)\.jpg.*$/i,m={},n=[[20,"t20x20"],[50,"t50x50"],[120,"t120x120"],[200,"t200x200"],[500,"t500x500"]],o=["alt","class","height","src","title","width"],p={whitelist:["style","title","class","aria-label","aria-role","aria-hidden"],closingTag:!0},q={cloud:{40:"/player/assets/images/default/cloudx40-d1068b51.png",50:"/player/assets/images/default/cloudx50-d1068b51.png",80:"/player/assets/images/default/cloudx80-d1068b51.png",120:"/player/assets/images/default/cloudx120-d1068b51.png",200:"/player/assets/images/default/cloudx200-d1068b51.png",500:"/player/assets/images/default/cloudx500-d1068b51.png"},group:{40:"/player/assets/images/default/groupx40-377f1b9e.png",50:"/player/assets/images/default/groupx50-377f1b9e.png",80:"/player/assets/images/default/groupx80-377f1b9e.png",120:"/player/assets/images/default/groupx120-377f1b9e.png",200:"/player/assets/images/default/groupx200-377f1b9e.png",500:"/player/assets/images/default/groupx500-3d2db348.png"},user:{40:"/player/assets/images/default/userx40-377f1b9e.png",50:"/player/assets/images/default/userx50-377f1b9e.png",80:"/player/assets/images/default/userx80-377f1b9e.png",120:"/player/assets/images/default/userx120-377f1b9e.png",200:"/player/assets/images/default/userx200-377f1b9e.png",500:"/player/assets/images/default/userx500-3d2db348.png"}},r=c.exports={load:function(a,b){var c=new Image,d=$.Deferred();return $(c).on("load",function(){d.resolve(c)}).on("error",function(){d.reject(c)}),b&&h.corsImg&&(c.crossOrigin=!0),c.src=a,d},isLoaded:function(a){return!!(a.complete&&a.width&&a.height)},markup:function(a,b){var c,d,f,g;return a&&a.attributes&&(a=a.attributes),c=b.src||this.urlFrom(a,b.size),c=this.isDefaultImage(c)?null:"url("+c+")",g=b.placeholderId||a,f=b.stretch?"100%":b.size+"px",d=e.extend({style:{"background-image":c,width:f,height:f},"class":"sc-artwork "+this.getPlaceholderClass(g)+" "+(b.class||""),"aria-label":this.getAltText(a),"aria-role":"img"},e.omit(b,"stretch","size","class")),i.getMarkup("span",d,p)},getMarkup:function(a){var b=[],c;return e.each(a,function(a,c){e.indexOf(o,c)!==-1&&b.push(c+'="'+a+'"')}),c=s(a.src),c&&v(c),"<img "+b.join(" ")+">"},getAltText:function(a){return a.username?d.get(a,!0)+" avatar":d.get(a)},getPlaceholderUrl:function(a,b){var c,d,f,g,h;f=s(r.setFormat(a,b));if(f){c=f.key,m[f.type]||(m[f.type]={});if(m[f.type][c]){d=e.find(n,function(a,c){return h=c,b<=a[0]});while(h>=0){if(m[f.type][c]&1<<h){g=n[h];break}--h}}if(d&&g===d)return!1;if(g)return r.setFormat(a,g[0])}return null},urlFrom:function(a,b){var c=a&&(a.artwork_url||a.avatar_url||a.user&&a.user.avatar_url)||"";return b&&g.isHiDPI&&(b*=2),r.isDefaultImage(c)?c:(c=u(c).replace(/^https?\:\/\//,"//"),b?r.setFormat(c,b):c)},isDefaultImage:function(a){return!a||k.test(a)},getDefaultImage:function(a,b){return(q[a]||q.cloud)[j(b)]},setFormat:function(a,b,c){if(this.isDefaultImage(a))return"";l.lastIndex=0;var d=l.exec(a);if(d){var e=d[1],f=d[4],g=t(e,b);return g&&(a=a.replace(f,g)),c?u(a):a}return a},flagCachedImage:function(a){var b=s(a);b&&v(b)},getMainColor:function(a,b){var c=a.data,d=c.length,e={},g=0,h=1,i=d/4,j,k,l;b=f.clamp(b||0,h,i);for(l=0;l<d;l+=b*4)k=[c[l],c[l+1],c[l+2]],k=k.join(","),e[k]=e.hasOwnProperty(k)?++e[k]:1;for(k in e)if(e.hasOwnProperty(k)){if(e[k]<g)continue;g=e[k],j=k}return j?j.split(",").map(function(a){return parseInt(a,10)}):null},getPlaceholderClass:function(a){var b=12,c=typeof a=="number"?a:a&&a.id||0;return"sc-artwork-placeholder-"+c%b}};j=function(){var a=Object.keys(q.cloud),b;return a.sort(function(a,b){return a-b}),b=e.last(a),e.memoize(function(c){var d,e;for(d=0;e=a[d];++d)if(e>=c)return e;return b})}()}),
define("lib/helpers/i18n-helper",["require","exports","module"],function(a,b,c){var d=/\r?\n/g,e=/\s+/g;c.exports={cleanBlockText:function(a){return a.trim().replace(d," ").replace(e," ")}}}),
define("vendor/usertext/usertext",["require","exports","module"],function(a,b,c){(function(){var a,b,d,e,f,g,h,i=/\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,<>?«»“”‘’])/ig,j=/([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})/gi,k=/(\s|[^\w]|^)@([\w\-]+)/g,l=/\{\{\b((?:https?:\/\/|www\d{0,3}\.|(?:[a-z0-9\-]+\.)+[a-z]{2,4}\/)\S*[^\s`!()\[\]{};:'".,<>?«»“”‘’])\}\}/ig,m=/\{\{(?:mailto:)?([a-z0-9._%+\-]+@[a-z0-9.\-]+\.[a-z]{2,6})\}\}/gi,n=/\{\{@([\w\-]+)\}\}/gi,o=/^((?:https?:\/\/)?(?:www\.|m\.)?soundcloud\.(?:com|dev))\/?/i,p=/^(?:ht|f)tps?:\/\//i,q=/(?:[ \t]*\r?\n[ \t]*){2,}/,r=/[ \t][ \t]+/g;b={paragraphs:!0,links:!0,externalLinks:!0,internalLinks:!0,userLinks:!0,whitelist:["b","i","em"],internalLinksBaseUrl:"/",isOpeningNewWindow:!1,maxLength:null},d=function(a){var b,c,d,e,f,g;f=[].slice.call(arguments,1);for(b=0,c=f.length;b<c;++b){e=f[b];for(g in e)e[g]!==d&&(a[g]=e[g])}return a},e=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},f=function(a){return a.textContent||a.innerText||""},h=function s(a,b){b(a),a=a.firstChild;while(a)s(a,b),a=a.nextSibling},g=function(a,b){if(a.length<b)return a;var c=document.createElement("div"),d,e;return d=function(a){if(b>0){var c=a.data.length;b-=c,b<=0&&(a.data=a.substringData(0,a.data.length+b))}else a.data=""},e=function(a,c){var d=a.firstChild,f;do d.nodeType===3?c(d):d.nodeType===1&&e(d,c);while((d=d.nextSibling)&&b>0);while(d)f=d,d=d.nextSibling,a.removeChild(f)},c.innerHTML=a,e(c,d),c.innerHTML===a?c.innerHTML:c.innerHTML+"&hellip;"},a=function(a,c){var f=d({},b,c),s,t,u=document.createElement("div");if(typeof a!="string")return"";f.links?!f.userLinks&&!f.internalLinks&&!f.externalLinks?f.links=!1:f.whitelist.push("a"):f.userLinks=f.internalLinks=f.externalLinks=!1,i.lastIndex=k.lastIndex=j.lastIndex=0,a=a.replace(/<\/p>/g,"\n\n").replace(/<br\s*\/?>/g,"\n").replace(r," "),f.whitelist&&f.whitelist.length&&(a=a.replace(new RegExp("<(?!\\s*\\/?("+f.whitelist.join("|")+")\\b)[^>]*>","ig"),"")),u.innerHTML=a,f.links&&h(u,function(a){a.nodeType===3&&a.parentNode.nodeName.toLowerCase()!=="a"&&(a.nodeValue=a.nodeValue.replace(i,"{{$1}}").replace(j,"{{mailto:$1}}").replace(k,"$1{{@$2}}"))}),a=u.innerHTML,f.links&&(a=a.replace(l,function(a,b){return f.internalLinks&&o.test(b)?'<a href="'+b.replace(o,f.internalLinksBaseUrl)+'">'+b+"</a>":f.externalLinks?'<a href="'+(p.test(b)?b:"http://"+b)+'" rel="nofollow" target="_blank">'+b+"</a>":b}).replace(m,'<a href="mailto:$1">$1</a>').replace(n,'@<a href="'+f.internalLinksBaseUrl+'$1"'+(f.isOpeningNewWindow?' target="_blank"':"")+">$1</a>")),f.maxLength&&(a=g(a,f.maxLength));if(f.paragraphs){a=a.split(q);for(s=0,t=a.length;s<t;s++)a[s]=e(a[s]),a[s]=a[s].replace(/\r?\n/g,"<br>"),a[s]="<p>"+a[s]+"</p>";a=a.join("")}else a=a.replace(/[\r\n]+/g," ").replace(r," ");return a},a.withDefaults=function(c){var e=d({},b,c);return function(b,c){var f=c?d({},e,c):e;return a.call(this,b,f)}},typeof c!="undefined"&&c.exports?c.exports=a:(global=function(){return this}(),global.SC=global.SC||{},global.SC.usertext=a)})()}),
define("lib/mixins/usage-counting",["require","exports","module","lib/mixin"],function(a,b,c){var d=a("lib/mixin"),e=c.exports=new d({onCleanup:null,onIncrement:null,onDecrement:null,after:{initialize:function(a){this._counts={},this._needsGC=!1,a=a||{},this._autoCleanup=!!a.autoCleanup,this.onCleanup=a.onCleanup,this.onIncrement=a.onIncrement,this.onDecrement=a.onDecrement},reset:function(){this._counts={},this._needsGC=!1},set:function(a,b){this._counts[a]||(this._counts[a]=1,this.onIncrement&&this.onIncrement(b,a,1))},unset:function(a){delete this._counts[a]}},before:{reset:function(){this.onCleanup&&this.forEach(this.onCleanup)}},countFor:function(a){return this._counts[a]||0},increment:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||0)+b,this.onIncrement&&this.onIncrement(this.get(a),a,b)):b<0&&this.decrement(a,-b)),this},decrement:function(a,b){return this.has(a)&&(b=typeof b=="number"?b:1,b>0?(this._counts[a]=(this._counts[a]||1)-b,this.onDecrement&&this.onDecrement(this.get(a),a,b),this._counts[a]<=0&&(this._needsGC=!0,this._autoCleanup&&this.cleanup())):b<0&&this.increment(a,-b)),this},cleanup:function(){var a,b=this.onCleanup;if(this._needsGC){for(a in this._counts)this._counts.hasOwnProperty(a)&&this._counts[a]===0&&(b&&b(this.get(a),a),this.unset(a));this._needsGC=!1}},changeKey:function(a,b){if(a===b)return;var c=this.get(a),d=this.countFor(a);this.unset(a),this.set(b,c),this.increment(b,d-1)}})}),
define("vendor/audiomanager/audiomanager.min",["require","exports","module"],function(a,b,c){c.exports=function(a){function b(d){if(c[d])return c[d].exports;var f=c[d]={exports:{},id:d,loaded:!1};return a[d].call(f.exports,f,f.exports,b),f.loaded=!0,f.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}(function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))switch(typeof a[b]){case"function":break;case"object":a[b]=function(b){var c=b.slice(1),d=a[b[0]];return function(a,b,e){d.apply(this,[a,b,e].concat(c))}}(a[b]);break;default:a[b]=a[a[b]]}return a}([function(a,b,c){var d,e=c(1),f=c(12),g=c(14),h=c(38),i=c(43),j=c(39),k=c(16),l=c(42),m=c(117),n=c(118);a.exports=d=function(a){a=a||{},this._players={},this._volume=1,this._mute=!1,this.States=h,this.Errors=i,this._settings=f({},a,d.defaults)},d.MimeTypes=n,d.Protocols=m,d.Events=j,d.States=h,d.Errors=i,d.BrowserUtils=k,d.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:50,bufferTime:8e3,maxBufferTime:9e4,bufferingDelay:500,streamUrlProvider:null,debug:!1},d.capabilities=l.names,d.createDefaultMediaDescriptor=function(a,b,c){if(!a||!b||!b.length)throw new Error("invalid input to create media descriptor");return c||(c=0),{id:a,src:b,duration:c,forceSingle:!1,forceFlash:!1,forceHTML5:!1,forceCustomHLS:!1,mimeType:void 0}},d.prototype.getAudioPlayer=function(a){return this._players[a]},d.prototype.hasAudioPlayer=function(a){return void 0!==this._players[a]},d.prototype.removeAudioPlayer=function(a){this.hasAudioPlayer(a)&&delete this._players[a]},d.prototype.setVolume=function(a){a=Math.min(1,a),this._volume=Math.max(0,a);for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setVolume(this._volume)},d.prototype.getVolume=function(){return this._volume},d.prototype.setMute=function(a){this._muted=a;for(var b in this._players)this._players.hasOwnProperty(b)&&this._players[b].setMute(this._muted)},d.prototype.getMute=function(){return this._muted},d.prototype.createAudioPlayer=function(a,b){var c,d=e({},this._settings,b);if(!a)throw"AudioManager: No media descriptor object passed, can`t build any player";if(a.id||(a.id=Math.floor(1e10*Math.random()).toString()+(new Date).getTime().toString()),!a.src)throw new Error("AudioManager: You need to pass a valid media source URL");if(!this._players[a.id]){if(c=g.createAudioPlayer(a,d),!c)throw new Error("AudioManager: No player could be created from the given descriptor");this._players[a.id]=c}return this._players[a.id].setVolume(this._volume),this._players[a.id].setMute(this._muted),this._players[a.id].on(j.STATE_CHANGE,this._onStateChange,this),this._players[a.id]},d.prototype._onStateChange=function(a,b){b.getState()===h.DEAD&&this.removeAudioPlayer(b.getId())}},function(a,b,c){function d(a,b,c){for(var d=-1,e=g(b),f=e.length;++d<f;){var h=e[d],i=a[h],j=c(i,b[h],h,a,b);(j===j?j===i:i!==i)&&(void 0!==i||h in a)||(a[h]=j)}return a}var e=c(2),f=c(8),g=c(4),h=f(function(a,b,c){return c?d(a,b,c):e(a,b)});a.exports=h},[119,3,4],function(a,b){function c(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}a.exports=c},[120,5,6,7],function(a,b){function c(a){return!!a&&"object"==typeof a}function d(a,b){var c=null==a?void 0:a[b];return g(c)?c:void 0}function e(a){return f(a)&&m.call(a)==h}function f(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function g(a){return null==a?!1:e(a)?n.test(k.call(a)):c(a)&&i.test(a)}var h="[object Function]",i=/^\[object .+?Constructor\]$/,j=Object.prototype,k=Function.prototype.toString,l=j.hasOwnProperty,m=j.toString,n=RegExp("^"+k.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=d},function(a,b){function c(a){return!!a&&"object"==typeof a}function d(a){return function(b){return null==b?void 0:b[a]}}function e(a){return null!=a&&f(l(a))}function f(a){return"number"==typeof a&&a>-1&&a%1==0&&k>=a}function g(a){return c(a)&&e(a)&&i.call(a,"callee")&&!j.call(a,"callee")}var h=Object.prototype,i=h.hasOwnProperty,j=h.propertyIsEnumerable,k=9007199254740991,l=d("length");a.exports=g},function(a,b){function c(a){return!!a&&"object"==typeof a}function d(a,b){var c=null==a?void 0:a[b];return h(c)?c:void 0}function e(a){return"number"==typeof a&&a>-1&&a%1==0&&r>=a}function f(a){return g(a)&&o.call(a)==j}function g(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function h(a){return null==a?!1:f(a)?p.test(m.call(a)):c(a)&&k.test(a)}var i="[object Array]",j="[object Function]",k=/^\[object .+?Constructor\]$/,l=Object.prototype,m=Function.prototype.toString,n=l.hasOwnProperty,o=l.toString,p=RegExp("^"+m.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=d(Array,"isArray"),r=9007199254740991,s=q||function(a){return c(a)&&e(a.length)&&o.call(a)==i};a.exports=s},function(a,b,c){function d(a){return g(function(b,c){var d=-1,g=null==b?0:c.length,h=g>2?c[g-2]:void 0,j=g>2?c[2]:void 0,k=g>1?c[g-1]:void 0;for("function"==typeof h?(h=e(h,k,5),g-=2):(h="function"==typeof k?k:void 0,g-=h?1:0),j&&f(c[0],c[1],j)&&(h=3>g?void 0:h,g=1);++d<g;){var l=c[d];l&&a(b,l,h)}return b})}var e=c(9),f=c(10),g=c(11);a.exports=d},function(a,b){function c(a,b,c){if("function"!=typeof a)return d;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,f){return a.call(b,c,d,f)};case 4:return function(c,d,f,g){return a.call(b,c,d,f,g)};case 5:return function(c,d,f,g,h){return a.call(b,c,d,f,g,h)}}return function(){return a.apply(b,arguments)}}function d(a){return a}a.exports=c},function(a,b){function c(a){return function(b){return null==b?void 0:b[a]}}function d(a){return null!=a&&g(k(a))}function e(a,b){return a="number"==typeof a||i.test(a)?+a:-1,b=null==b?j:b,a>-1&&a%1==0&&b>a}function f(a,b,c){if(!h(c))return!1;var f=typeof b;if("number"==f?d(c)&&e(b,c.length):"string"==f&&b in c){var g=c[b];return a===a?a===g:g!==g}return!1}function g(a){return"number"==typeof a&&a>-1&&a%1==0&&j>=a}function h(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var i=/^\d+$/,j=9007199254740991,k=c("length");a.exports=f},function(a,b){function c(a,b){if("function"!=typeof a)throw new TypeError(d);return b=e(void 0===b?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,f=e(c.length-b,0),g=Array(f);++d<f;)g[d]=c[b+d];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,c[0],g);case 2:return a.call(this,c[0],c[1],g)}var h=Array(b+1);for(d=-1;++d<b;)h[d]=c[d];return h[b]=g,a.apply(this,h)}}var d="Expected a function",e=Math.max;a.exports=c},function(a,b,c){function d(a,b){return void 0===a?b:a}function e(a,b){return g(function(c){var d=c[0];return null==d?d:(c.push(b),a.apply(void 0,c))})}var f=c(1),g=c(13),h=e(f,d);a.exports=h},11,function(a,b,c){a.exports=c(15)},function(a,b,c){var d,e=c(16),f=c(17),g=c(45),h=c(49),i=c(46),j=c(48),k=c(50),l=c(118);a.exports=d=function(){},d.createAudioPlayer=function(a,b){var c;if(c=a.src.split(":")[0],("rtmp"===c||"rtmpt"===c||a.forceFlash)&&!a.forceHTML5)return new f(a,b);if(a.mimeType=d.getMimeType(a),a.mimeType===l.M3U8){if(e.isMSESupportMPEG()||e.isMSESupportMP4())return new k(a,b);if(e.isNativeHlsSupported()&&!a.forceCustomHLS)return e.isMobile()||a.forceSingle?new h(a,b):new g(a,b)}else{if(e.supportHTML5Audio()&&e.canPlayType(a.mimeType)||a.forceHTML5)return e.isMobile()||a.forceSingle?new j(a,b):new i(a,b);if(a.mimeType===l.MP3)return new f(a,b)}return null},d.getMimeType=function(a){if(a.mimeType)return a.mimeType;var b=a.src.split("?")[0];return b=b.substring(b.lastIndexOf(".")+1,b.length),l.getTypeByExtension(b)}},function(a,b){function c(){return!!window.MediaSource||!!window.WebKitMediaSource}a.exports={supportHTML5Audio:function(){var a;try{if(window.HTMLAudioElement&&"undefined"!=typeof Audio)return a=new Audio,!0}catch(b){return!1}},createAudioElement:function(){var a=document.createElement("audio");return a.setAttribute("msAudioCategory","BackgroundCapableMedia"),a.mozAudioChannelType="content",a},isMobile:function(a){var b=window.navigator.userAgent,c=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return c.some(function(a){return a=new RegExp(a,"i"),a.test(b)})},isIE10Mobile:function(){return/IEmobile\/10\.0/gi.test(navigator.userAgent)},canPlayType:function(a){var b=document.createElement("audio");return b&&b.canPlayType&&b.canPlayType(a).match(/maybe|probably/i)?!0:!1},isNativeHlsSupported:function(){var a,b,c,d=navigator.userAgent,e=["iPhone","iPad","iPod"];return a=function(a){return a.test(d)},b=!a(/chrome/i)&&!a(/opera/i)&&a(/safari/i),c=e.some(function(b){return a(new RegExp(b,"i"))}),c||b},isMSESupported:c,isMSESupportMPEG:function(){return c()&&MediaSource.isTypeSupported("audio/mpeg")},isMSESupportMP4:function(){return c()&&MediaSource.isTypeSupported("audio/mp4")},isOnLine:function(){return window.navigator.onLine!==!1}}},function(a,b,c){function d(a,b){h.call(this,"FlashAudioProxy",a,b),d.players[a.id]=this,this._errorMessage=null,this._errorID=null,this._volume=1,this._muted=!1,d.creatingFlashAudio||(d.flashAudio?this._createFlashAudio():d.createFlashObject(b))}var e=c(1),f=c(18),g=c(29),h=c(35),i=c(39),j=c(43),k=c(38),l=c(44);a.exports=d,e(d.prototype,h.prototype),d.players={},d.createFlashObject=function(a){d.creatingFlashAudio=!0,d.containerElement=document.createElement("div"),d.containerElement.setAttribute("id",a.flashObjectID+"-container"),d.flashElementTarget=document.createElement("div"),d.flashElementTarget.setAttribute("id",a.flashObjectID+"-target"),d.containerElement.appendChild(d.flashElementTarget),document.body.appendChild(d.containerElement);var b=function(b){if(b.success)d.flashAudio=document.getElementById(a.flashObjectID),window.setTimeout(function(){if(d.flashAudio&&!("PercentLoaded"in d.flashAudio))for(var a in d.players)d.players.hasOwnProperty(a)&&(d.players[a]._errorID=j.FLASH_PROXY_FLASH_BLOCKED,d.players[a]._errorMessage="Flash object blocked",d.players[a]._setState(k.ERROR),d.players[a]._logger.type=d.players[a].getType(),d.players[a]._logger.log(d.players[a]._errorMessage))},a.flashLoadTimeout),d.flashAudio.triggerEvent=function(a,b){d.players[a]._triggerEvent(b)},d.flashAudio.onPositionChange=function(a,b,c,e){d.players[a]._onPositionChange(b,c,e)},d.flashAudio.onDebug=function(a,b,c){d.players[a]._logger.type=b,d.players[a]._logger.log(c)},d.flashAudio.onStateChange=function(a,b){d.players[a]._setState(b),b===k.DEAD&&delete d.players[a]},d.flashAudio.onInit=function(a){d.creatingFlashAudio=!1,f(g(d.players),"_createFlashAudio")};else for(var c in d.players)d.players.hasOwnProperty(c)&&(d.players[c]._errorID=j.FLASH_PROXY_CANT_LOAD_FLASH,d.players[c]._errorMessage="Cannot create flash object",d.players[c]._setState(k.ERROR))};document.getElementById(a.flashObjectID)||l.embedSWF(a.flashAudioPath,a.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(a))},{allowscriptaccess:"always"},{id:a.flashObjectID,tabIndex:"-1"},b)},d._ready=function(){return d.flashAudio&&!d.creatingFlashAudio},d.prototype._createFlashAudio=function(){d.flashAudio.createAudio(this.getDescriptor()),this._state=d.flashAudio.getState(this.getId()),this.setVolume(this._volume),this.setMute(this._muted)},d.prototype._triggerEvent=function(a){this._logger.log("Flash element triggered event: "+a),this.trigger(a,this)},d.prototype._setState=function(a){this._state!==a&&(this._state=a,this.trigger(i.STATE_CHANGE,a,this))},d.prototype._onPositionChange=function(a,b,c){this.trigger(i.POSITION_CHANGE,a,b,c,this)},d.prototype.getType=function(){return d._ready()?d.flashAudio.getType(this.getId()):this._type},d.prototype.getContainerElement=function(){return d.containerElement},d.prototype.play=function(a){if(d._ready()){if(this.getState()===k.PAUSED)return void this.resume();a=void 0===a?0:a,d.flashAudio.playAudio(this.getId(),a)}},d.prototype.pause=function(){d._ready()&&d.flashAudio.pauseAudio(this.getId())},d.prototype.seek=function(a){d._ready()&&d.flashAudio.seekAudio(this.getId(),a)},d.prototype.resume=function(){d._ready()&&d.flashAudio.resumeAudio(this.getId())},d.prototype.setVolume=function(a){this._volume=a,d._ready()&&d.flashAudio.setVolume(this.getId(),a)},d.prototype.getVolume=function(){return d._ready()?d.flashAudio.getVolume(this.getId()):this._volume},d.prototype.setMute=function(a){this._muted=a,d._ready()&&d.flashAudio.setMute(this.getId(),a)},d.prototype.getMute=function(){return d._ready()?d.flashAudio.getMute(this.getId()):this._muted},d.prototype.getState=function(){return this._state},d.prototype.getCurrentPosition=function(){return d._ready()?d.flashAudio.getCurrentPosition(this.getId()):0},d.prototype.getLoadedPosition=function(){return d._ready()?d.flashAudio.getLoadedPosition(this.getId()):0},d.prototype.getDuration=function(){return d._ready()?d.flashAudio.getDuration(this.getId()):0},d.prototype.kill=function(){return d._ready()?void d.flashAudio.killAudio(this.getId()):0},d.prototype.getErrorMessage=function(){return this._errorMessage?this._errorMessage:d.flashAudio.getErrorMessage(this.getId())},d.prototype.getErrorID=function(){return this._errorID?this._errorID:d.flashAudio.getErrorID(this.getId())},d.prototype.getLevelNum=function(){return d._ready()?d.flashAudio.getLevelNum(this.getId()):0},d.prototype.getLevel=function(){return d._ready()?d.flashAudio.getLevel(this.getId()):0},d.prototype.setLevel=function(a){return d._ready()?d.flashAudio.setLevel(this.getId(),a):0}},function(a,b,c){function d(a){return function(b){return null==b?void 0:b[a]}}function e(a){return null!=a&&g(q(a))}function f(a,b){var c=typeof a;if("string"==c&&o.test(a)||"number"==c)return!0;if(l(a))return!1;var d=!n.test(a);return d||null!=b&&a in h(b)}function g(a){return"number"==typeof a&&a>-1&&a%1==0&&p>=a}function h(a){return i(a)?a:Object(a)}function i(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var j=c(19),k=c(24),l=c(23),m=c(28),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,o=/^\w*$/,p=9007199254740991,q=d("length"),r=m(function(a,b,c){var d=-1,g="function"==typeof b,h=f(b),i=e(a)?Array(a.length):[];return j(a,function(a){var e=g?b:h&&null!=a?a[b]:void 0;i[++d]=e?e.apply(a,c):k(a,b,c)}),i});a.exports=r},[121,20],[120,21,22,23],5,6,7,function(a,b,c){function d(a,b,c){null==a||e(b,a)||(b=k(b),a=1==b.length?a:i(a,j(b,0,-1)),b=g(b));var d=null==a?a:a[b];return null==d?void 0:d.apply(a,c)}function e(a,b){var c=typeof a;if("string"==c&&n.test(a)||"number"==c)return!0;if(l(a))return!1;var d=!m.test(a);return d||null!=b&&a in f(b)}function f(a){return h(a)?a:Object(a)}function g(a){var b=a?a.length:0;return b?a[b-1]:void 0}function h(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var i=c(25),j=c(26),k=c(27),l=c(23),m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,n=/^\w*$/;a.exports=d},function(a,b){function c(a,b,c){if(null!=a){void 0!==c&&c in d(a)&&(b=[c]);for(var e=0,f=b.length;null!=a&&f>e;)a=a[b[e++]];return e&&e==f?a:void 0}}function d(a){return e(a)?a:Object(a)}function e(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}a.exports=c},function(a,b){function c(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=void 0===c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}a.exports=c},function(a,b,c){function d(a){return null==a?"":a+""}function e(a){if(f(a))return a;var b=[];return d(a).replace(g,function(a,c,d,e){b.push(d?e.replace(h,"$1"):c||a)}),b}var f=c(23),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;a.exports=e},11,function(a,b,c){function d(a){return e(a,f(a))}var e=c(30),f=c(31);a.exports=d},function(a,b){function c(a,b){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a[b[c]];return e}a.exports=c},[120,32,33,34],5,6,7,function(a,b,c){function d(a,b,c,d){this._type=a,this._id=b.id,this._descriptor=b,this._settings=c,this._currentPosition=this._loadedPosition=this._duration=0,this._capabilities=e({},j.createDefaults(),d),this._logger=new i(this.getType(),this.getId(),b.title,c);try{j.validate(this.getCapabilities())}catch(f){return this.getLogger().log("Bad caps: "+f),void this.updateState(g.ERROR)}this.updateState(g.INITIALIZE)}var e=c(1),f=c(36),g=c(38),h=c(39),i=c(40),j=c(42);a.exports=d,e(d.prototype,f),d.prototype.canPlay=function(){return!1},d.prototype.getCapabilities=function(){return this._capabilities},d.prototype.getLogger=function(){return this._logger},d.prototype.getSettings=function(){return this._settings},d.prototype.getDescriptor=function(){return this._descriptor},d.prototype.getType=function(){return this._type},d.prototype.getId=function(){return this._id+""},d.prototype.beforeStateChange=function(a,b){return!0},d.prototype.notifyStateChange=function(a,b){return!0},d.prototype.afterStateChange=function(a,b){},d.prototype.updateState=function(a){var b=this._state;b!==a&&b!==g.DEAD&&this.beforeStateChange(b,a)&&(this._state=a,this._logger.log('state changed "'+this.getState()+'", position: '+this.getCurrentPosition()+", duration: "+this.getDuration()),this.notifyStateChange(b,a)&&this.trigger(h.STATE_CHANGE,a,this),this.afterStateChange(b,a))},d.prototype.getState=function(){return this._state},d.prototype._isInOneOfStates=function(){for(var a in arguments)if(arguments[a]===this.getState())return!0;return!1},d.prototype.getCurrentPosition=function(){return this._currentPosition},d.prototype.getLoadedPosition=function(){return this._loadedPosition},d.prototype.getDuration=function(){return this._duration},d.prototype._mediaHasProgressed=function(){var a=!1,b=Date.now();if(this._lastMediaClockCheck){var c=b-this._lastMediaClockCheck,d=this._currentPosition-this._lastMediaClockValue;if(.1*c>d){if(this.getState()===g.PLAYING&&0===d&&c<this._settings.bufferingDelay)return!0;a=!0}}return this._lastMediaClockValue=this._currentPosition,this._lastMediaClockCheck=b,!a}},function(a,b,c){a.exports=c(37)},function(a,b,c){!function(){function c(){return{keys:Object.keys||function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("keys() called on a non-object");var b,c=[];for(b in a)a.hasOwnProperty(b)&&(c[c.length]=b);return c},uniqueId:function(a){var b=++i+"";return a?a+b:b},has:function(a,b){return g.call(a,b)},each:function(a,b,c){if(null!=a)if(f&&a.forEach===f)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;e>d;d++)b.call(c,a[d],d,a);else for(var g in a)this.has(a,g)&&b.call(c,a[g],g,a)},once:function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}}}}var d,f=Array.prototype.forEach,g=Object.prototype.hasOwnProperty,h=Array.prototype.slice,i=0,j=c();d={on:function(a,b,c){if(!l(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!l(this,"once",a,[b,c])||!b)return this;var d=this,e=j.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,g,h,i,k,m;if(!this._events||!l(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:j.keys(this._events),h=0,i=g.length;i>h;h++)if(a=g[h],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,m=f.length;m>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=h.call(arguments,1);if(!l(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&m(c,b),d&&m(d,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}};var k=/\s+/,l=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(k.test(c)){for(var f=c.split(k),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},m=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},n={listenTo:"on",listenToOnce:"once"};j.each(n,function(a,b){d[b]=function(b,c,d){var e=this._listeners||(this._listeners={}),f=b._listenerId||(b._listenerId=j.uniqueId("l"));return e[f]=b,"object"==typeof c&&(d=this),b[a](c,d,this),this}}),d.bind=d.on,d.unbind=d.off,d.mixin=function(a){var b=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return j.each(b,function(b){a[b]=this[b]},this),a},"undefined"!=typeof a&&a.exports&&(b=a.exports=d),b.BackboneEvents=d}(this)},function(a,b){a.exports={PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"}},function(a,b){a.exports={POSITION_CHANGE:"position-change",STATE_CHANGE:"state-change",DATA:"data",NETWORK_TIMEOUT:"network-timeout",METADATA:"metadata"}},function(a,b,c){var d,e=c(41),f=null;a.exports=function(a,b,c,g){if(!d&&(d=e({enabled:!!g.debug,buffer:!0,label:"audiomanager"}),f)){var h=d;d=function(){h(f(arguments[0]+"%s",Array.prototype.slice.call(arguments,1)))}}return c=c&&c.length?" ["+c.replace(/\s/g,"").substr(0,6)+"]":"",{log:d.bind(null,"%s (%s)%s",a,b,c)}}},function(a,b){function c(){function a(a,c){if(n){for(var d=arguments.length,e=Array(d>2?d-2:0),f=2;d>f;f++)e[f-2]=arguments[f];"string"==typeof c?c=" "+c:(e.unshift(c),c="");var g=[b()+" | "+C+(z?"%c":"")+c].concat(D,e);r?B.push({level:a,logArgs:g})>y&&B.shift():m[a].apply(m,g)}}function b(){var a=new Date,b=null===A?0:a-A,c=z?"%c":"";return A=+a,c+d(a)+(c+" ("+c)+e("+"+b+"ms"," ",8)+(c+")")}function c(a){return a.enable=function(){n=!0},a.disable=function(){n=!1},a.bufferOn=function(){r=!0},a.bufferOff=function(){r=!1,B.length=0},a.flush=j()?function(){B.forEach(function(a){var b=a.level,c=a.logArgs;m[b].apply(m,c)}),B.length=0}:function(){},a}var f=k.apply(void 0,arguments),g=f.enabled,n=void 0===g?!0:g,q=f.buffer,r=void 0===q?!1:q,s=f.label,t=void 0===s?"":s,v=f.plainOutput,w=void 0===v?!1:v,x=f.bufferSize,y=void 0===x?1e3:x;if(!j())return c(l.reduce(function(a,b){return a[b]=a},function(){}));m.CL||(m.CL={_cssCounter:0});var z=!w&&i(),A=null,B=[],C=h(t,z),D=z?["color: green","color: grey","color: blue","color: grey",o(t),""]:[],E=m.CL[t]=c(l.reduce(function(b,c){return b[c]=a.bind(null,c),b},a.bind(null,"log")));return E}function d(a){return f(a.getHours())+":"+f(a.getMinutes())+":"+f(a.getSeconds())+"."+e(a.getMilliseconds(),"0",3)}function e(a,b,c){return g(b,c-(""+a).length)+a}function f(a){return e(a,"0",2)}function g(a,b){return b>0?(new Array(b+1)).join(a):""}function h(a,b){return(b?"%c":"")+(a?a:"")}function i(){if("undefined"==typeof navigator)return!1;var a=navigator.userAgent;return/chrome|firefox|opr/i.test(a)&&!/msie|edge/i.test(a)}function j(){return m&&l.every(function(a){return"function"==typeof m[a]})}function k(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],b=arguments.length<=1||void 0===arguments[1]?"":arguments[1];return"object"==typeof a&&a||{enabled:a,label:b}}"use strict",a.exports=c;var l=["log","info","warn","error"],m="undefined"!=typeof console?console:null,n=["color:#fff","border-radius:3px","padding:2px 4px","font-family:sans-serif","text-transform:uppercase","font-size:9px"].join(";")+";",o=function(){var a=["#51613C","#447848","#486E5F","#787444","#6E664E"];return function(b){return b?"background:"+a[m.CL._cssCounter++%a.length]+";"+n:""}}()},function(a,b){function c(a){for(var b in e)if(e.hasOwnProperty(b)&&void 0===a[e[b]])throw new Error("Caps lack required field: "+b);if(a[e.PROTOCOLS]instanceof Array){if(a[e.MIMETYPES]instanceof Array)return!0;throw new Error("Caps mimetypes must be an array")}throw new Error("Caps protocols must be an array")}function d(){var a={};return a[e.MIMETYPES]=[],a[e.PROTOCOLS]=[],a[e.AUDIO_ONLY]=!0,a[e.CAN_SEEK_ALWAYS]=!0,a[e.NEEDS_URL_REFRESH]=!0,a}var e={MIMETYPES:"mimetypes",PROTOCOLS:"protocols",AUDIO_ONLY:"audioOnly",CAN_SEEK_ALWAYS:"canSeekAlways",NEEDS_URL_REFRESH:"needsUrlRefresh"},f={createDefaults:d,names:e,validate:c};a.exports=f},function(a,b){a.exports={FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",GENERIC_AUDIO_ENDED_EARLY:"GENERIC_AUDIO_ENDED_EARLY",GENERIC_AUDIO_OVERRUN:"GENERIC_AUDIO_OVERRUN",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",MSE_BAD_OBJECT_STATE:"MSE_BAD_OBJECT_STATE",MSE_NOT_SUPPORTED:"MSE_NOT_SUPPORTED",MSE_MP3_NOT_SUPPORTED:"MSE_MP3_NOT_SUPPORTED",MSE_HLS_NOT_VALID_PLAYLIST:"MSE_HLS_NOT_VALID_PLAYLIST",MSE_HLS_PLAYLIST_NOT_FOUND:"MSE_HLS_PLAYLIST_NOT_FOUND",MSE_HLS_SEGMENT_NOT_FOUND:"MSE_HLS_SEGMENT_NOT_FOUND"}},function(a,b){function c(){if(!W&&document.getElementsByTagName("body")[0]){try{var a,b=t("span");b.style.display="none",a=P.getElementsByTagName("body")[0].appendChild(b),a.parentNode.removeChild(a),a=null,b=null}catch(c){return}W=!0;for(var d=S.length,e=0;d>e;e++)S[e]()}}function d(a){W?a():S[S.length]=a}function e(a){if(typeof O.addEventListener!=H)O.addEventListener("load",a,!1);else if(typeof P.addEventListener!=H)P.addEventListener("load",a,!1);else if(typeof O.attachEvent!=H)v(O,"onload",a);else if("function"==typeof O.onload){var b=O.onload;O.onload=function(){b(),a()}}else O.onload=a}function f(){var a=P.getElementsByTagName("body")[0],b=t(I);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",L);var c=a.appendChild(b);if(c){var d=0;!function e(){if(typeof c.GetVariable!=H)try{var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),$.pv=[u(f[0]),u(f[1]),u(f[2])])}catch(h){$.pv=[8,0,0]}else if(10>d)return d++,void window.setTimeout(e,10);a.removeChild(b),c=null,g()}()}else g()}function g(){var a=T.length;if(a>0)for(var b=0;a>b;b++){var c=T[b].id,d=T[b].callbackFn,e={success:!1,id:c};if($.pv[0]>0){var f=s(c);if(f)if(!w(T[b].swfVersion)||$.wk&&$.wk<312)if(T[b].expressInstall&&i()){var g={};g.data=T[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!==m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));j(g,l,c,d)}else k(f),d&&d(e);else y(c,!0),d&&(e.success=!0,e.ref=h(c),e.id=c,d(e))}else if(y(c,!0),d){var p=h(c);p&&typeof p.SetVariable!=H&&(e.success=!0,e.ref=p,e.id=p.id),d(e)}}}function h(a){var b=null,c=s(a);return c&&"OBJECT"===c.nodeName.toUpperCase()&&(b=typeof c.SetVariable!==H?c:c.getElementsByTagName(I)[0]||c),b}function i(){return!X&&w("6.0.65")&&($.win||$.mac)&&!($.wk&&$.wk<312)}function j(a,b,c,d){var e=s(c);if(c=r(c),X=!0,D=d||null,E={success:!1,id:c},e){"OBJECT"===e.nodeName.toUpperCase()?(B=l(e),C=null):(B=e,C=c),a.id=M,(typeof a.width==H||!/%$/.test(a.width)&&u(a.width)<310)&&(a.width="310"),(typeof a.height==H||!/%$/.test(a.height)&&u(a.height)<137)&&(a.height="137");var f=$.ie?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURIComponent(O.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(P.title.slice(0,47)+" - Flash Player Installation");if(typeof b.flashvars!=H?b.flashvars+="&"+g:b.flashvars=g,$.ie&&4!==e.readyState){var h=t("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",p(e)}n(a,b,c)}}function k(a){if($.ie&&4!==a.readyState){a.style.display="none";var b=t("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(l(a),b),p(a)}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=t("div");if($.win&&$.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(I)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1===d[f].nodeType&&"PARAM"===d[f].nodeName||8===d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function m(a,b){var c=t("div");return c.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+a+"'>"+b+"</object>",c.firstChild}function n(a,b,c){var d,e=s(c);if(c=r(c),$.wk&&$.wk<312)return d;if(e){var f,g,h,i=t($.ie?"div":I);typeof a.id==H&&(a.id=c);for(h in b)b.hasOwnProperty(h)&&"movie"!==h.toLowerCase()&&o(i,h,b[h]);$.ie&&(i=m(a.data,i.innerHTML));for(f in a)a.hasOwnProperty(f)&&(g=f.toLowerCase(),"styleclass"===g?i.setAttribute("class",a[f]):"classid"!==g&&"data"!==g&&i.setAttribute(f,a[f]));$.ie?U[U.length]=a.id:(i.setAttribute("type",L),i.setAttribute("data",a.data)),e.parentNode.replaceChild(i,e),d=i}return d}function o(a,b,c){var d=t("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function p(a){var b=s(a);b&&"OBJECT"===b.nodeName.toUpperCase()&&($.ie?(b.style.display="none",function c(){if(4===b.readyState){for(var a in b)"function"==typeof b[a]&&(b[a]=null);b.parentNode.removeChild(b)}else window.setTimeout(c,10)}()):b.parentNode.removeChild(b))}function q(a){return a&&a.nodeType&&1===a.nodeType}function r(a){return q(a)?a.id:a}function s(a){if(q(a))return a;var b=null;try{b=P.getElementById(a)}catch(c){}return b}function t(a){return P.createElement(a)}function u(a){return parseInt(a,10)}function v(a,b,c){a.attachEvent(b,c),V[V.length]=[a,b,c]}function w(a){a+="";var b=$.pv,c=a.split(".");return c[0]=u(c[0]),c[1]=u(c[1])||0,c[2]=u(c[2])||0,b[0]>c[0]||b[0]===c[0]&&b[1]>c[1]||b[0]===c[0]&&b[1]===c[1]&&b[2]>=c[2]?!0:!1}function x(a,b,c,d){var e=P.getElementsByTagName("head")[0];if(e){var f="string"==typeof c?c:"screen";if(d&&(F=null,G=null),!F||G!==f){var g=t("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),F=e.appendChild(g),$.ie&&typeof P.styleSheets!=H&&P.styleSheets.length>0&&(F=P.styleSheets[P.styleSheets.length-1]),G=f}F&&(typeof F.addRule!=H?F.addRule(a,b):typeof P.createTextNode!=H&&F.appendChild(P.createTextNode(a+" {"+b+"}")))}}function y(a,b){if(Y){var c=b?"visible":"hidden",d=s(a);W&&d?d.style.visibility=c:"string"==typeof a&&x("#"+a,"visibility:"+c)}}function z(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=H?encodeURIComponent(a):a}var A,B,C,D,E,F,G,H="undefined",I="object",J="Shockwave Flash",K="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",M="SWFObjectExprInst",N="onreadystatechange",O=window,P=document,Q=navigator,R=!1,S=[],T=[],U=[],V=[],W=!1,X=!1,Y=!0,Z=!1,$=function(){var a=typeof P.getElementById!=H&&typeof P.getElementsByTagName!=H&&typeof P.createElement!=H,b=Q.userAgent.toLowerCase(),c=Q.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g="Microsoft Internet Explorer"===Q.appName,h=[0,0,0],i=null;if(typeof Q.plugins!=H&&typeof Q.plugins[J]==I)i=Q.plugins[J].description,i&&typeof Q.mimeTypes!=H&&Q.mimeTypes[L]&&Q.mimeTypes[L].enabledPlugin&&(R=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=u(i.replace(/^(.*)\..*$/,"$1")),h[1]=u(i.replace(/^.*\.(.*)\s.*$/,"$1")),h[2]=/[a-zA-Z]/.test(i)?u(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof O.ActiveXObject!=H)try{var j=new ActiveXObject(K);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[u(i[0]),u(i[1]),u(i[2])]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){$.w3&&((typeof P.readyState!=H&&("complete"===P.readyState||"interactive"===P.readyState)||typeof P.readyState==H&&(P.getElementsByTagName("body")[0]||P.body))&&c(),W||(typeof P.addEventListener!=H&&P.addEventListener("DOMContentLoaded",c,!1),$.ie&&(P.attachEvent(N,function a(){"complete"===P.readyState&&(P.detachEvent(N,a),c())}),O===top&&!function b(){if(!W){try{P.documentElement.doScroll("left")}catch(a){return void window.setTimeout(b,0)}c()}}()),$.wk&&!function d(){return W?void 0:/loaded|complete/.test(P.readyState)?void c():void window.setTimeout(d,0)}()))})(),S[0]=function(){R?f():g()},function(){$.ie&&window.attachEvent("onunload",function(){for(var a=V.length,b=0;a>b;b++)V[b][0].detachEvent(V[b][1],V[b][2]);for(var c=U.length,d=0;c>d;d++)p(U[d]);for(var e in $)$[e]=null;$=null;for(var f in A)A[f]=null;A=null})}(),a.exports=A={registerObject:function(a,b,c,d){if($.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,T[T.length]=e,y(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return $.w3?h(a):void 0},embedSWF:function(a,b,c,e,f,g,h,k,l,m){var o=r(b),p={success:!1,id:o};$.w3&&!($.wk&&$.wk<312)&&a&&b&&c&&e&&f?(y(o,!1),d(function(){c+="",e+="";var d={};if(l&&typeof l===I)for(var q in l)d[q]=l[q];d.data=a,d.width=c,d.height=e;var r={};if(k&&typeof k===I)for(var s in k)r[s]=k[s];if(h&&typeof h===I)for(var t in h)if(h.hasOwnProperty(t)){var u=Z?encodeURIComponent(t):t,v=Z?encodeURIComponent(h[t]):h[t];typeof r.flashvars!=H?r.flashvars+="&"+u+"="+v:r.flashvars=u+"="+v}if(w(f)){var x=n(d,r,b);d.id===o&&y(o,!0),p.success=!0,p.ref=x,p.id=x.id}else{if(g&&i())return d.data=g,void j(d,r,b,m);y(o,!0)}m&&m(p)})):m&&m(p)},switchOffAutoHideShow:function(){Y=!1},enableUriEncoding:function(a){Z=typeof a===H?!0:a},ua:$,getFlashPlayerVersion:function(){return{major:$.pv[0],minor:$.pv[1],release:$.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(a,b,c){return $.w3?n(a,b,c):void 0},showExpressInstall:function(a,b,c,d){$.w3&&i()&&j(a,b,c,d)},removeSWF:function(a){$.w3&&p(a)},createCSS:function(a,b,c,d){$.w3&&x(a,b,c,d)},addDomLoadEvent:d,addLoadEvent:e,getQueryParamValue:function(a){var b=P.location.search||P.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return z(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))===a)return z(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var a=s(M);a&&B&&(a.parentNode.replaceChild(B,a),C&&(y(C,!0),$.ie&&(B.style.display="block")),D&&D(E)),X=!1}},version:"2.3"}},function(a,b,c){function d(a,b,c,d){if(c!==g&&c!==f&&void 0!==c)throw new Error("Can not use the provided base class");this._baseclass=c||f,this._baseclass.call(this,a,b,d||"HLSAudioPlayer"),this._seekPosition=0}var e=c(1),f=c(46),g=c(48),h=c(38);a.exports=d,e(d.prototype,f.prototype),d.prototype.seek=function(a){this._baseclass.prototype.seek.apply(this,arguments),this._isInOneOfStates(h.LOADING,h.SEEKING)&&(this._seekPosition=a)},d.prototype.getCurrentPosition=function(){if(this._isInOneOfStates(h.LOADING)&&this._seekPosition>0)return this._seekPosition;if(this._isInOneOfStates(h.PLAYING,h.SEEKING)){if(this._seekPosition>=this._currentPosition)return this._seekPosition;this._seekPosition=0}return this._baseclass.prototype.getCurrentPosition.apply(this,arguments)}},function(a,b,c){function d(a,b,c){this._duration=0,this._currentPosition=0,this._loadedPosition=0,j.prototype.constructor.call(this,c||"HTML5AudioPlayer",a,b),this._isLoaded=!1,this._prevCurrentPosition=0,this._prevCheckTime=0,this._positionUpdateTimer=0,this._playRequested=!1,this._startFromPosition=0,this.getDescriptor().duration&&(this._duration=this.getDescriptor().duration),this._bindHandlers(),this._initMediaElement(),this.updateState(g.IDLE)}var e=c(1),f=c(47).bindAll,g=c(38),h=c(39),i=c(43),j=c(35),k=c(16);a.exports=d,e(d.prototype,j.prototype),d.MediaAPIEvents=["ended","play","playing","pause","seeking","waiting","seeked","error","loadeddata","loadedmetadata"],d.prototype.play=function(a){return this._isInOneOfStates(g.ERROR,g.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):(this._logger.log("play from "+a),this._startFromPosition=a||0,this._playRequested=!0,this._isInOneOfStates(g.PAUSED,g.ENDED)?void this.resume():(this.updateState(g.LOADING),this._html5Audio.readyState>0&&this._onLoadedMetadata(),this._html5Audio.readyState>1&&this._onLoaded(),void (this._isLoaded?this._playAfterLoaded():this.once(h.DATA,this._playAfterLoaded))))},d.prototype.pause=function(){this._isInOneOfStates(g.ERROR,g.DEAD)||(this._logger.log("pause"),this._playRequested=!1,this._html5Audio&&this._html5Audio.pause())},d.prototype.seek=function(a){var b,c=!1,d=a/1e3,e=this._html5Audio.seekable;if(!this._isInOneOfStates(g.ERROR,g.DEAD)){if(!this._isLoaded)return this.once(h.DATA,function(){this.seek(a)}),void this._logger.log("postponing seek for when loaded");if(k.isIE10Mobile)c=!0;else for(b=0;b<e.length;b++)if(d<=e.end(b)&&d>=e.start(b)){c=!0;break}if(!c)return void this._logger.log("can not seek");this._logger.log("seek"),this.updateState(g.SEEKING),this._html5Audio.currentTime=d,this._currentPosition=a,this._lastMediaClockCheck=null}},d.prototype.resume=function(){return this._isInOneOfStates(g.ERROR,g.DEAD)?void this._logger.log("resume called but state is ERROR or DEAD"):(this._logger.log("resume"),void (this.getState()===g.PAUSED?(this.updateState(g.PLAYING),this._html5Audio.play(this._html5Audio.currentTime)):this.getState()===g.ENDED&&this._html5Audio.play(0)))},d.prototype.setVolume=function(a){this._html5Audio&&(this._html5Audio.volume=a)},d.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},d.prototype.setMute=function(a){this._html5Audio&&(this._html5Audio.muted=a)},d.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},d.prototype.kill=function(){this._state!==g.DEAD&&(this._logger.log("killing ..."),this._resetPositionInterval(!1),this._playRequested=!1,this._toggleEventListeners(!1),this.pause(),delete this._html5Audio,this.updateState(g.DEAD),this._logger.log("dead"))},d.prototype.getErrorMessage=function(){return this._errorMessage},d.prototype.getErrorID=function(){return this._errorID},d.prototype._bindHandlers=function(){f(this,["_onPositionChange","_onHtml5MediaEvent","_onLoaded","_onLoadedMetadata"])},d.prototype._initMediaElement=function(){this._html5Audio=k.createAudioElement(),this._html5Audio.id=this.getSettings().audioObjectID+"_"+this.getId(),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load(),this._toggleEventListeners(!0)},d.prototype._playAfterLoaded=function(){this._playRequested&&(this._trySeekToStartPosition(),this._html5Audio.play())},d.prototype._isInOneOfStates=function(){for(var a in arguments)if(arguments[a]===this._state)return!0;return!1},d.prototype._toggleEventListeners=function(a){if(this._html5Audio){var b=a?"addEventListener":"removeEventListener";d.MediaAPIEvents.forEach(function(a){switch(a){case"loadeddata":this._html5Audio[b]("loadeddata",this._onLoaded);break;case"loadedmetadata":this._html5Audio[b]("loadedmetadata",this._onLoadedMetadata);break;default:this._html5Audio[b](a,this._onHtml5MediaEvent)}},this)}},d.prototype._trySeekToStartPosition=function(){var a;return this._startFromPosition<=0?!0:(this._logger.log("seek to start position: "+this._startFromPosition),a=this._startFromPosition/1e3,this._html5Audio.currentTime=a,this._html5Audio.currentTime===a?(this._lastMediaClockCheck=null,this._currentPosition=this._startFromPosition,this._startFromPosition=0,!0):!1)},d.prototype._onLoaded=function(){this._logger.log("HTML5 media loadeddata event"),this.trigger(h.DATA,this)},d.prototype._onLoadedMetadata=function(){this._logger.log("HTML5 media loadedmetadata event"),(void 0===this._duration||0===this._duration)&&(this._duration=1e3*this._html5Audio.duration),this._loadedPosition=this._duration,this._isLoaded=!0,this.trigger(h.METADATA,this)},d.prototype._resetPositionInterval=function(a){window.clearInterval(this._positionUpdateTimer),a&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},d.prototype._onPositionChange=function(){if(!this._isInOneOfStates(g.DEAD)){var a;if(this._currentPosition=1e3*this._html5Audio.currentTime,this.trigger(h.POSITION_CHANGE,this.getCurrentPosition(),this._loadedPosition,this._duration,this),!this._isInOneOfStates(g.PLAYING,g.LOADING))return void (this._state===g.SEEKING&&a>0&&this.updateState(g.PLAYING));if(0!==this._duration&&(this._currentPosition>this._duration||this._currentPosition>this._loadedPosition&&!k.isIE10Mobile))return void this._onHtml5MediaEvent({type:"ended"});var b=this._mediaHasProgressed();return this.getState()!==g.PLAYING||b?void (this.getState()===g.LOADING&&b&&this.updateState(g.PLAYING)):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(g.LOADING))}},d.prototype._onHtml5MediaEvent=function(a){switch(this._logger.log("HTML5 media event: "+a.type),a.type){case"playing":if(!this._trySeekToStartPosition())break;this._onPositionChange(),this._resetPositionInterval(!0),this.updateState(g.PLAYING);break;case"pause":this._onPositionChange(),this._resetPositionInterval(!1),this.updateState(g.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._resetPositionInterval(!1),this.updateState(g.ENDED);break;case"waiting":if(this.getState()===g.SEEKING)break;this.updateState(g.LOADING);break;case"seeking":this.updateState(g.SEEKING);break;case"seeked":this._startFromPosition=0,this._html5Audio.paused?this.updateState(g.PAUSED):this.updateState(g.PLAYING),this._onPositionChange(a);break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},d.prototype._html5AudioErrorCodeToErrorId=function(){return{1:i.HTML5_AUDIO_ABORTED,2:i.HTML5_AUDIO_NETWORK,3:i.HTML5_AUDIO_DECODE,4:i.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},d.prototype._error=function(a,b){var c="error: ";b&&(c="error (native): "),this._errorID=a,this._errorMessage=this._getErrorMessage(this._errorID),this._logger.log(c+this._errorID+" "+this._errorMessage),this.updateState(g.ERROR),this._toggleEventListeners(!1)},d.prototype._getErrorMessage=function(a){var b={};return b[i.HTML5_AUDIO_ABORTED]="The fetching process for the media resource was aborted by the user agent at the user's request.",b[i.HTML5_AUDIO_NETWORK]="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.",b[i.HTML5_AUDIO_DECODE]="An error of some description occurred while decoding the media resource, after the resource was established to be usable.",b[i.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource indicated by the src attribute was not suitable.",b[a]}},function(a,b){function c(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(b),a.byteLength),c}function d(a){for(var b=[],c=0;c<a.length;c++)b.push({start:1e3*a.start(c),end:1e3*a.end(c)});return b}a.exports={bindAll:function(a,b){b.forEach(function(b){a[b]=a[b].bind(a)})},concatBuffersToUint8Array:c,timeRangesToFlatMap:d}},function(a,b,c){function d(a,b,c){i.prototype.constructor.call(this,a,b,c||"HTML5SingleAudioPlayer")}var e,f=c(1),g=c(16),h=c(39),i=c(46),j=c(38),k={};a.exports=d,f(d.prototype,i.prototype),d._onLoaded=function(a){d._pauseOthersAndForwardEvent("_onLoaded",a)},d._onLoadedMetadata=function(a){d._pauseOthersAndForwardEvent("_onLoadedMetadata",a)},d._onHtml5MediaEvent=function(a){d._pauseOthersAndForwardEvent("_onHtml5MediaEvent",a)},d._pauseOthersAndForwardEvent=function(a,b){Object.keys(k).forEach(function(c){var d=k[c];c===e?d[a](b):d.pause()})},d.prototype._initMediaElement=function(){d._html5Audio||(d._html5Audio=g.createAudioElement(),d._html5Audio.id=this.getSettings().audioObjectID+"_Single",i.prototype._toggleEventListeners.call(d,!0)),this._toggleEventListeners(!0),this._html5Audio=d._html5Audio,this._logger.log("initialized player for use with: "+this.getDescriptor().src)},d.prototype._toggleEventListeners=function(a){a?k[this.getId()]=this:delete k[this.getId()]},d.prototype.play=function(a){this._logger.log("singleton play at: "+a),(0===this._html5Audio.readyState||this.getDescriptor().src!==this._html5Audio.src)&&(this._logger.log("setting up audio element for use with: "+this.getDescriptor().src),e=this.getId(),this._isInOneOfStates(j.PAUSED)&&(this._logger.log("state was paused"),a=this._currentPosition||0),this._toggleEventListeners(!0),this._html5Audio.preload="auto",this._html5Audio.type=this.getDescriptor().mimeType,this._html5Audio.src=this.getDescriptor().src,this._html5Audio.load()),i.prototype.play.call(this,a)},d.prototype.resume=function(){return this._isInOneOfStates(j.ERROR,j.DEAD)?void 0:e!==this.getId()?void this.play(this._currentPosition):void i.prototype.resume.apply(this,arguments)},d.prototype.pause=function(){this._isInOneOfStates(j.ERROR,j.DEAD)||(this._logger.log("singleton pause"),e===this.getId()?i.prototype.pause.apply(this,arguments):(this._toggleEventListeners(!1),this._isInOneOfStates(j.PAUSED)||this.updateState(j.PAUSED),this._resetPositionInterval(!1)))},d.prototype.seek=function(a){return e!==this.getId()?(this._currentPosition=a,void this.trigger(h.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)):void i.prototype.seek.apply(this,arguments)}},function(a,b,c){function d(a,b){f.call(this,a,b,g,"HLSSingleAudioPlayer")}var e=c(1),f=c(45),g=c(48);a.exports=d,e(d.prototype,g.prototype,f.prototype)},function(a,b,c){function d(a,b){return i.prototype.constructor.call(this,"HLSMSEPlayer",a,b,A()),f(this,["_onPositionChange","_onPlaylistLoaded","_onPlaylistFailed","_onSegmentLoaded","_onSegmentProgress","_onSegmentFailed","_onHtml5MediaEvent","_onLoadedData","_onLoadedMetadata","_onMediaSourceAppend","_onMediaSourceReady","_onMediaSourceDestroy","_onMediaSourceError"]),this._streamUrlProvider=this.getSettings().streamUrlProvider||null,this._maxBufferLength=parseInt(this.getSettings().maxBufferTime,10),this._streamUrlRetryTimer=null,this._streamUrlTimesFailed=0,this._playlistRetryTimer=null,this._playlistTimesFailed=0,this._playlistRefreshInProgress=!1,this._isPlaylistLoaded=!1,this._loadOnInit=!1,this._schedulingSegmentIndex=-1,this._segmentsDownloading=[],this._nextSchedulingTimeout=null,this._networkErrors=0,this._mimeType=B(),this._mimeType?(this._mseToolkit=new l(this._logger,this._mimeType),this._mseToolkit.on(l.Events.SEGMENT_APPENDED,this._onMediaSourceAppend),this._mseToolkit.on(l.Events.SOURCE_READY,this._onMediaSourceReady),this._mseToolkit.on(l.Events.SOURCE_DESTROY,this._onMediaSourceDestroy),this._mseToolkit.on(l.Events.SOURCE_ERROR,this._onMediaSourceError),this._hlsToolkit=new k(this._logger,this.getDescriptor().src),this._hlsToolkit.on(k.Events.SEGMENT_LOADED,this._onSegmentLoaded),this._hlsToolkit.on(k.Events.SEGMENT_PROGRESS,this._onSegmentProgress),this._hlsToolkit.on(k.Events.SEGMENT_FAILED,this._onSegmentFailed),this._hlsToolkit.on(k.Events.PLAYLIST_LOADED,this._onPlaylistLoaded),this._hlsToolkit.on(k.Events.PLAYLIST_FAILED,this._onPlaylistFailed),this._hlsToolkit.on(k.Events.PLAYLIST_PARSE_ERROR,this._onPlaylistFailed),this._html5Audio=this._mseToolkit.media(),void this._toggleEventListeners(!0)):void this._error(h.MSE_NOT_SUPPORTED)}var e=c(1),f=c(47).bindAll,g=c(39),h=c(43),i=c(35),j=c(46),k=c(51),l=c(66),m=c(67),n=c(38),o=c(42),p=c(117),q=c(118),r=c(16),s=c(47),t=200,u=500,v=3,w=1e4,x=1500,y=3,z=function(a){var b=a/v,c=u*(Math.pow(Math.E,b)/Math.E);return c+=Math.random()*t,c>w&&(c=w),c},A=function(){var a={};return a[o.names.PROTOCOLS]=[p.HLS],a[o.names.MIMETYPES]=[q.HLS,q.M3U8,q.MP3],a[o.names.NEEDS_URL_REFRESH]=!1,a},B=function(){return r.isMSESupportMPEG()&&!r.isNativeHlsSupported()?"audio/mpeg":r.isMSESupportMP4()?"audio/mp4":null};a.exports=d,e(d.prototype,i.prototype),d.prototype._onLoadedData=function(){this._logger.log("loadeddata event handler"),this._triggerDataEvent()},d.prototype._triggerDataEvent=function(){this.trigger(g.DATA,s.timeRangesToFlatMap(this._html5Audio.buffered))},d.prototype._onLoadedMetadata=function(){this._logger.log("loadedmetadata event handler")},d.prototype._onPositionChange=function(){if(this._html5Audio&&this.getState()!==n.SEEKING){this._currentPosition=1e3*this._html5Audio.currentTime;var a=this._mediaHasProgressed();return this.getState()!==n.PLAYING||a?(this.getState()===n.LOADING&&a&&this.updateState(n.PLAYING),this._triggerPositionEvent(),this._currentPosition>=this._duration?void this.updateState(n.ENDED):void 0):(this._logger.log("media clock check failed, playhead is not advancing anymore"),void this.updateState(n.LOADING))}},d.prototype._onMediaSourceReady=function(){this.getDescriptor().duration&&(this._setDuration(this.getDescriptor().duration),this._logger.log("duration set from descriptor to "+this._duration)),this.updateState(n.IDLE),this._loadOnInit&&this._loadInitialPlaylist()},d.prototype._onMediaSourceDestroy=function(){this._logger.log("MediaSource destroyed"),this.kill()},d.prototype._onMediaSourceError=function(a){this._logger.log("MediaSource API error: "+a.message),this._error(h.MSE_BAD_OBJECT_STATE),this.kill()},d.prototype._onMediaSourceAppend=function(a){this._logger.log("segment appended: "+a.index),this._triggerDataEvent(),this._loadedPosition=a.endPosition,this._playRequested&&(this._logger.log("triggering playback after appending enough segments"),this._html5Audio.play(this._currentPosition))},d.prototype._notifyNetworkTimeout=function(){this._networkErrors++,this.trigger(g.NETWORK_TIMEOUT)},d.prototype._onSegmentProgress=function(a){var b=Math.round(a.loaded/a.total*100);this._logger.log("segment "+a.index+" loaded "+a.loaded+" of "+a.total+" bytes ("+b+"%)"),this._loadedPosition=a.endPosition-a.duration*(a.loaded/a.total)},d.prototype._onSegmentLoaded=function(a,b){return b||(this._networkErrors=0),this._mseToolkit.sourceIsReady()?void this._appendSegments():void this._logger.log("we have been disposed while loading a segment, noop")},d.prototype._onSegmentFailed=function(a){switch(this._logger.log("segment loading failed handler: "+a.status),a.status){case k.Status.NOT_FOUND:case k.Status.FORBIDDEN:this._networkErrors=0,this._cancelNextScheduling(),this._cancelAllInFlightRequests(),this._refreshPlaylist();break;case k.Status.TIMEOUT:(0===this._networkErrors||r.isOnLine())&&this._refreshPlaylist(),this._notifyNetworkTimeout();case k.Status.SERVER_ERROR:if(a.aborted){this._logger.log("aborted segment has been prevented from being retried");break}a.scheduleRetry(z(a.timesFailed),this._hlsToolkit.loadSegment,this._hlsToolkit,y);break;case k.Status.FAILED:this._logger.log("WARNING: segment loading failed for unknown reason!");break;default:throw new Error("Invalid status on failed segment: "+a.status)}},d.prototype._onPlaylistLoaded=function(){return this._logger.log("playlist loaded handler"),this._mseToolkit.sourceIsReady()?(this._networkErrors=0,this._playlistTimesFailed=0,this._isPlaylistLoaded=!0,this._playlistRefreshInProgress&&(this._playlistRefreshInProgress=!1,this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()),this._inspectEncryptionData(),this._setDuration(this._hlsToolkit.getDuration()),this._logger.log("duration set from playlist info to "+this._duration),void this.trigger(g.METADATA)):void this._logger.log("we have been disposed while loading the playlist, noop")},d.prototype._onPlaylistFailed=function(a){return this._logger.log("playlist loading failed handler. HTTP status code is "+a),this._mseToolkit.sourceIsReady()?(this._logger.log("Playlist loading failed  "+this._playlistTimesFailed+" times before"),this._playlistTimesFailed++,this._playlistRetryTimer=window.setTimeout(function(){this.hasStreamUrlProvider()?this._refreshPlaylist():this._hlsToolkit.updatePlaylist(!0)}.bind(this),z(this._playlistTimesFailed)),void (0===a?this._notifyNetworkTimeout():this._networkErrors=0)):void this._logger.log("we have been disposed while loading the playlist, noop")},d.prototype.afterStateChange=function(a,b){switch(b){case n.PLAYING:this._runScheduling();break;case n.PAUSED:this._cancelNextScheduling(),a===n.PLAYING&&this._cancelAllInFlightRequests()}},d.prototype._onHtml5MediaEvent=function(a){switch(this._logger.log('HTML5 media event "'+a.type+'"'),this._waitingToPause=!1,a.type){case"playing":this._playRequested=!1,this._triggerPositionEvent(),this._resetPositionTimer(!0),this.updateState(n.PLAYING);break;case"pause":this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(n.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration,this._triggerPositionEvent(),this._resetPositionTimer(!1),this.updateState(n.ENDED);break;case"waiting":if(this.getState()===n.SEEKING)break;this.updateState(n.LOADING);break;case"seeking":this._triggerPositionEvent(),this.updateState(n.SEEKING);break;case"seeked":this._html5Audio.paused?this.updateState(n.PAUSED):this.updateState(n.PLAYING),this._triggerPositionEvent();break;case"error":this._error(this._html5AudioErrorCodeToErrorId(),!0)}},d.prototype._toggleEventListeners=function(a){if(this._html5Audio){var b=a?"addEventListener":"removeEventListener";j.MediaAPIEvents.forEach(function(a){switch(a){case"loadeddata":this._html5Audio[b]("loadeddata",this._onLoadedData);break;case"loadedmetadata":this._html5Audio[b]("loadedmetadata",this._onLoadedMetadata);break;case"timeupdate":default:this._html5Audio[b](a,this._onHtml5MediaEvent)}},this)}},d.prototype._loadInitialPlaylist=function(){this.updateState(n.LOADING),this._hlsToolkit.updatePlaylist(!0)},d.prototype._refreshPlaylist=function(){return this._playlistRefreshInProgress?void 0:(this._playlistRefreshInProgress=!0,this.hasStreamUrlProvider()?void this._streamUrlProvider().done(function(a){this._logger.log("got new M3u8 URL: "+a),this._streamUrlTimesFailed=0,this._hlsToolkit.setUri(a),this._hlsToolkit.updatePlaylist(!1)}.bind(this)).fail(function(){this._logger.log("failed to retrieve stream URL :("),this._streamUrlRetryTimer=window.setTimeout(function(){this._playlistRefreshInProgress=!1,this._refreshPlaylist()}.bind(this),z(++this._streamUrlTimesFailed))}.bind(this)):(this._logger.log("can't update playlist, got no stream URL provider"),void (this._playlistRefreshInProgress=!1)))},d.prototype._setDuration=function(a){this._duration=a;try{this._mseToolkit.duration(this._duration)}catch(b){this._onMediaSourceError(b)}},d.prototype._resetPositionTimer=function(a){window.clearInterval(this._positionUpdateTimer),a&&(this._positionUpdateTimer=window.setInterval(this._onPositionChange,this.getSettings().updateInterval))},d.prototype._triggerPositionEvent=function(){this.trigger(g.POSITION_CHANGE,this._currentPosition,this._loadedPosition,this._duration,this)},d.prototype._initTransmuxerOnce=function(a,b){if(!this._transmuxer){var c=this._mimeType!==a.mimeType?m.Configs.MP3_TO_FMP4:m.Configs.VOID;this._transmuxer=new m(c),this._transmuxer.on("segment",function(a){this._logger.log("transmuxed data ready, "+a.data.length+" bytes for segment "+a.index),b(a)}.bind(this))}},d.prototype._transmuxSegment=function(a,b){this._logger.log("transmuxing segment "+a.index),this._initTransmuxerOnce(a,b),this._transmuxer.process(a)},d.prototype._appendSegments=function(){var a=!0;this._segmentsDownloading.slice().forEach(function(b){b.isComplete()&&a?(this._decryptSegment(b),this._transmuxSegment(b,function(a){this._mseToolkit.append(a)}.bind(this)),this._segmentsDownloading.shift()):a=!1},this)},d.prototype._cancelNextScheduling=function(){this._logger.log("cancelling next scheduling"),window.clearTimeout(this._nextSchedulingTimeout),this._nextSchedulingTimeout=null},d.prototype._getBufferUntilTime=function(){return this._currentPosition+this._maxBufferLength},d.prototype._isTimeBuffered=function(a){if(!this._html5Audio)return!1;for(var b=this._html5Audio.buffered,c=a/1e3,d=0;d<b.length;d++)if(c>=b.start(d)&&c<=b.end(d))return!0;return!1},d.prototype._getCurrentSegment=function(){return this._schedulingSegmentIndex>0?this._hlsToolkit.getSegment(this._schedulingSegmentIndex):this._hlsToolkit.getSegmentForTime(this._currentPosition)},d.prototype._runScheduling=function(){function a(){var b=!1,c=this._getBufferUntilTime(),d=this._getCurrentSegment(),e=d?d.duration:Math.Infinity;if(this._logger.log("scheduling next requests, current buffer-until time: "+c+" ms"),!d)return void this._logger.log("no segment to schedule, closing loop");for(this._logger.log("current segment index: "+d.index);d.endPosition<=c;){if(this._logger.log("scheduling loop at "+this._currentPosition+" ms, current segment "+d.index),this._requestSegment(d),d.isLast){b=!0,this._logger.log("end of playlist reached");break}this._schedulingSegmentIndex=d.index+1,d=this._hlsToolkit.getSegment(this._schedulingSegmentIndex)}this._isInOneOfStates(n.DEAD,n.PAUSED)||b?(this._logger.log("not re-scheduling"),this._nextSchedulingTimeout=null):(this._logger.log("timing next check for more data in "+e+" ms"),this._nextSchedulingTimeout=window.setTimeout(a.bind(this),e))}this._nextSchedulingTimeout||this._playlistRefreshInProgress||a.call(this)},d.prototype._cancelAllInFlightRequests=function(){this._schedulingSegmentIndex=-1,this._segmentsDownloading.forEach(function(a){a.isComplete()||a.cancel()}),this._segmentsDownloading=[]},d.prototype._requestSegment=function(a){return this._segmentsDownloading.push(a),a.isComplete()?(this._logger.log("requested data is already loaded from segment "+a.index),void this._onSegmentLoaded(a,!0)):a.hasBeenRequested()||a.hasFailed()?void this._logger.log("segment already in flight or failed (will retry): "+a.timesFailed+" times"):void this._hlsToolkit.loadSegment(a,y)},d.prototype._decryptSegment=function(a){this._hlsToolkit.isAES128Encrypted()&&this._hlsToolkit.decryptSegmentAES128(a)},d.prototype._inspectEncryptionData=function(){this._hlsToolkit.isAES128Encrypted()&&(this._logger.log("got key of byte length "+this._hlsToolkit.getEncryptionKey().byteLength),this._hlsToolkit.getEncryptionIv()?this._logger.log("got IV of byte length "+this._hlsToolkit.getEncryptionIv().byteLength):this._logger.log("no IV found in header, will use per-segment-index IV"))},d.prototype._html5AudioErrorCodeToErrorId=function(){return{1:h.HTML5_AUDIO_ABORTED,2:h.HTML5_AUDIO_NETWORK,3:h.HTML5_AUDIO_DECODE,4:h.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code]},d.prototype._error=function(a,b){this._errorID=a,this._errorMessage=this._getErrorMessage(this._errorID),b&&this._html5Audio.error&&(this._errorMessage+=" (native message: "+this._html5Audio.error.message+")"),this._logger.log(this._errorID+" "+this._errorMessage),this.updateState(n.ERROR),this._toggleEventListeners(!1)},d.prototype._getErrorMessage=function(a){var b={};return b[h.MSE_NOT_SUPPORTED]="The browser does not support MediaSource API",b[h.MSE_BAD_OBJECT_STATE]="MediaSource API has thrown an exception",b[a]?"Error: "+a+" ("+b[a]+")":"Error: "+a},d.prototype.setVolume=function(a){this._html5Audio&&(this._html5Audio.volume=a)},d.prototype.getVolume=function(){return this._html5Audio?this._html5Audio.volume:1},d.prototype.setMute=function(a){this._html5Audio&&(this._html5Audio.muted=a)},d.prototype.getMute=function(){return this._html5Audio?this._html5Audio.muted:!1},d.prototype.getErrorID=function(){return this._errorID},d.prototype.play=function(a){return this._isInOneOfStates(n.ERROR,n.DEAD)?void this._logger.log("play called but state is ERROR or DEAD"):this._isInOneOfStates(n.IDLE,n.INITIALIZE)?(a=a||0,this._logger.log("play from "+a),this._playRequested=!0,this.seek(a),this.getState()===n.INITIALIZE?void (this._loadOnInit=!0):void this._loadInitialPlaylist()):void this.resume()},d.prototype.pause=function(){this._html5Audio&&(this._playRequested=!1,this._html5Audio.pause())},d.prototype.seek=function(a){if(!this._isInOneOfStates(n.ERROR,n.DEAD)){if(a=parseInt(a,10),!this._isPlaylistLoaded)return void this.once(g.METADATA,function(){this.seek(a)}.bind(this));if(a>this._duration)return void this._logger.log("can not seek to position over duration");this._logger.log("seek to "+a+" ms"),this.updateState(n.SEEKING),this._lastMediaClockCheck=null,!this._isTimeBuffered(a)&&this._isTimeBuffered(a+x)&&(a+=x,this._logger.log("detected smart seeking opportunity, adjusting target to: "+a)),this._currentPosition=a;try{this._html5Audio.currentTime=a/1e3}catch(b){this._logger.log("error seeking: "+b.message)}this._cancelAllInFlightRequests(),this._cancelNextScheduling(),this._runScheduling()}},d.prototype.resume=function(){this._html5Audio&&(this._logger.log("resume from "+this._currentPosition),this._html5Audio.play(1e3*this._currentPosition))},d.prototype.kill=function(){this.getState()!==n.DEAD&&(this._logger.log("kill"),this._resetPositionTimer(!1),this._cancelNextScheduling(),this._cancelAllInFlightRequests(),window.clearTimeout(this._playlistRetryTimer),window.clearTimeout(this._streamUrlRetryTimer),this._playRequested=!1,this._toggleEventListeners(!1),this._html5Audio.pause(),this.updateState(n.DEAD))},d.prototype.getErrorMessage=function(){return this._errorMessage},d.prototype.hasStreamUrlProvider=function(){return!!this._streamUrlProvider}},function(a,b,c){var d,e=c(1),f=c(52),g=c(58),h=null,i=c(36),j={NEW:"new",QUEUED:"queued",REQUESTED:"requested",COMPLETE:"complete",TIMEOUT:"timeout",FORBIDDEN:"forbidden",NOT_FOUND:"not-found",SERVER_ERROR:"server-error",FAILED:"failed"},k={FIRST:"#EXTM3U",PLAYLIST:"#EXT-X-STREAM-INF:",SEGMENT:"#EXTINF:",END_TAG:"#EXT-X-ENDLIST",ENCRYPTION:"#EXT-X-KEY:"};a.exports=d=function(a,b){this._logger=a,this._duration=0,this._segments=[],this.setUri(b)},d.Events={PLAYLIST_LOADED:"playlist-loaded",PLAYLIST_PARSE_ERROR:"playlist-parse-error",PLAYLIST_FAILED:"playlist-failed",SEGMENT_LOADED:"segment-loaded",SEGMENT_PROGRESS:"segment-progress",SEGMENT_FAILED:"segment-failed",SEGMENT_CANCELED:"segment-canceled"},d.Status=j,e(d.prototype,i),d.Segment=function(a,b,c,d,f){e(this,{toolkit:a,uri:b,startPosition:c,endPosition:c+d,duration:d,index:f,data:null,status:j.NEW,isLast:!1,timesFailed:0,loaded:0,total:-1,aborted:!1,xhr:null,mimeType:"audio/mpeg"}),this._logger=a._logger},d.Segment.prototype.containsTime=function(a){return a>=this.startPosition&&a<=this.endPosition},d.Segment.prototype.isComplete=function(){return this.status===j.COMPLETE},d.Segment.prototype.hasFailed=function(){return this.status===j.TIMEOUT||this.status===j.FORBIDDEN||this.status===j.NOT_FOUND||this.status===j.SERVER_ERROR||this.status===j.FAILED},d.Segment.prototype.isNew=function(){return this.status===j.NEW},d.Segment.prototype.hasBeenRequested=function(){return this.status===j.REQUESTED},d.Segment.prototype.scheduleRetry=function(a,b,c,d){var e=this;this._retryTimer=window.setTimeout(function(){b.call(c,e,d)},a)},d.Segment.prototype.cancel=function(){this._logger.log("segment cancelled, clearing timeout: "+this.index),window.clearTimeout(this._retryTimer),this.xhr&&(this._logger.log("will abort & reset segment: "+this.index),this.status=j.NEW,this.aborted=!0,this.data=null,this.timesFailed=0,this.xhr.abort(),this.xhr=null,this.toolkit.trigger(d.Events.SEGMENT_CANCELED,this))},d.prototype.setUri=function(a){var b=this._uri=a;b.indexOf("?")>-1&&(b=b.substr(0,b.indexOf("?"))),this._baseURI=b.substr(0,b.lastIndexOf("/")+1)},d.prototype.updatePlaylist=function(a){var b=!1,c=new XMLHttpRequest;c.open("GET",this._uri,!0),c.responseType="text",this._logger.log("downloading playlist from: "+this._uri);var e=function(a){b||(b=!0,this.trigger(d.Events.PLAYLIST_FAILED,c.status))}.bind(this);c.onload=function(b){return 200!==c.status?void e():(a&&(this._segments=[],this._duration=0),this._parsePlaylist(c.responseText,a)?(this.getLastSegment().isLast=!0,this._logger.log("playlist download complete"),void this._retrieveEncryptionKey(function(){this.trigger(d.Events.PLAYLIST_LOADED)})):(this._logger.log("error parsing playlist"),void this.trigger(d.Events.PLAYLIST_PARSE_ERROR)))}.bind(this),c.onerror=function(a){e(a)}.bind(this),c.send()},d.prototype._parsePlaylist=function(a,b){for(var c,e,f,g=a.split("\n"),h=0,i=!1,j=0,m=0;j<g.length;)c=g[j++],0===c.indexOf(k.SEGMENT)?(f=1e3*Number(c.substr(8,c.indexOf(",")-8)),e=this._createSegmentURL(g[j]),b||!this._segments[h]?this._addSegment(new d.Segment(this,e,this._duration,f,m++)):this._segments[h].uri=e,h++,j++):0===c.indexOf(k.ENCRYPTION)?this._parsePlaylistEncryptionHeader(c):0===c.indexOf(k.END_TAG)&&(i=!0);return 0!==this.getNumSegments()&&i?!0:!1},d.prototype._addSegment=function(a){this._segments.push(a),this._duration+=a.duration},d.prototype._parsePlaylistEncryptionHeader=function(a){var b,c,d,e=a.substr(k.ENCRYPTION.length).split(",");if(g(e,function(a){a.indexOf("METHOD")>=0?c=a.split("=")[1]:a.indexOf("URI")>=0?b=a.split("=")[1]:a.indexOf("IV")>=0&&(d=a.split("=")[1])}),!(c&&b&&c.length&&b.length))throw new Error("Failed to parse M3U8 encryption header");c=c.trim(),b=b.trim().replace(/"/g,""),this._encryptionMethod=c,this._encryptionKeyUri=b,d&&d.length?(this._encryptionIvHexString=d.trim(),this._parseEncryptionIvHexString()):this._encryptionIv=null},d.prototype._parseEncryptionIvHexString=function(){var a,b=this._encryptionIvHexString.replace("0x",""),c=new Uint16Array(8),d=0;if(b.length%4!==0)throw new Error("Failed to parse M3U8 encryption IV (length is not multiple of 4)");for(;d<b.length;d+=4){if(a=parseInt(b.substr(d,4),16),isNaN(a))throw new Error("Failed to parse hex number in IV string");c[d/4]=a}this._encryptionIv=c},d.prototype._encryptionIvForSegment=function(a){var b=new DataView(new ArrayBuffer(16));return b.setUint32(0,a.index,!0),b.buffer},d.prototype._retrieveEncryptionKey=function(a){if(a){if(!this._encryptionKeyUri)return void a.call(this);var b=this._encryptionKeyUri,c=new XMLHttpRequest;c.open("GET",b,!0),c.responseType="arraybuffer",c.onload=f(function(d){200===c.status?this._encryptionKey=new Uint8Array(c.response):this._logger.log("Failed to retrieve encryption key from "+b+", returned status "+c.status),a.call(this)},this),c.send(),this._logger.log("Downloading encryption key from "+b)}},d.prototype._removeEncryptionPaddingBytes=function(a){var b=a.data[a.data.byteLength-1];b?(this._logger.log("Detected PKCS7 padding length of "+b+" bytes, slicing segment."),a.data=a.data.subarray(0,a.data.byteLength-b)):this._logger.log("No padding detected (last byte is zero)")},d.prototype.decryptSegmentAES128=function(a){if(this._logger.log("Decrypting AES-128 cyphered segment ..."),!h)throw new Error("AES decryption not built-in");var b=h.cipher.createDecipher("AES-CBC",h.util.createBuffer(this._encryptionKey)),c=0,d=a.data.byteLength,e=this._encryptionIv||this._encryptionIvForSegment(a);for(this._logger.log("Using IV ->"),b.start({iv:h.util.createBuffer(e)}),b.update(h.util.createBuffer(a.data)),b.finish(),a.data=new Uint8Array(d);d>c;c++)a.data[c]=b.output.getByte();this._removeEncryptionPaddingBytes(a)},d.prototype.isAES128Encrypted=function(){return"AES-128"===this._encryptionMethod},d.prototype.getEncryptionKeyUri=function(){return this._encryptionKeyUri},d.prototype.getEncryptionIv=function(){return this._encryptionIv},d.prototype.getEncryptionKey=function(){return this._encryptionKey},d.prototype._createSegmentURL=function(a){return"http://"===a.substr(0,7)||"https://"===a.substr(0,8)||"/"===a.substr(0,1)?a:this._baseURI+a},d.prototype._handleLoadSegmentFailure=function(a,b,c){a.aborted||(this._logger.log("segment aborted: "+a.aborted),this._logger.log("segment loading failure: HTTP response status: "+b.status),0===b.status?a.status=j.TIMEOUT:403===b.status?a.status=j.FORBIDDEN:404===b.status?a.status=j.NOT_FOUND:b.status>=500?a.status=j.SERVER_ERROR:a.status=j.FAILED,a.timesFailed++,this.trigger(d.Events.SEGMENT_FAILED,a))},d.prototype.getNumberOfSegmentsRequested=function(){var a=0;return this._segments.forEach(function(b){b.status===j.REQUESTED&&a++}),a},d.prototype._loadSegmentsQueued=function(a){this._segments.forEach(function(b){b.status===j.QUEUED&&(this._logger.log("attempt to load queue segment "+b.index),this.loadSegment(b,a))}.bind(this))},d.prototype._doRequest=function(a,b){var c=!1,e=new XMLHttpRequest,f=a.uri,g=function(d){c||(c=!0,this._handleLoadSegmentFailure(a,e,d),this._loadSegmentsQueued(b))}.bind(this);(a.hasBeenRequested()||a.isComplete())&&this._logger.log("segment cant be loaded, requested: ",!!a.hasBeenRequested()," complete: ",a.isComplete()),e.open("GET",f,!0),e.responseType="arraybuffer",e.onload=function(){if(!a.aborted){if(200!==e.status)return void g();this._logger.log("download of segment "+a.index+" complete"),a.status=j.COMPLETE,a.data=new Uint8Array(e.response),a.downloadTime=Date.now()-a.downloadStartTime,this.trigger(d.Events.SEGMENT_LOADED,a),this._loadSegmentsQueued(b)}}.bind(this),e.onprogress=function(b){a.aborted||b.loaded&&b.total&&(a.loaded=b.loaded,a.total=b.total,this.trigger(d.Events.SEGMENT_PROGRESS,a))}.bind(this),e.onerror=function(a){g(a)}.bind(this),this._logger.log("requesting segment "+a.index+" from "+f),a.xhr=e,a.aborted=!1,a.downloadStartTime=Date.now(),a.status=j.REQUESTED,e.send()},d.prototype.loadSegment=function(a,b){return!isNaN(b)&&this.getNumberOfSegmentsRequested()>b?(this._logger.log("setting segment "+a.index+" queued"),void (a.status=j.QUEUED)):void this._doRequest(a,b)},d.prototype.getSegment=function(a){return this._segments[a]?this._segments[a]:null},d.prototype.getSegmentIndexForTime=function(a){var b,c;if(a>this._duration||0>a||0===this._segments.length)return-1;for(b=Math.floor(this._segments.length*(a/this._duration)),c=this._segments[b];!(c.startPosition<=a&&c.startPosition+c.duration>a);)c.startPosition+c.duration>=a?b--:b++,c=this._segments[b];return b},d.prototype.getSegmentForTime=function(a){var b=this.getSegmentIndexForTime(a);return b>=0?this._segments[b]:null},d.prototype.getDuration=function(){return this._duration},d.prototype.getNumSegments=function(){return this._segments.length},d.prototype.getLastSegment=function(){return this._segments.length?this._segments[this._segments.length-1]:null}},function(a,b,c){var d=c(53),e=c(56),f=c(57),g=1,h=32,i=f(function(a,b,c){var f=g;if(c.length){var j=e(c,i.placeholder);f|=h}return d(a,f,b,c,j)});i.placeholder={},a.exports=i},function(a,b,c){((function(b){function d(a,b,c){for(var d=c.length,e=-1,f=C(a.length-d,0),g=-1,h=b.length,i=Array(h+f);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function e(a,b,c){for(var d=-1,e=c.length,f=-1,g=C(a.length-e,0),h=-1,i=b.length,j=Array(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function f(a,c){function d(){var f=this&&this!==b&&this instanceof d?e:a;return f.apply(c,arguments)}var e=g(a);return d}function g(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=o(a.prototype),d=a.apply(c,b);return m(d)?d:c}}function h(a,c,f,i,j,k,m,o,r,t){function A(){for(var u=arguments.length,v=u,w=Array(u);v--;)w[v]=arguments[v];if(i&&(w=d(w,i,j)),k&&(w=e(w,k,m)),F||H){var z=A.placeholder,J=p(w,z);if(u-=J.length,t>u){var K=o?n(o):void 0,Q=C(t-u,0),U=F?J:void 0,V=F?void 0:J,W=F?w:void 0,X=F?void 0:w;c|=F?x:y,c&=~(F?y:x),G||(c&=~(q|s));var Y=h(a,c,f,W,U,X,V,K,r,Q);return Y.placeholder=z,Y}}var Z=D?f:this,$=E?Z[a]:a;return o&&(w=l(w,o)),B&&r<w.length&&(w.length=r),this&&this!==b&&this instanceof A&&($=I||g(a)),$.apply(Z,w)}var B=c&z,D=c&q,E=c&s,F=c&v,G=c&u,H=c&w,I=E?void 0:g(a);return A}function i(a,c,d,e){function f(){for(var c=-1,g=arguments.length,j=-1,k=e.length,l=Array(k+g);++j<k;)l[j]=e[j];for(;g--;)l[j++]=arguments[++c];var m=this&&this!==b&&this instanceof f?i:a;return m.apply(h?d:this,l)}var h=c&q,i=g(a);return f}function j(a,b,c,d,e,g,j,k){var l=b&s;if(!l&&"function"!=typeof a)throw new TypeError(A);var m=d?d.length:0;if(m||(b&=~(x|y),d=e=void 0),m-=e?e.length:0,b&y){var n=d,o=e;d=e=void 0}var p=[a,b,c,d,e,n,o,g,j,k];if(p[9]=null==k?l?0:a.length:C(k-m,0)||0,b==q)var r=f(p[0],p[2]);else r=b!=x&&b!=(q|x)||p[4].length?h.apply(void 0,p):i.apply(void 0,p);return r}function k(a,b){return a="number"==typeof a||B.test(a)?+a:-1,b=null==b?E:b,a>-1&&a%1==0&&b>a}function l(a,b){for(var c=a.length,d=D(b.length,c),e=n(a);d--;){var f=b[d];a[d]=k(f,c)?e[f]:void 0}return a}function m(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var n=c(54),o=c(55),p=c(56),q=1,s=2,u=4,v=8,w=16,x=32,y=64,z=128,A="Expected a function",B=/^\d+$/,C=Math.max,D=Math.min,E=9007199254740991;a.exports=j})).call(b,function(){return this}())},function(a,b){function c(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}a.exports=c},function(a,b){function c(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var d=function(){function a(){}return function(b){if(c(b)){a.prototype=b;var d=new a;a.prototype=void 0}return d||{}}}();a.exports=d},function(a,b){function c(a,b){for(var c=-1,e=a.length,f=-1,g=[];++c<e;)a[c]===b&&(a[c]=d,g[++f]=c);return g}var d="__lodash_placeholder__";a.exports=c},11,function(a,b,c){function d(a,b){return function(c,d,e){return"function"==typeof d&&void 0===e&&h(c)?a(c,d):b(c,g(d,e,3))}}var e=c(59),f=c(60),g=c(65),h=c(64),i=d(e,f);a.exports=i},function(a,b){function c(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}a.exports=c},[121,61],[120,62,63,64],5,6,7,9,function(a,b,c){var d,e=c(36),f=c(16),g=c(47).bindAll,h=c(1);a.exports=d=function(a,b){g(this,["_onMSEInit","_onMSEDispose","_onSourceBufferUpdate"]),this.mimeType=b,this._logger=a,this._isBufferPrepared=!1,this._sourceBufferPtsOffset=0,this._segmentsAwaitingAppendance=[],this._isNotReady=!0,this._sourceBuffer=null,this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMSEInit,!1),this._mediaSource.addEventListener("sourceclose",this._onMSEDispose,!1),this._mediaElem=f.createAudioElement(),this._mediaElem.src=window.URL.createObjectURL(this._mediaSource)},d.Events={SOURCE_READY:"source-ready",SOURCE_DESTROYED:"source-destroy",SOURCE_ERROR:"source-error",SEGMENT_APPENDED:"segment-appended"},h(d.prototype,e),h(d.prototype,{_onMSEInit:function(){this._logger.log("source open handler"),this._isNotReady=!1,this._mediaSource.removeEventListener("sourceopen",this._onMSEInit,!1),this._sourceBuffer=this._mediaSource.addSourceBuffer(this.mimeType),this._sourceBuffer.addEventListener("update",this._onSourceBufferUpdate),this.trigger(d.Events.SOURCE_READY)},_onMSEDispose:function(){this._isNotReady=!0,this._logger.log("source dispose handler"),this._mediaSource.removeEventListener("sourceclose",this._onMSEDispose,!1)},_appendNextSegment:function(a){try{if(this._sourceBuffer.updating)return this._logger.log("source buffer is busy updating already, enqueuing data for later appending"),void this._segmentsAwaitingAppendance.unshift(a);a.isLast&&this._logger.log("about to append last segment"),this._currentSegmentAppending=a,this._sourceBuffer.timestampOffset=a.startPosition/1e3,this._sourceBuffer.appendBuffer(a.data),this._logger.log("appending segment "+a.index)}catch(b){this._logger.log("error while appending to SourceBuffer: "+b.message+")"),this.trigger(d.Events.SOURCE_ERROR,b)}},_tryAppendEos:function(){this._logger.log("attempting to finalize stream");try{"open"!==this._mediaSource.readyState||this._sourceBuffer.updating?this._logger.log("couldn't call endOfStream because SourceBuffer is still updating, we'll call it once its done"):(this._mediaSource.endOfStream(),this._logger.log("called endOfStream"))}catch(a){this._logger.log("SourceBuffer endOfStream() call failed with error: "+a.message),this.trigger(d.Events.SOURCE_ERROR,a)}},_onSourceBufferUpdate:function(){(this._currentSegmentAppending||this._sourceBuffer.updating)&&(this._logger.log("done updating SourceBuffer with segment "+this._currentSegmentAppending.index),this.trigger(d.Events.SEGMENT_APPENDED,this._currentSegmentAppending),this._currentSegmentAppending.isLast&&(this._logger.log("was last segment, setting on EOS on SourceBuffer"),this._tryAppendEos()),this._segmentsAwaitingAppendance.length&&!this._sourceBuffer.updating&&this._appendNextSegment(this._segmentsAwaitingAppendance.pop()))},append:function(a){if(!this.sourceIsReady())throw new Error("MediaSource is not ready yet");this._appendNextSegment(a)},media:function(){return this._mediaElem},sourceIsReady:function(){return!this._isNotReady},duration:function(a){return this._mediaSource.duration=a/1e3,1e3*this._mediaSource.duration}})},function(a,b,c){var d,e=c(47).concatBuffersToUint8Array,f=c(1),g=c(36),h=c(68);a.exports=d=function(a){this.config=a,this.reset(),this.segments=[],this.pushedInitData=!1},f(d.prototype,g),d.prototype.process=function(a){switch(this.segments.push(a),this.config){case d.Configs.VOID:this.trigger("segment",a);break;case d.Configs.MP3_TO_FMP4:this.src.enqueue(new h.Unit.Transfer(a.data,"binary")),this.src.enqueue(h.Unit.Transfer.Flush());break;default:throw new Error("Config "+this.config+" not supported")}},d.prototype.dequeue=function(){return this.segments.shift()},d.prototype.reset=function(){switch(this.config){case d.Configs.VOID:break;case d.Configs.MP3_TO_FMP4:this.gotInitData=!1,this.src=new h.Unit.BasePushSrc,this.parser=new h.Units.MP3Parser,this.muxer=new h.Units.MP4Mux(h.Units.MP4Mux.Profiles.MP3_AUDIO_ONLY),this.sink=new h.Unit.BaseSink,this.sink._onData=function(){var a,b=this.sink.dequeue().data;return this.gotInitData?(a=this.dequeue(),a.mimeType="audio/mp4",this.gotInitData&&!this.pushedInitData?(a.data=e(this.initData,b),this.pushedInitData=!0):a.data=b,this.trigger("segment",a),void this.reset()):(this.gotInitData=!0,void (this.initData=b))}.bind(this),h.Unit.link(this.src,this.parser,this.muxer,this.sink);break;default:throw new Error("Config "+this.config+" not supported")}},d.Configs={VOID:"VOID",MP3_TO_FMP4:"MP3_TO_FMP4"}},function(a,b,c){var d,e=c(69),f=c(104),g=c(107),h=c(110),i=c(113),j=c(114);a.exports=d={Unit:e,Units:{File:j,MP4Mux:f,MP3Parser:g,MSESink:h,XHR:i}}},function(a,b,c){((function(b){var d,e,f,g,h,i,j,k,l,m,n=c(74),o=c(76),p=c(1),q=c(85),s=c(86);a.exports=d=function(){q.call(this),this.inputs||(this.inputs=[]),this.outputs||(this.outputs=[])},d.create=function(a){return o(d.prototype,a)},d.createBaseSrc=function(a){return o(i.prototype,a)},d.createBasePushSrc=function(a){return o(j.prototype,a)},d.createBaseSink=function(a){return o(k.prototype,a)},d.createBaseTransform=function(a){return o(h.prototype,a)},d.createBaseParser=function(a){return o(l.prototype,a)},d.link=function(a,b){if(arguments.length>2)return d.linkArray(arguments);for(var c=0;c<Math.min(a.numberOfOuts(),b.numberOfIns());c++)a.out(c).pipe(b["in"](c));return b},d.linkArray=function(a){var b,c,e;for(e=0;e<a.length;e++)b=a[e],a.length>e+1&&(c=a[e+1],d.link(b,c));return c};var u=d.Event={CHAIN:"chain",NEED_DATA:"need-data",FINISH:"finish",PIPE:"pipe",UNPIPE:"unpipe",ERROR:"error",END:"end",OPEN:"open",CLOSE:"close"};d.prototype=o(q.prototype,{constructor:d,"in":function(a){return this.inputs[a]},out:function(a){return this.outputs[a]},numberOfIns:function(){return this.inputs.length},numberOfOuts:function(){return this.outputs.length},add:function(a){return a instanceof e?this.addInput(a):a instanceof f&&this.addOutput(a),this},remove:function(a){a instanceof e?this.removeInput(a):a instanceof f&&this.removeOutput(a)},addInput:function(a){this._installEventForwarder(a,u.FINISH),this._installEventForwarder(a,u.OPEN),this._installEventForwarder(a,u.PIPE),this._installEventForwarder(a,u.UNPIPE),this._installEventForwarder(a,u.ERROR),this._installEventForwarder(a,u.CHAIN),this.inputs.push(a)},addOutput:function(a){this._installEventForwarder(a,u.END),this._installEventForwarder(a,u.OPEN),this._installEventForwarder(a,u.CLOSE),this._installEventForwarder(a,u.ERROR),this._installEventForwarder(a,u.NEED_DATA),this.outputs.push(a)},removeInput:function(a){removePut(this.inputs,a)},removeOutput:function(a){removePut(this.outputs,a)},removePut:function(a,b){a.slice().forEach(function(c,d){c==b&&a.splice(d,1)})},_installEventForwarder:function(a,b){a.on(b,function(c){this.emit(b,a,c)}.bind(this))}}),d.Transfer=g=function(a,c,d){c||(c=a instanceof b?"buffer":a instanceof String?"utf8":"object"),this.resolved=!1,this.data=a,this.encoding=c,this.doneCallback=d},g.prototype=o(Object.prototype,{constructor:g,resolve:function(){this.doneCallback&&!this.resolved&&(this.doneCallback(),this.resolved=!0)},setFlushing:function(a){return this.data.flush=a,this},setEmpty:function(a){return this.data.empty=a,this}}),g.Flush=function(){return(new g({},"binary")).setFlushing(!0).setEmpty(!0)},g.EOS=function(){return new g(null,"binary")},d.Input=e=function(a,b){s.Writable.prototype.constructor.call(this,{objectMode:!0,decodeStrings:!1})},e.prototype=o(s.Writable.prototype,{constructor:e,_write:function(a,b,c){n("_write: "+b),this.emit(d.Event.CHAIN,new g(a,b,c))}}),d.Output=f=function(a){s.Readable.prototype.constructor.call(this,{objectMode:!0}),this._dataRequested=0,this._shouldPushMore=!0},f.eos=function(a){a.push(null,"null")},f.prototype=o(s.Readable.prototype,{constructor:f,_read:function(a){this._dataRequested++,this.emit(u.NEED_DATA,this)},push:function(a,b){return this._dataRequested--,this._shouldPushMore=s.Readable.prototype.push.call(this,a,b),this._shouldPushMore},isPulling:function(){return this._dataRequested>0},eos:function(){s.Readable.prototype.push.call(this,null,"null")}}),d.BaseTransform=h=function(){d.prototype.constructor.apply(this,arguments),this.add(new e).add(new f),this.on(u.CHAIN,this._onChain.bind(this)),this.on(u.FINISH,this._onFinish.bind(this))},h.prototype=o(d.prototype,{constructor:h,_onChain:function(a,b){this._transform(b),this.out(0).push(b.data,b.encoding),b.resolve()},_onFinish:function(a){f.eos(this.out(0))},_transform:function(a){}}),d.BaseSrc=i=function(){d.prototype.constructor.apply(this,arguments),this.add(new f),this.on(u.NEED_DATA,this.squeeze.bind(this))},i.prototype=o(d.prototype,{constructor:i,squeeze:function(){n("squeeze");var a=this._source();a&&(this.out(0).push(a.data,a.encoding),a.resolve())},_source:function(){}}),d.BasePushSrc=j=function(){i.prototype.constructor.apply(this,arguments),this._bufferOut=[]},j.prototype=o(i.prototype,{constructor:j,_source:function(){return this._bufferOut.length?this._bufferOut.shift():null},enqueue:function(a){this._bufferOut.push(a),this.out(0).isPulling&&this.out(0).isPulling()&&this.squeeze()}}),d.BaseSink=k=function(){d.prototype.constructor.apply(this,arguments),this.add(new e),this.on(u.CHAIN,this._onChain.bind(this)),this._bufferIn=[]},k.prototype=o(d.prototype,{constructor:k,_onChain:function(a,b){n("BaseSink._onChain: "+b.encoding),this._bufferIn.push(b),this._onData(),b.resolve()},_onData:function(){},dequeue:function(){return this._bufferIn.length?this._bufferIn.shift():null}}),d.BaseParser=l=function(){j.prototype.constructor.apply(this,arguments),k.prototype.constructor.apply(this,arguments),this.on("finish",this._onFinish.bind(this))},p(l.prototype,d.prototype,q.prototype,i.prototype,j.prototype,k.prototype,{constructor:l,_onData:function(){this._parse(this.dequeue())},_onFinish:function(){n("BaseParser._onFinish"),f.eos(this.out(0))},_parse:function(a){}}),d.InputSelector=m=function(a){for(h.prototype.constructor.apply(this,arguments),a=(a||1)-1;a-->0;)this.add(new e);this.selectedInputIndex=0},p(m.prototype,h.prototype,{constructor:m,_onChain:function(a,b){var c=this["in"](this.selectedInputIndex);return a!==c?void b.resolve():(this._transform(b),this.out(0).push(b.data,b.encoding),void b.resolve())},_onFinish:function(a){var b=this["in"](this.selectedInputIndex);a===b&&f.eos(this.out(0))}})})).call(b,c(70).Buffer)},function(a,b,c){((function(a,d){function f(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function g(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(b){return this instanceof a?(this.length=0,this.parent=void 0,"number"==typeof b?h(this,b):"string"==typeof b?i(this,b,arguments.length>1?arguments[1]:"utf8"):j(this,b)):arguments.length>1?new a(b,arguments[1]):new a(b)}function h(b,c){if(b=q(b,0>c?0:0|s(c)),!a.TYPED_ARRAY_SUPPORT)for(var d=0;c>d;d++)b[d]=0;return b}function i(a,b,c){("string"!=typeof c||""===c)&&(c="utf8");var d=0|u(b,c);return a=q(a,d),a.write(b,c),a}function j(b,c){if(a.isBuffer(c))return k(b,c);if($(c))return l(b,c);if(null==c)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(c.buffer instanceof ArrayBuffer)return m(b,c);if(c instanceof ArrayBuffer)return n(b,c)}return c.length?o(b,c):p(b,c)}function k(a,b){var c=0|s(b.length);return a=q(a,c),b.copy(a,0,0,c),a}function l(a,b){var c=0|s(b.length);a=q(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function m(a,b){var c=0|s(b.length);a=q(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function n(b,c){return a.TYPED_ARRAY_SUPPORT?(c.byteLength,b=a._augment(new Uint8Array(c))):b=m(b,new Uint8Array(c)),b}function o(a,b){var c=0|s(b.length);a=q(a,c);for(var d=0;c>d;d+=1)a[d]=255&b[d];return a}function p(a,b){var c,d=0;"Buffer"===b.type&&$(b.data)&&(c=b.data,d=0|s(c.length)),a=q(a,d);for(var e=0;d>e;e+=1)a[e]=255&c[e];return a}function q(b,c){a.TYPED_ARRAY_SUPPORT?(b=a._augment(new Uint8Array(c)),b.__proto__=a.prototype):(b.length=c,b._isBuffer=!0);var d=0!==c&&c<=a.poolSize>>>1;return d&&(b.parent=_),b}function s(a){if(a>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|a}function t(b,c){if(this instanceof t){var d=new a(b,c);return delete d.parent,d}return new t(b,c)}function u(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return T(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return W(a).length;default:if(d)return T(a).length;b=(""+b).toLowerCase(),d=!0}}function v(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),0>b&&(b=0),c>this.length&&(c=this.length),b>=c)return"";for(;;)switch(a){case"hex":return H(this,b,c);case"utf8":case"utf-8":return D(this,b,c);case"ascii":return F(this,b,c);case"binary":return G(this,b,c);case"base64":return C(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function w(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;d>g;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function x(a,b,c,d){return X(T(b,a.length-c),a,c,d)}function y(a,b,c,d){return X(U(b),a,c,d)}function z(a,b,c,d){return y(a,b,c,d)}function A(a,b,c,d){return X(W(b),a,c,d)}function B(a,b,c,d){return X(V(b,a.length-c),a,c,d)}function C(a,b,c){return 0===b&&c===a.length?Y.fromByteArray(a):Y.fromByteArray(a.slice(b,c))}function D(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;c>e;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(c>=e+h){var i,j,k,l;switch(h){case 1:128>f&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(55296>l||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&1114112>l&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return E(d)}function E(a){var b=a.length;if(ba>=b)return String.fromCharCode.apply(String,a);for(var c="",d=0;b>d;)c+=String.fromCharCode.apply(String,a.slice(d,d+=ba));return c}function F(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(127&a[e]);return d}function G(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function H(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=S(a[f]);return e}function I(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function J(a,b,c){if(a%1!==0||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function K(b,c,d,e,f,g){if(!a.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>f||g>c)throw new RangeError("value is out of bounds");if(d+e>b.length)throw new RangeError("index out of range")}function L(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);f>e;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function M(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);f>e;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function N(a,b,c,d,e,f){if(b>e||f>b)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(0>c)throw new RangeError("index out of range")}function O(a,b,c,d,e){return e||N(a,b,c,4,3.4028234663852886e+38,-3.4028234663852886e+38),Z.write(a,b,c,d,23,4),c+4}function P(a,b,c,d,e){return e||N(a,b,c,8,1.7976931348623157e+308,-1.7976931348623157e+308),Z.write(a,b,c,d,52,8),c+8}function Q(a){if(a=R(a).replace(bc,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function R(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function S(a){return 16>a?"0"+a.toString(16):a.toString(16)}function T(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;d>g;g++){if(c=a.charCodeAt(g),c>55295&&57344>c){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(56320>c){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,128>c){if((b-=1)<0)break;f.push(c)}else if(2048>c){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(65536>c){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(1114112>c))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function U(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function V(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function W(a){return Y.toByteArray(Q(a))}function X(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var Y=c(71),Z=c(72),$=c(73);b.Buffer=a,b.SlowBuffer=t,b.INSPECT_MAX_BYTES=50,a.poolSize=8192;var _={};a.TYPED_ARRAY_SUPPORT=void 0!==d.TYPED_ARRAY_SUPPORT?d.TYPED_ARRAY_SUPPORT:f(),a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array),a.isBuffer=function(a){return null!=a&&!!a._isBuffer},a.compare=function(b,c){if(!a.isBuffer(b)||!a.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,e=c.length,f=0,g=Math.min(d,e);g>f&&b[f]===c[f];)++f;return f!==g&&(d=b[f],e=c[f]),e>d?-1:d>e?1:0},a.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,c){if(!$(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new a(0);var d;if(void 0===c)for(c=0,d=0;d<b.length;d++)c+=b[d].length;var e=new a(c),f=0;for(d=0;d<b.length;d++){var g=b[d];g.copy(e,f),f+=g.length}return e},a.byteLength=u,a.prototype.length=void 0,a.prototype.parent=void 0,a.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?D(this,0,a):v.apply(this,arguments)},a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:0===a.compare(this,b)},a.prototype.inspect=function(){var a="",c=b.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(a+=" ... ")),"<Buffer "+a+">"},a.prototype.compare=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:a.compare(this,b)},a.prototype.indexOf=function(b,c){function d(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(c>2147483647?c=2147483647:-2147483648>c&&(c=-2147483648),c>>=0,0===this.length)return-1;if(c>=this.length)return-1;if(0>c&&(c=Math.max(this.length+c,0)),"string"==typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(a.isBuffer(b))return d(this,b,c);if("number"==typeof b)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):d(this,[b],c);throw new TypeError("val must be string, number or Buffer")},a.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},a.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},a.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(0>c||0>b)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return w(this,a,b,c);case"utf8":case"utf-8":return x(this,a,b,c);case"ascii":return y(this,a,b,c);case"binary":return z(this,a,b,c);case"base64":return A(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ba=4096;a.prototype.slice=function(b,c){var d=this.length;b=~~b,c=void 0===c?d:~~c,0>b?(b+=d,0>b&&(b=0)):b>d&&(b=d),0>c?(c+=d,0>c&&(c=0)):c>d&&(c=d),b>c&&(c=b);var e;if(a.TYPED_ARRAY_SUPPORT)e=a._augment(this.subarray(b,c));else{var f=c-b;e=new a(f,void 0);for(var g=0;f>g;g++)e[g]=this[g+b]}return e.length&&(e.parent=this.parent||this),e},a.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},a.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a+ --b],e=1;b>0&&(e*=256);)d+=this[a+ --b]*e;return d},a.prototype.readUInt8=function(a,b){return b||J(a,1,this.length),this[a]},a.prototype.readUInt16LE=function(a,b){return b||J(a,2,this.length),this[a]|this[a+1]<<8},a.prototype.readUInt16BE=function(a,b){return b||J(a,2,this.length),this[a]<<8|this[a+1]},a.prototype.readUInt32LE=function(a,b){return b||J(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},a.prototype.readUInt32BE=function(a,b){return b||J(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},a.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},a.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||J(a,b,this.length);for(var d=b,e=1,f=this[a+ --d];d>0&&(e*=256);)f+=this[a+ --d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},a.prototype.readInt8=function(a,b){return b||J(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},a.prototype.readInt16LE=function(a,b){b||J(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},a.prototype.readInt16BE=function(a,b){b||J(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},a.prototype.readInt32LE=function(a,b){return b||J(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},a.prototype.readInt32BE=function(a,b){return b||J(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},a.prototype.readFloatLE=function(a,b){return b||J(a,4,this.length),Z.read(this,a,!0,23,4)},a.prototype.readFloatBE=function(a,b){return b||J(a,4,this.length),Z.read(this,a,!1,23,4)},a.prototype.readDoubleLE=function(a,b){return b||J(a,8,this.length),Z.read(this,a,!0,52,8)},a.prototype.readDoubleBE=function(a,b){return b||J(a,8,this.length),Z.read(this,a,!1,52,8)},a.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||K(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},a.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||K(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},a.prototype.writeUInt8=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,1,255,0),a.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=255&b,c+1},a.prototype.writeUInt16LE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):L(this,b,c,!0),c+2},a.prototype.writeUInt16BE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):L(this,b,c,!1),c+2},a.prototype.writeUInt32LE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b):M(this,b,c,!0),c+4},a.prototype.writeUInt32BE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):M(this,b,c,!1),c+4},a.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=0,g=1,h=0>a?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},a.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);K(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=0>a?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},a.prototype.writeInt8=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,1,127,-128),a.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),0>b&&(b=255+b+1),this[c]=255&b,c+1},a.prototype.writeInt16LE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):L(this,b,c,!0),c+2},a.prototype.writeInt16BE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):L(this,b,c,!1),c+2},a.prototype.writeInt32LE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):M(this,b,c,!0),c+4},a.prototype.writeInt32BE=function(b,c,d){return b=+b,c=0|c,d||K(this,b,c,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),a.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):M(this,b,c,!1),c+4},a.prototype.writeFloatLE=function(a,b,c){return O(this,a,b,!0,c)},a.prototype.writeFloatBE=function(a,b,c){return O(this,a,b,!1,c)},a.prototype.writeDoubleLE=function(a,b,c){return P(this,a,b,!0,c)},a.prototype.writeDoubleBE=function(a,b,c){return P(this,a,b,!1,c)},a.prototype.copy=function(b,c,d,e){if(d||(d=0),e||0===e||(e=this.length),c>=b.length&&(c=b.length),c||(c=0),e>0&&d>e&&(e=d),e===d)return 0;if(0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>d||d>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),b.length-c<e-d&&(e=b.length-c+d);var f,g=e-d;if(this===b&&c>d&&e>c)for(f=g-1;f>=0;f--)b[f+c]=this[f+d];else if(1e3>g||!a.TYPED_ARRAY_SUPPORT)for(f=0;g>f;f++)b[f+c]=this[f+d];else b._set(this.subarray(d,d+g),c);return g},a.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),b>c)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>c||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;c>d;d++)this[d]=a;else{var e=T(a.toString()),f=e.length;for(d=b;c>d;d++)this[d]=e[d%f]}return this}},a.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return(new a(this)).buffer;for(var b=new Uint8Array(this.length),c=0,d=b.length;d>c;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var bb=a.prototype;a._augment=function(b){return b.constructor=a,b._isBuffer=!0,b._set=b.set,b.get=bb.get,b.set=bb.set,b.write=bb.write,b.toString=bb.toString,b.toLocaleString=bb.toString,b.toJSON=bb.toJSON,b.equals=bb.equals,b.compare=bb.compare,b.indexOf=bb.indexOf,b.copy=bb.copy,b.slice=bb.slice,b.readUIntLE=bb.readUIntLE,b.readUIntBE=bb.readUIntBE,b.readUInt8=bb.readUInt8,b.readUInt16LE=bb.readUInt16LE,b.readUInt16BE=bb.readUInt16BE,b.readUInt32LE=bb.readUInt32LE,b.readUInt32BE=bb.readUInt32BE,b.readIntLE=bb.readIntLE,b.readIntBE=bb.readIntBE,b.readInt8=bb.readInt8,b.readInt16LE=bb.readInt16LE,b.readInt16BE=bb.readInt16BE,b.readInt32LE=bb.readInt32LE,b.readInt32BE=bb.readInt32BE,b.readFloatLE=bb.readFloatLE,b.readFloatBE=bb.readFloatBE,b.readDoubleLE=bb.readDoubleLE,b.readDoubleBE=bb.readDoubleBE,b.writeUInt8=bb.writeUInt8,b.writeUIntLE=bb.writeUIntLE,b.writeUIntBE=bb.writeUIntBE,b.writeUInt16LE=bb.writeUInt16LE,b.writeUInt16BE=bb.writeUInt16BE,b.writeUInt32LE=bb.writeUInt32LE,b.writeUInt32BE=bb.writeUInt32BE,b.writeIntLE=bb.writeIntLE,b.writeIntBE=bb.writeIntBE,b.writeInt8=bb.writeInt8,b.writeInt16LE=bb.writeInt16LE,b.writeInt16BE=bb.writeInt16BE,b.writeInt32LE=bb.writeInt32LE,b.writeInt32BE=bb.writeInt32BE,b.writeFloatLE=bb.writeFloatLE,b.writeFloatBE=bb.writeFloatBE,b.writeDoubleLE=bb.writeDoubleLE,b.writeDoubleBE=bb.writeDoubleBE,b.fill=bb.fill,b.inspect=bb.inspect,b.toArrayBuffer=bb.toArrayBuffer,b};var bc=/[^+\/0-9A-Za-z-_]/g})).call(b,c(70).Buffer,function(){return this}())},function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}"use strict";var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}(b)},function(a,b){b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},function(a,b){var c=Array.isArray,d=Object.prototype.toString;a.exports=c||function(a){return!!a&&"[object Array]"==d.call(a)}},function(a,b,c){var d=c(75);a.exports=function(){d.loggingEnabled()&&console.log.apply(console,arguments)}},function(a,b){var c=!1;a.exports={loggingEnabled:function(a){return void 0!==a&&(c=a),c}}},function(a,b,c){function d(a,b,c){var d=f(a);return c&&g(a,b,c)&&(b=void 0),b?e(d,b):d}var e=c(77),f=c(83),g=c(84);a.exports=d},[119,78,79],3,[120,80,81,82],5,function(a,b){((function(b){function c(a){return function(b){return null==b?void 0:b[a]}}function d(a){return f(a)&&p.call(a,"callee")&&(!r.call(a,"callee")||q.call(a)==l)}function e(a){return null!=a&&("function"!=typeof a||!g(a))&&h(s(a))}function f(a){return j(a)&&e(a)}function g(a){var b=i(a)?q.call(a):"";return b==m||b==n}function h(a){return"number"==typeof a&&a>-1&&a%1==0&&k>=a}function i(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function j(a){return!!a&&"object"==typeof a}var k=9007199254740991,l="[object Arguments]",m="[object Function]",n="[object GeneratorFunction]",o=b.Object.prototype,p=o.hasOwnProperty,q=o.toString,r=o.propertyIsEnumerable,s=c("length");a.exports=d})).call(b,function(){return this}())},7,55,10,function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}a.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw(b=arguments[1],b instanceof Error)?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),c.apply(this,h)}else if(f(c))for(h=Array.prototype.slice.call(arguments,1),j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h);return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned&&(e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(d(b))return 1;if(b)return b.length}return 0},c.listenerCount=function(a,b){return a.listenerCount(b)}},function(a,b,c){function d(){e.call(this)}a.exports=d;var e=c(85).EventEmitter,f=c(87);f(d,e),d.Readable=c(88),d.Writable=c(100),d.Duplex=c(101),d.Transform=c(102),d.PassThrough=c(103),d.Stream=d,d.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&k.pause&&k.pause()}function d(){k.readable&&k.resume&&k.resume()}function f(){l||(l=!0,a.end())}function g(){l||(l=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(j(),0===e.listenerCount(this,"error"))throw a}function j(){k.removeListener("data",c),a.removeListener("drain",d),k.removeListener("end",f),k.removeListener("close",g),k.removeListener("error",h),a.removeListener("error",h),k.removeListener("end",j),k.removeListener("close",j),a.removeListener("close",j)}var k=this;k.on("data",c),a.on("drain",d),a._isStdio||b&&b.end===!1||(k.on("end",f),k.on("close",g));var l=!1;return k.on("error",h),a.on("error",h),k.on("end",j),k.on("close",j),a.on("close",j),a.emit("pipe",k),a}},function(a,b){"function"==typeof Object.create?a.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},function(a,b,c){b=a.exports=c(89),b.Stream=c(86),b.Readable=b,b.Writable=c(96),b.Duplex=c(95),b.Transform=c(98),b.PassThrough=c(99)},function(a,b,c){((function(b){function d(a,b){var d=c(95);a=a||{};var e=a.highWaterMark,f=a.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!a.objectMode,b instanceof d&&(this.objectMode=this.objectMode||!!a.readableObjectMode),this.defaultEncoding=a.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(E||(E=c(97).StringDecoder),this.decoder=new E(a.encoding),this.encoding=a.encoding)}function e(a){return c(95),this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void C.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(D.isNullOrUndefined(c))b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&l(a)),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=G)a=G;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||D.isNull(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return D.isBuffer(b)||D.isString(b)||D.isNullOrUndefined(b)||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,l(a)}function l(a){var c=a._readableState;c.needReadable=!1,c.emittedReadable||(F("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?b.nextTick(function(){m(a)}):m(a))}function m(a){F("emit readable"),a.emit("readable"),u(a)}function n(a,c){c.readingMore||(c.readingMore=!0,b.nextTick(function(){o(a,c)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(F("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;F("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&B.listenerCount(a,"data")&&(b.flowing=!0,u(a))}}function q(a,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(function(){s(a,c)}))}function s(a,b){b.resumeScheduled=!1,a.emit("resume"),u(a),b.flowing&&!b.reading&&a.read(0)}function u(a){var b=a._readableState;if(F("flow",b.flowing),b.flowing)do var c=a.read();while(null!==c&&b.flowing)}function v(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):A.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new A(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function w(a){var c=a._readableState;if(c.length>0)throw new Error("endReadable called on non-empty stream");c.endEmitted||(c.ended=!0,b.nextTick(function(){c.endEmitted||0!==c.length||(c.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function x(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function y(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}a.exports=e;var z=c(91),A=c(70).Buffer;e.ReadableState=d;var B=c(85).EventEmitter;B.listenerCount||(B.listenerCount=function(a,b){return a.listeners(b).length});var C=c(86),D=c(92);D.inherits=c(93);var E,F=c(94);F=F&&F.debuglog?F.debuglog("stream"):function(){},D.inherits(e,C),e.prototype.push=function(a,b){var c=this._readableState;return D.isString(a)&&!c.objectMode&&(b=b||c.defaultEncoding,b!==c.encoding&&(a=new A(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(a){return E||(E=c(97).StringDecoder),this._readableState.decoder=new E(a),this._readableState.encoding=a,this};var G=8388608;e.prototype.read=function(a){F("read",a);var b=this._readableState,c=a;if((!D.isNumber(a)||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return F("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?w(this):l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&w(this),null;var d=b.needReadable;F("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,F("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,F("reading or ended",d)),d&&(F("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?v(a,b):null,D.isNull(e)&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&w(this),D.isNull(e)||this.emit("data",e),e},e.prototype._read=function(a){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,c){function d(a){F("onunpipe"),a===l&&f()}function e(){F("onend"),a.end()}function f(){F("cleanup"),a.removeListener("close",i),a.removeListener("finish",j),a.removeListener("drain",q),a.removeListener("error",h),a.removeListener("unpipe",d),l.removeListener("end",e),l.removeListener("end",f),l.removeListener("data",g),!m.awaitDrain||a._writableState&&!a._writableState.needDrain||q()}function g(b){F("ondata");var c=a.write(b);!1===c&&(F("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function h(b){F("onerror",b),k(),a.removeListener("error",h),0===B.listenerCount(a,"error")&&a.emit("error",b)}function i(){a.removeListener("finish",j),k()}function j(){F("onfinish"),a.removeListener("close",i),k()}function k(){F("unpipe"),l.unpipe(a)}var l=this,m=this._readableState;switch(m.pipesCount){case 0:m.pipes=a;break;case 1:m.pipes=[m.pipes,a];break;default:m.pipes.push(a)}m.pipesCount+=1,F("pipe count=%d opts=%j",m.pipesCount,c);var n=(!c||c.end!==!1)&&a!==b.stdout&&a!==b.stderr,o=n?e:f;m.endEmitted?b.nextTick(o):l.once("end",o),a.on("unpipe",d);var q=p(l);return a.on("drain",q),l.on("data",g),a._events&&a._events.error?z(a._events.error)?a._events.error.unshift(h):a._events.error=[h,a._events.error]:a.on("error",h),a.once("close",i),a.once("finish",j),a.emit("pipe",l),m.flowing||(F("pipe resume"),l.resume()),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=y(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,c){var d=C.prototype.on.call(this,a,c);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;if(!e.readableListening)if(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading)e.length&&l(this,e);else{var f=this;b.nextTick(function(){F("readable nexttick read 0"),f.read(0)})}}return d},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){var a=this._readableState;return a.flowing||(F("resume"),a.flowing=!0,a.reading||(F("resume read 0"),this.read(0)),q(this,a)),this},e.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(F("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(F("wrapped data"),b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)D.isFunction(a[e])&&D.isUndefined(this[e])&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return x(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){F("wrapped _read",b),c&&(c=!1,a.resume())},d},e._fromList=v})).call(b,c(90))},function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){a.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},function(a,b,c){((function(a){function c(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function f(a){return null===a}function g(a){return null==a}function h(a){return"number"==typeof a}function i(a){return"string"==typeof a}function j(a){return"symbol"==typeof a}function k(a){return void 0===a}function l(a){return m(a)&&"[object RegExp]"===s(a)}function m(a){return"object"==typeof a&&null!==a}function n(a){return m(a)&&"[object Date]"===s(a)}function o(a){return m(a)&&("[object Error]"===s(a)||a instanceof Error)}function p(a){return"function"==typeof a}function q(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function r(b){return a.isBuffer(b)}function s(a){return Object.prototype.toString.call(a)}b.isArray=c,b.isBoolean=d,b.isNull=f,b.isNullOrUndefined=g,b.isNumber=h,b.isString=i,b.isSymbol=j,b.isUndefined=k,b.isRegExp=l,b.isObject=m,b.isDate=n,b.isError=o,b.isFunction=p,b.isPrimitive=q,b.isBuffer=r})).call(b,c(70).Buffer)},87,function(a,b){},function(a,b,c){((function(b){function d(a){return this instanceof d?(i.call(this,a),j.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",e)):new d(a)}function e(){this.allowHalfOpen||this._writableState.ended||b.nextTick(this.end.bind(this))}function f(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}a.exports=d;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},h=c(92);h.inherits=c(93);var i=c(89),j=c(96);h.inherits(d,i),f(g(j.prototype),function(a){d.prototype[a]||(d.prototype[a]=j.prototype[a])})})).call(b,c(90))},function(a,b,c){((function(b){function d(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function e(a,b){var d=c(95);a=a||{};var e=a.highWaterMark,f=a.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.objectMode=!!a.objectMode,b instanceof d&&(this.objectMode=this.objectMode||!!a.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=a.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){n(b,a)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function f(a){var b=c(95);return this instanceof f||this instanceof b?(this._writableState=new e(a,this),this.writable=!0,void z.call(this)):new f(a)}function g(a,c,d){var e=new Error("write after end");a.emit("error",e),b.nextTick(function(){d(e)})}function h(a,c,d,e){var f=!0;if(!(y.isBuffer(d)||y.isString(d)||y.isNullOrUndefined(d)||c.objectMode)){var g=new TypeError("Invalid non-string/buffer chunk");a.emit("error",g),b.nextTick(function(){e(g)}),f=!1}return f}function i(a,b,c){return!a.objectMode&&a.decodeStrings!==!1&&y.isString(b)&&(b=new x(b,c)),b}function j(a,b,c,e,f){c=i(b,c,e),y.isBuffer(c)&&(e="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;return h||(b.needDrain=!0),b.writing||b.corked?b.buffer.push(new d(c,e,f)):k(a,b,!1,g,c,e,f),h}function k(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function l(a,c,d,e,f){d?b.nextTick(function(){c.pendingcb--,f(e)}):(c.pendingcb--,f(e)),a._writableState.errorEmitted=!0,a.emit("error",e)}function m(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function n(a,c){var d=a._writableState,e=d.sync,f=d.writecb;if(m(d),c)l(a,d,e,c,f);else{var g=s(a,d);g||d.corked||d.bufferProcessing||!d.buffer.length||q(a,d),e?b.nextTick(function(){o(a,d,g,f)}):o(a,d,g,f)}}function o(a,b,c,d){c||p(a,b),b.pendingcb--,d(),v(a,b)}function p(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function q(a,b){if(b.bufferProcessing=!0,a._writev&&b.buffer.length>1){for(var c=[],d=0;d<b.buffer.length;d++)c.push(b.buffer[d].callback);b.pendingcb++,k(a,b,!0,b.length,b.buffer,"",function(a){for(var d=0;d<c.length;d++)b.pendingcb--,c[d](a)}),b.buffer=[]}else{for(var d=0;d<b.buffer.length;d++){var e=b.buffer[d],f=e.chunk,g=e.encoding,h=e.callback,i=b.objectMode?1:f.length;if(k(a,b,!1,i,f,g,h),b.writing){d++;break}}d<b.buffer.length?b.buffer=b.buffer.slice(d):b.buffer.length=0}b.bufferProcessing=!1}function s(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function u(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function v(a,b){var c=s(a,b);return c&&(0===b.pendingcb?(u(a,b),b.finished=!0,a.emit("finish")):u(a,b)),c}function w(a,c,d){c.ending=!0,v(a,c),d&&(c.finished?b.nextTick(d):a.once("finish",d)),c.ended=!0}a.exports=f;var x=c(70).Buffer;f.WritableState=e;var y=c(92);y.inherits=c(93);var z=c(86);y.inherits(f,z),f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},f.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return y.isFunction(b)&&(c=b,b=null),y.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),y.isFunction(c)||(c=function(){}),d.ended?g(this,d,c):h(this,d,a,c)&&(d.pendingcb++,e=j(this,d,a,b,c)),e},f.prototype.cork=function(){var a=this._writableState;a.corked++},f.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.buffer.length||q(this,a))},f.prototype._write=function(a,b,c){c(new Error("not implemented"))},f.prototype._writev=null,f.prototype.end=function(a,b,c){var d=this._writableState;y.isFunction(a)?(c=a,a=null,b=null):y.isFunction(b)&&(c=b,b=null),y.isNullOrUndefined(a)||this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||w(this,d,c)}})).call(b,c(90))},function(a,b,c){function d(a){if(a&&!i(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function g(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var h=c(70).Buffer,i=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},j=b.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void (this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};j.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&56319>=d)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&56319>=d){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},j.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}this.charReceived=b},j.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},function(a,b,c){function d(a,b){this.afterTransform=function(a,c){return e(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function e(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,i.isNullOrUndefined(c)||a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function f(a){if(!(this instanceof f))return new f(a);h.call(this,a),this._transformState=new d(a,this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){i.isFunction(this._flush)?this._flush(function(a){g(b,a)}):g(b)})}function g(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}a.exports=f;var h=c(95),i=c(92);i.inherits=c(93),i.inherits(f,h),f.prototype.push=function(a,b){return this._transformState.needTransform=!1,h.prototype.push.call(this,a,b)},f.prototype._transform=function(a,b,c){throw new Error("not implemented")},f.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},f.prototype._read=function(a){var b=this._transformState;i.isNull(b.writechunk)||!b.writecb||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))}},function(a,b,c){function d(a){return this instanceof d?void e.call(this,a):new d(a)}a.exports=d;var e=c(98),f=c(92);f.inherits=c(93),f.inherits(d,e),d.prototype._transform=function(a,b,c){c(null,a)}},function(a,b,c){a.exports=c(96)},function(a,b,c){a.exports=c(95)},function(a,b,c){a.exports=c(98)},function(a,b,c){a.exports=c(99)},function(a,b,c){((function(b){var d,e=c(74),f=c(69),g=(f.BaseTransform,f.BaseParser),h=c(105);a.exports=d=function(a,b){f.BaseParser.prototype.constructor.apply(this,arguments),a||(a={audioTrackId:-1,videoTrackId:-1,tracks:[]}),this.muxer=new h(a),this.muxer.ondata=this._onMp4Data.bind(this),this.muxer.oncodecinfo=this._onCodecInfo.bind(this),this._codecInfo=null,this._timestamp=0,b&&(this.worker="undefined"!=typeof Worker?new Worker("/dist/mp4-mux-worker-bundle.js"):null),this.worker&&(this.worker.onmessage=function(a){this._onMp4Data(a.data)}.bind(this),this.worker.postMessage({mp4MuxProfile:a}))},d.Profiles=h.Profiles,d.prototype=f.createBaseParser({constructor:d,_onMp4Data:function(a){e("_onMp4Data"),this.enqueue(new f.Transfer(new b(a),"buffer"))},_onCodecInfo:function(a){e("Codec info: "+a),this._codecInfo=a},_onFinish:function(a){e("MP4Mux._onFinish"),this.worker?this.worker.postMessage({eos:!0}):this.muxer&&this.muxer.flush(),g.prototype._onFinish.call(this,a)},_parse:function(a){var b;a.data&&(b=this._timestamp=a.data.timestamp),a.data.flush&&(this._needFlush=!0),e("UnitMP4Mux Timestamp: "+this._timestamp),e("UnitMP4Mux._parse: Payload type: "+typeof a.data),this.worker?(a.data.empty||this.worker.postMessage({data:a.data,meta:a.data.meta,timestamp:b,packetType:h.TYPE_AUDIO_PACKET}),this._needFlush&&(this.worker.postMessage({eos:!0}),this._needFlush=!1)):this.muxer&&(a.data.empty||this.muxer.pushPacket(h.TYPE_AUDIO_PACKET,new Uint8Array(a.data),b,a.data.meta),this._needFlush&&(this.muxer.flush(),this._needFlush=!1))}})})).call(b,c(70).Buffer)},function(a,b,c){function d(a){for(var b=a.length>>1,c=new Uint8Array(b),d=0;b>d;d++)c[d]=parseInt(a.substr(2*d,2),16);return c}function e(a,b){var c,d=0,e=g.RAW;switch(b.codecId){case l:var f=a[d++];e=f,c=1024;break;case k:var i=a[d+1]>>3&3,m=a[d+1]>>1&3;c=1===m?3===i?1152:576:3===m?384:1152}return info={codecDescription:j[b.codecId],codecId:b.codecId,data:a.subarray(d),rate:b.sampleRate,size:b.sampleSize,channels:b.channels,samples:c,packetType:e},h("parsed audio packet with %d samples",c),info}function f(a){var b=0,c=a[b]>>4,d=15&a[b];b++;var e={frameType:c,codecId:d,codecDescription:n[d]};switch(d){case p:var f=a[b++];e.packetType=f,e.compositionTime=(a[b]<<24|a[b+1]<<16|a[b+2]<<8)>>8,b+=3;break;case o:e.packetType=q.NALU,e.horizontalOffset=a[b]>>4&15,e.verticalOffset=15&a[b],e.compositionTime=0,b++}return e.data=a.subarray(b),e}var g,h=c(74),i=c(106),j=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"],k=2,l=10;!function(a){a[a.HEADER=0]="HEADER",a[a.RAW=1]="RAW"}(g||(g={}));var m,n=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"],o=4,p=7;!function(a){a[a.KEY=1]="KEY",a[a.INNER=2]="INNER",a[a.DISPOSABLE=3]="DISPOSABLE",a[a.GENERATED=4]="GENERATED",a[a.INFO=5]="INFO"}(m||(m={}));var q;!function(a){a[a.HEADER=0]="HEADER",a[a.NALU=1]="NALU",a[a.END=2]="END"}(q||(q={}));var r,s=8,t=9,u=!0;!function(a){a[a.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",a[a.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",a[a.MAIN_PACKETS=2]="MAIN_PACKETS"}(r||(r={}));var v=function(){function a(a){var b=this;this.oncodecinfo=function(a){throw new Error("MP4Mux.oncodecinfo is not set")},this.ondata=function(a){throw new Error("MP4Mux.ondata is not set")},this.metadata=a,this.trackStates=this.metadata.tracks.map(function(a,c){var d={trackId:c+1,trackInfo:a,cachedDuration:0,samplesProcessed:0,initializationData:[]};return b.metadata.audioTrackId===c&&(b.audioTrackState=d),b.metadata.videoTrackId===c&&(b.videoTrackState=d),d},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return a.prototype.pushPacket=function(a,b,c,d){switch(this.state===r.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),a){case s:var h=this.audioTrackState,i=e(b,d);if(!h||h.trackInfo.codecId!==i.codecId)throw new Error("Unexpected audio packet codec: "+i.codecDescription);switch(i.codecId){default:throw new Error("Unsupported audio codec: "+i.codecDescription);case k:break;case l:if(i.packetType===g.HEADER)return void h.initializationData.push(i.data)}this.cachedPackets.push({packet:i,timestamp:c,trackId:h.trackId});break;case t:var j=this.videoTrackState,m=f(b);if(!j||j.trackInfo.codecId!==m.codecId)throw new Error("Unexpected video packet codec: "+m.codecDescription);switch(m.codecId){default:throw new Error("unsupported video codec: "+m.codecDescription);case o:break;case p:if(m.packetType===q.HEADER)return void j.initializationData.push(m.data)}this.cachedPackets.push({packet:m,timestamp:c,trackId:j.trackId});break;default:throw new Error("unknown packet type: "+a)}this.state===r.NEED_HEADER_DATA&&this._tryGenerateHeader()},a.prototype.flush=function(){this.cachedPackets.length>0&&this._chunk()},a.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(a){return a.trackInfo.codecId===l||a.trackInfo.codecId===p})?this.state=r.NEED_HEADER_DATA:this.state=r.CAN_GENERATE_HEADER},a.prototype._tryGenerateHeader=function(){var a=this.trackStates.every(function(a){switch(a.trackInfo.codecId){case l:case p:return a.initializationData.length>0;default:return!0}});if(a){for(var b=["isom"],c=1,e=1,f=[],g=0;g<this.trackStates.length;g++){var h,j=this.trackStates[g],m=j.trackInfo;switch(m.codecId){case l:var n=j.initializationData[0];h=new i.AudioSampleEntry("mp4a",c,m.channels,m.samplesize,m.samplerate);var q=new Uint8Array(41+n.length);q.set(d("0000000003808080"),0),q[8]=32+n.length,q.set(d("00020004808080"),9),q[16]=18+n.length,q.set(d("40150000000000FA000000000005808080"),17),q[34]=n.length,q.set(n,35),q.set(d("068080800102"),35+n.length),h.otherBoxes=[new i.RawTag("esds",q)];var s=n[0]>>3;j.mimeTypeCodec="mp4a.40."+s;break;case k:h=new i.AudioSampleEntry(".mp3",c,m.channels,m.samplesize,m.samplerate),j.mimeTypeCodec="mp3";break;case p:var t=j.initializationData[0];h=new i.VideoSampleEntry("avc1",e,m.width,m.height),h.otherBoxes=[new i.RawTag("avcC",t)];var u=t[1]<<16|t[2]<<8|t[3];j.mimeTypeCodec="avc1."+(16777216|u).toString(16).substr(1),b.push("iso2","avc1","mp41");break;case o:h=new i.VideoSampleEntry("VP6F",e,m.width,m.height),h.otherBoxes=[new i.RawTag("glbl",d("00"))],j.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var v,w=i.TrackHeaderFlags.TRACK_ENABLED|i.TrackHeaderFlags.TRACK_IN_MOVIE;j===this.audioTrackState?v=new i.TrackBox(new i.TrackHeaderBox(w,j.trackId,-1,0,0,1,g),new i.MediaBox(new i.MediaHeaderBox(m.timescale,-1,m.language),new i.HandlerBox("soun","SoundHandler"),new i.MediaInformationBox(new i.SoundMediaHeaderBox,new i.DataInformationBox(new i.DataReferenceBox([new i.DataEntryUrlBox(i.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new i.SampleTableBox(new i.SampleDescriptionBox([h]),new i.RawTag("stts",d("0000000000000000")),new i.RawTag("stsc",d("0000000000000000")),new i.RawTag("stsz",d("000000000000000000000000")),new i.RawTag("stco",d("0000000000000000")))))):j===this.videoTrackState&&(v=new i.TrackBox(new i.TrackHeaderBox(w,j.trackId,-1,m.width,m.height,0,g),new i.MediaBox(new i.MediaHeaderBox(m.timescale,-1,m.language),new i.HandlerBox("vide","VideoHandler"),new i.MediaInformationBox(new i.VideoMediaHeaderBox,new i.DataInformationBox(new i.DataReferenceBox([new i.DataEntryUrlBox(i.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new i.SampleTableBox(new i.SampleDescriptionBox([h]),new i.RawTag("stts",d("0000000000000000")),new i.RawTag("stsc",d("0000000000000000")),new i.RawTag("stsz",d("000000000000000000000000")),new i.RawTag("stco",d("0000000000000000"))))))),f.push(v)}var x=new i.MovieExtendsBox(null,[new i.TrackExtendsBox(1,1,0,0,0),new i.TrackExtendsBox(2,1,0,0,0)],null),z=new i.BoxContainerBox("udat",[new i.MetaBox(new i.RawTag("hdlr",d("00000000000000006D6469726170706C000000000000000000")),[new i.RawTag("ilst",d("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),A=new i.MovieHeaderBox(1e3,0,this.trackStates.length+1),B=new i.MovieBox(A,f,x,z),C=new i.FileTypeBox("isom",512,b),D=C.layout(0),E=B.layout(D),F=new Uint8Array(D+E);C.write(F),B.write(F),this.oncodecinfo(this.trackStates.map(function(a){return a.mimeTypeCodec})),this.ondata(F),this.filePos+=F.length,this.state=r.MAIN_PACKETS}},a.prototype._chunk=function(){var a=this.cachedPackets;if(u&&this.videoTrackState){for(var b=a.length-1,c=this.videoTrackState.trackId;b>0&&(a[b].trackId!==c||a[b].packet.frameType!==m.KEY);)b--;b>0&&(a=a.slice(0,b))}if(0!==a.length){for(var d=[],e=0,f=[],g=[],h=0;h<this.trackStates.length;h++){var j=this.trackStates[h],n=j.trackInfo,q=j.trackId,r=a.filter(function(a){return a.trackId===q});if(0!==r.length){var s,t,v,w=new i.TrackFragmentBaseMediaDecodeTimeBox(j.cachedDuration);switch(g.push(e),n.codecId){case l:case k:v=[];for(var b=0;b<r.length;b++){var x=r[b].packet,y=Math.round(x.samples*n.timescale/n.samplerate);d.push(x.data),e+=x.data.length,v.push({duration:y,size:x.data.length}),j.samplesProcessed+=x.samples}var z=i.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;s=new i.TrackFragmentHeaderBox(z,q,0,0,0,0,i.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var A=i.TrackRunFlags.DATA_OFFSET_PRESENT|i.TrackRunFlags.SAMPLE_DURATION_PRESENT|i.TrackRunFlags.SAMPLE_SIZE_PRESENT;t=new i.TrackRunBox(A,v,0,0),j.cachedDuration=Math.round(j.samplesProcessed*n.timescale/n.samplerate);break;case p:case o:v=[];for(var B=j.samplesProcessed,C=B*n.timescale/n.framerate,D=Math.round(C),b=0;b<r.length;b++){var E=r[b].packet;B++;var F=Math.round(B*n.timescale/n.framerate),G=F-D;D=F;var H=Math.round(B*n.timescale/n.framerate+E.compositionTime*n.timescale/1e3);d.push(E.data),e+=E.data.length;var I=E.frameType===m.KEY?i.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:i.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|i.SampleFlags.SAMPLE_IS_NOT_SYNC;v.push({duration:G,size:E.data.length,flags:I,compositionTimeOffset:H-F})}var z=i.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;s=new i.TrackFragmentHeaderBox(z,q,0,0,0,0,i.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var A=i.TrackRunFlags.DATA_OFFSET_PRESENT|i.TrackRunFlags.SAMPLE_DURATION_PRESENT|i.TrackRunFlags.SAMPLE_SIZE_PRESENT|i.TrackRunFlags.SAMPLE_FLAGS_PRESENT|i.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;t=new i.TrackRunBox(A,v,0,0),j.cachedDuration=D,j.samplesProcessed=B;break;default:throw new Error("Un codec")}var J=new i.TrackFragmentBox(s,w,t);f.push(J)}}this.cachedPackets.splice(0,a.length);for(var K=new i.MovieFragmentHeaderBox(++this.chunkIndex),L=new i.MovieFragmentBox(K,f),M=L.layout(0),N=new i.MediaDataBox(d),O=N.layout(M),P=M+8,h=0;h<f.length;h++)f[h].run.dataOffset=P+g[h];var Q=new Uint8Array(M+O);L.write(Q),N.write(Q),this.ondata(Q),this.filePos+=Q.length}},a}();a.exports=v,v.MP3_SOUND_CODEC_ID=k,v.AAC_SOUND_CODEC_ID=l,v.TYPE_AUDIO_PACKET=s,v.TYPE_VIDEO_PACKET=t,v.Profiles={MP3_AUDIO_ONLY:{audioTrackId:0,videoTrackId:-1,tracks:[{codecId:v.MP3_SOUND_CODEC_ID,channels:2,samplerate:44100,samplesize:16,timescale:44100}]}}},function(a,b){function c(a){for(var b=new Uint8Array(4*a.length),c=0,d=0,e=a.length;e>d;d++){var f=a.charCodeAt(d);if(127>=f)b[c++]=f;else{if(f>=55296&&56319>=f){var g=a.charCodeAt(d+1);g>=56320&&57343>=g&&(f=((1023&f)<<10)+(1023&g)+65536,++d)}0!==(4292870144&f)?(b[c++]=248|f>>>24&3,b[c++]=128|f>>>18&63,b[c++]=128|f>>>12&63,b[c++]=128|f>>>6&63,b[c++]=128|63&f):0!==(4294901760&f)?(b[c++]=240|f>>>18&7,b[c++]=128|f>>>12&63,b[c++]=128|f>>>6&63,b[c++]=128|63&f):0!==(4294965248&f)?(b[c++]=224|f>>>12&15,b[c++]=128|f>>>6&63,b[c++]=128|63&f):(b[c++]=192|f>>>6&31,b[c++]=128|63&f)}}return b.subarray(0,c)}function d(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return Array.prototype.concat.apply(a,b)}function e(a,b,c){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=255&c}function f(a){return a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3)}function g(a){return(a-n)/1e3|0}function h(a){return 65536*a|0}function i(a){return 1073741824*a|0}function j(a){return 256*a|0}function k(a){return(31&a.charCodeAt(0))<<10|(31&a.charCodeAt(1))<<5|31&a.charCodeAt(2)}var l,m=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a.exports=l={};var n=-20828448e5,o=[1,0,0,0,1,0,0,0,1],p=[0,0,0],q=function(){function a(a,b){this.boxtype=a,"uuid"===a&&(this.userType=b)}return a.prototype.layout=function(a){this.offset=a;var b=8;return this.userType&&(b+=16),this.size=b,b},a.prototype.write=function(a){return e(a,this.offset,this.size),e(a,this.offset+4,f(this.boxtype)),this.userType?(a.set(this.userType,this.offset+8),24):8},a.prototype.toUint8Array=function(){var a=this.layout(0),b=new Uint8Array(a);return this.write(b),b},a}();l.Box=q;var r=function(a){function b(b,c,d){void 0===c&&(c=0),void 0===d&&(d=0),a.call(this,b),this.version=c,this.flags=d}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.version<<24|this.flags),c+4},b}(q);l.FullBox=r;var s=function(a){function b(b,c,d){a.call(this,"ftype"),this.majorBrand=b,this.minorVersion=c,this.compatibleBrands=d}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+4*(2+this.compatibleBrands.length),this.size},b.prototype.write=function(b){var c=this,d=a.prototype.write.call(this,b);return e(b,this.offset+d,f(this.majorBrand)),e(b,this.offset+d+4,this.minorVersion),d+=8,this.compatibleBrands.forEach(function(a){e(b,c.offset+d,f(a)),d+=4},this),d},b}(q);l.FileTypeBox=s;var t=function(a){function b(b,c){a.call(this,b),this.children=c}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b);return this.children.forEach(function(a){a&&(c+=a.layout(b+c))}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return this.children.forEach(function(a){a&&(c+=a.write(b))}),c},b}(q);l.BoxContainerBox=t;var u=function(a){function b(b,c,e,f){a.call(this,"moov",d([b],c,[e,f])),this.header=b,this.tracks=c,this.extendsBox=e,this.userData=f}return m(b,a),b}(t);l.MovieBox=u;var v=function(a){function b(b,c,d,e,f,g,h,i){void 0===e&&(e=1),void 0===f&&(f=1),void 0===g&&(g=o),void 0===h&&(h=n),void 0===i&&(i=n),a.call(this,"mvhd",0,0),this.timescale=b,this.duration=c,this.nextTrackId=d,this.rate=e,this.volume=f,this.matrix=g,this.creationTime=h,this.modificationTime=i}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+16+4+2+2+8+36+24+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,g(this.creationTime)),e(b,this.offset+c+4,g(this.modificationTime)),e(b,this.offset+c+8,this.timescale),e(b,this.offset+c+12,this.duration),c+=16,e(b,this.offset+c,h(this.rate)),e(b,this.offset+c+4,j(this.volume)<<16),e(b,this.offset+c+8,0),e(b,this.offset+c+12,0),c+=16,e(b,this.offset+c,h(this.matrix[0])),e(b,this.offset+c+4,h(this.matrix[1])),e(b,this.offset+c+8,h(this.matrix[2])),e(b,this.offset+c+12,h(this.matrix[3])),e(b,this.offset+c+16,h(this.matrix[4])),e(b,this.offset+c+20,h(this.matrix[5])),e(b,this.offset+c+24,i(this.matrix[6])),e(b,this.offset+c+28,i(this.matrix[7])),e(b,this.offset+c+32,i(this.matrix[8])),c+=36,e(b,this.offset+c,0),e(b,this.offset+c+4,0),e(b,this.offset+c+8,0),e(b,this.offset+c+12,0),e(b,this.offset+c+16,0),e(b,this.offset+c+20,0),c+=24,e(b,this.offset+c,this.nextTrackId),c+=4},b}(r);l.MovieHeaderBox=v,function(a){a[a.TRACK_ENABLED=1]="TRACK_ENABLED",a[a.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",a[a.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(l.TrackHeaderFlags||(l.TrackHeaderFlags={}));var w=(l.TrackHeaderFlags,function(a){function b(b,c,d,e,f,g,h,i,j,k,l){void 0===h&&(h=0),void 0===i&&(i=0),void 0===j&&(j=o),void 0===k&&(k=n),void 0===l&&(l=n),a.call(this,"tkhd",0,b),this.trackId=c,this.duration=d,this.width=e,this.height=f,this.volume=g,this.alternateGroup=h,this.layer=i,this.matrix=j,this.creationTime=k,this.modificationTime=l}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+20+8+6+2+36+8,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,g(this.creationTime)),e(b,this.offset+c+4,g(this.modificationTime)),e(b,this.offset+c+8,this.trackId),e(b,this.offset+c+12,0),e(b,this.offset+c+16,this.duration),c+=20,e(b,this.offset+c,0),e(b,this.offset+c+4,0),e(b,this.offset+c+8,this.layer<<16|this.alternateGroup),e(b,this.offset+c+12,j(this.volume)<<16),c+=16,e(b,this.offset+c,h(this.matrix[0])),e(b,this.offset+c+4,h(this.matrix[1])),e(b,this.offset+c+8,h(this.matrix[2])),e(b,this.offset+c+12,h(this.matrix[3])),e(b,this.offset+c+16,h(this.matrix[4])),e(b,this.offset+c+20,h(this.matrix[5])),e(b,this.offset+c+24,i(this.matrix[6])),e(b,this.offset+c+28,i(this.matrix[7])),e(b,this.offset+c+32,i(this.matrix[8])),c+=36,e(b,this.offset+c,h(this.width)),e(b,this.offset+c+4,h(this.height)),c+=8},b}(r));l.TrackHeaderBox=w;var x=function(a){function b(b,c,d,e,f){void 0===d&&(d="unk"),void 0===e&&(e=n),void 0===f&&(f=n),a.call(this,"mdhd",0,0),this.timescale=b,this.duration=c,this.language=d,this.creationTime=e,this.modificationTime=f}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+16+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,g(this.creationTime)),e(b,this.offset+c+4,g(this.modificationTime)),e(b,this.offset+c+8,this.timescale),e(b,this.offset+c+12,this.duration),e(b,this.offset+c+16,k(this.language)<<16),c+20},b}(r);l.MediaHeaderBox=x;var y=function(a){function b(b,d){a.call(this,"hdlr",0,0),this.handlerType=b,this.name=d,this._encodedName=c(this.name)}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+8+12+(this._encodedName.length+1),this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,0),e(b,this.offset+c+4,f(this.handlerType)),e(b,this.offset+c+8,0),e(b,this.offset+c+12,0),e(b,this.offset+c+16,0),c+=20,b.set(this._encodedName,this.offset+c),b[this.offset+c+this._encodedName.length]=0,c+=this._encodedName.length+1},b}(r);l.HandlerBox=y;var z=function(a){function b(b){void 0===b&&(b=0),a.call(this,"smhd",0,0),this.balance=b}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,j(this.balance)<<16),c+4},b}(r);l.SoundMediaHeaderBox=z;var A=function(a){function b(b,c){void 0===b&&(b=0),void 0===c&&(c=p),a.call(this,"vmhd",0,0),this.graphicsMode=b,this.opColor=c}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+8,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.graphicsMode<<16|this.opColor[0]),e(b,this.offset+c+4,this.opColor[1]<<16|this.opColor[2]),c+8},b}(r);l.VideoMediaHeaderBox=A,l.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var B=function(a){function b(b,d){void 0===d&&(d=null),a.call(this,"url ",0,b),this.location=d,b&l.SELF_CONTAINED_DATA_REFERENCE_FLAG||(this._encodedLocation=c(d))}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b);return this._encodedLocation&&(c+=this._encodedLocation.length+1),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return this._encodedLocation&&(b.set(this._encodedLocation,this.offset+c),b[this.offset+c+this._encodedLocation.length]=0,c+=this._encodedLocation.length),c},b}(r);l.DataEntryUrlBox=B;var C=function(a){function b(b){a.call(this,"dref",0,0),this.entries=b}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b)+4;return this.entries.forEach(function(a){c+=a.layout(b+c)}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.entries.length),this.entries.forEach(function(a){c+=a.write(b)}),c},b}(r);l.DataReferenceBox=C;var D=function(a){function b(b){a.call(this,"dinf",[b]),this.dataReference=b}return m(b,a),b}(t);l.DataInformationBox=D;var E=function(a){function b(b){a.call(this,"stsd",0,0),this.entries=b}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b);return c+=4,this.entries.forEach(function(a){c+=a.layout(b+c)}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.entries.length),c+=4,this.entries.forEach(function(a){c+=a.write(b)}),c},b}(r);l.SampleDescriptionBox=E;var F=function(a){function b(b,c,d,e,f){a.call(this,"stbl",[b,c,d,e,f]),this.sampleDescriptions=b,this.timeToSample=c,this.sampleToChunk=d,this.sampleSizes=e,this.chunkOffset=f}return m(b,a),b}(t);l.SampleTableBox=F;var G=function(a){function b(b,c,d){a.call(this,"minf",[b,c,d]),this.header=b,this.info=c,this.sampleTable=d}return m(b,a),b}(t);l.MediaInformationBox=G;var H=function(a){function b(b,c,d){a.call(this,"mdia",[b,c,d]),this.header=b,this.handler=c,this.info=d}return m(b,a),b}(t);l.MediaBox=H;var I=function(a){function b(b,c){a.call(this,"trak",[b,c]),this.header=b,this.media=c}return m(b,a),b}(t);l.TrackBox=I;var J=function(a){function b(b,c,d,e,f){a.call(this,"trex",0,0),this.trackId=b,this.defaultSampleDescriptionIndex=c,this.defaultSampleDuration=d,this.defaultSampleSize=e,this.defaultSampleFlags=f}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+20,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.trackId),e(b,this.offset+c+4,this.defaultSampleDescriptionIndex),e(b,this.offset+c+8,this.defaultSampleDuration),e(b,this.offset+c+12,this.defaultSampleSize),e(b,this.offset+c+16,this.defaultSampleFlags),c+20},b}(r);l.TrackExtendsBox=J;var K=function(a){function b(b,c,e){a.call(this,"mvex",d([b],c,[e])),this.header=b,this.tracDefaults=c,this.levels=e}return m(b,a),b}(t);l.MovieExtendsBox=K;var L=function(a){function b(b,c){a.call(this,"meta",0,0),this.handler=b,this.otherBoxes=c}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b);return c+=this.handler.layout(b+c),this.otherBoxes.forEach(function(a){c+=a.layout(b+c)}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return c+=this.handler.write(b),this.otherBoxes.forEach(function(a){c+=a.write(b)}),c},b}(r);l.MetaBox=L;var M=function(a){function b(b){a.call(this,"mfhd",0,0),this.sequenceNumber=b}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.sequenceNumber),c+4},b}(r);l.MovieFragmentHeaderBox=M,function(a){a[a.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",a[a.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",a[a.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",a[a.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",a[a.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(l.TrackFragmentFlags||(l.TrackFragmentFlags={}));var N=l.TrackFragmentFlags,O=function(a){function b(b,c,d,e,f,g,h){a.call(this,"tfhd",0,b),this.trackId=c,this.baseDataOffset=d,this.sampleDescriptionIndex=e,this.defaultSampleDuration=f,this.defaultSampleSize=g,this.defaultSampleFlags=h}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b)+4,d=this.flags;return d&N.BASE_DATA_OFFSET_PRESENT&&(c+=8),d&N.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(c+=4),d&N.DEFAULT_SAMPLE_DURATION_PRESENT&&(c+=4),d&N.DEFAULT_SAMPLE_SIZE_PRESENT&&(c+=4),d&N.DEFAULT_SAMPLE_FLAGS_PRESENT&&(c+=4),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b),d=this.flags;return e(b,this.offset+c,this.trackId),c+=4,d&N.BASE_DATA_OFFSET_PRESENT&&(e(b,this.offset+c,0),e(b,this.offset+c+4,this.baseDataOffset),c+=8),d&N.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(e(b,this.offset+c,this.sampleDescriptionIndex),c+=4),d&N.DEFAULT_SAMPLE_DURATION_PRESENT&&(e(b,this.offset+c,this.defaultSampleDuration),c+=4),d&N.DEFAULT_SAMPLE_SIZE_PRESENT&&(e(b,this.offset+c,this.defaultSampleSize),c+=4),d&N.DEFAULT_SAMPLE_FLAGS_PRESENT&&(e(b,this.offset+c,this.defaultSampleFlags),c+=4),c},b}(r);l.TrackFragmentHeaderBox=O;var P=function(a){function b(b){a.call(this,"tfdt",0,0),this.baseMediaDecodeTime=b}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+4,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,this.baseMediaDecodeTime),c+4},b}(r);l.TrackFragmentBaseMediaDecodeTimeBox=P;var Q=function(a){function b(b,c,d){a.call(this,"traf",[b,c,d]),this.header=b,this.decodeTime=c,this.run=d}return m(b,a),b}(t);l.TrackFragmentBox=Q,function(a){a[a.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",a[a.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",a[a.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",a[a.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",a[a.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",a[a.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",a[a.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",a[a.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",a[a.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(l.SampleFlags||(l.SampleFlags={})),l.SampleFlags,!function(a){a[a.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",a[a.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",a[a.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",a[a.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",a[a.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",a[a.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(l.TrackRunFlags||(l.TrackRunFlags={}));var R=l.TrackRunFlags,S=function(a){function b(b,c,d,e){a.call(this,"trun",1,b),this.samples=c,this.dataOffset=d,this.firstSampleFlags=e}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b)+4,d=this.samples.length,e=this.flags;return e&R.DATA_OFFSET_PRESENT&&(c+=4),e&R.FIRST_SAMPLE_FLAGS_PRESENT&&(c+=4),e&R.SAMPLE_DURATION_PRESENT&&(c+=4*d),e&R.SAMPLE_SIZE_PRESENT&&(c+=4*d),e&R.SAMPLE_FLAGS_PRESENT&&(c+=4*d),e&R.SAMPLE_COMPOSITION_TIME_OFFSET&&(c+=4*d),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b),d=this.samples.length,f=this.flags;e(b,this.offset+c,d),c+=4,f&R.DATA_OFFSET_PRESENT&&(e(b,this.offset+c,this.dataOffset),c+=4),f&R.FIRST_SAMPLE_FLAGS_PRESENT&&(e(b,this.offset+c,this.firstSampleFlags),c+=4);for(var g=0;d>g;g++){var h=this.samples[g];f&R.SAMPLE_DURATION_PRESENT&&(e(b,this.offset+c,h.duration),c+=4),f&R.SAMPLE_SIZE_PRESENT&&(e(b,this.offset+c,h.size),c+=4),f&R.SAMPLE_FLAGS_PRESENT&&(e(b,this.offset+c,h.flags),c+=4),f&R.SAMPLE_COMPOSITION_TIME_OFFSET&&(e(b,this.offset+c,h.compositionTimeOffset),c+=4)}return c},b}(r);l.TrackRunBox=S;var T=function(a){function b(b,c){a.call(this,"moof",d([b],c)),this.header=b,this.trafs=c}return m(b,a),b}(t);l.MovieFragmentBox=T;var U=function(a){function b(b){a.call(this,"mdat"),this.chunks=b}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b);return this.chunks.forEach(function(a){c+=a.length}),this.size=c},b.prototype.write=function(b){var c=this,d=a.prototype.write.call(this,b);return this.chunks.forEach(function(a){b.set(a,c.offset+d),d+=a.length},this),d},b}(q);l.MediaDataBox=U;var V=function(a){function b(b,c){a.call(this,b),this.dataReferenceIndex=c}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+8,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,0),e(b,this.offset+c+4,this.dataReferenceIndex),c+8},b}(q);l.SampleEntry=V;var W=function(a){function b(b,c,d,e,f,g){void 0===d&&(d=2),void 0===e&&(e=16),void 0===f&&(f=44100),void 0===g&&(g=null),a.call(this,b,c),this.channelCount=d,this.sampleSize=e,this.sampleRate=f,this.otherBoxes=g}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(a){c+=a.layout(b+c)}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return e(b,this.offset+c,0),e(b,this.offset+c+4,0),e(b,this.offset+c+8,this.channelCount<<16|this.sampleSize),e(b,this.offset+c+12,0),e(b,this.offset+c+16,this.sampleRate<<16),c+=20,this.otherBoxes&&this.otherBoxes.forEach(function(a){c+=a.write(b)}),c},b}(V);l.AudioSampleEntry=W,l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var X=function(a){function b(b,c,d,e,f,g,h,i,j,k){if(void 0===f&&(f=""),void 0===g&&(g=72),void 0===h&&(h=72),void 0===i&&(i=1),void 0===j&&(j=l.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===k&&(k=null),a.call(this,b,c),this.width=d,this.height=e,this.compressorName=f,this.horizResolution=g,this.vertResolution=h,this.frameCount=i,this.depth=j,this.otherBoxes=k,f.length>31)throw new Error("invalid compressor name")}return m(b,a),b.prototype.layout=function(b){var c=a.prototype.layout.call(this,b)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(a){c+=a.layout(b+c)}),this.size=c},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);e(b,this.offset+c,0),e(b,this.offset+c+4,0),e(b,this.offset+c+8,0),e(b,this.offset+c+12,0),c+=16,e(b,this.offset+c,this.width<<16|this.height),e(b,this.offset+c+4,h(this.horizResolution)),e(b,this.offset+c+8,h(this.vertResolution)),c+=12,e(b,this.offset+c,0),e(b,this.offset+c+4,this.frameCount<<16),c+=6,b[this.offset+c]=this.compressorName.length;for(var d=0;31>d;d++)b[this.offset+c+d+1]=d<this.compressorName.length?127&this.compressorName.charCodeAt(d):0;return c+=32,e(b,this.offset+c,this.depth<<16|65535),c+=4,this.otherBoxes&&this.otherBoxes.forEach(function(a){c+=a.write(b)}),c},b}(V);l.VideoSampleEntry=X;var Y=function(a){function b(b,c){a.call(this,b),this.data=c}return m(b,a),b.prototype.layout=function(b){return this.size=a.prototype.layout.call(this,b)+this.data.length,this.size},b.prototype.write=function(b){var c=a.prototype.write.call(this,b);return b.set(this.data,this.offset+c),c+this.data.length},b}(q);l.RawTag=Y},function(a,b,c){((function(b){var d,e=c(74),f=c(69),g=(f.BaseTransform,c(108));c(109),a.exports=d=function(){f.BaseParser.prototype.constructor.apply(this,arguments),this.parser=new g,this.parser.onFrame=this._onMp3Frame.bind(this),this.parser.onNoise=this._onNoise.bind(this),this.parser.onClose=this._onClose.bind(this),this._sampleRate=0,this._bitRate=0,this._timestamp=0},d.prototype=f.createBaseParser({constructor:d,_onMp3Frame:function(a,c,d){e("Found frame length "+a.length+" bitRate="+c+", sampleRate="+d);var g=new b(a),h=1152;g.meta={mimeType:"audio/mpeg",codecId:2,channels:2,bitRate:c,sampleRate:d,sampleSize:16},g.duration=h,g.timestamp=this._timestamp,this.enqueue(new f.Transfer(g,"buffer")),this._bitRate=c,this._timestamp+=h},_onNoise:function(){e("mp3 has noise")},_onClose:function(){e("parser closed")},_parse:function(a){return e("parse called"),a.data.empty?(e("empty transfer"),void this.enqueue(a)):void this.parser.push(new Uint8Array(a.data))}})})).call(b,c(70).Buffer)},function(a,b,c){var d=c(74),e=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],f=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],g=function(){function a(){this.buffer=null,this.bufferSize=0}return a.prototype.push=function(a){var b;if(this.bufferSize>0){var c=a.length+this.bufferSize;if(!this.buffer||this.buffer.length<c){var e=new Uint8Array(c);this.bufferSize>0&&e.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=e}this.buffer.set(a,this.bufferSize),this.bufferSize=c,a=this.buffer,b=c}else b=a.length;d("push "+b);for(var f,g=0;b>g&&(f=this._parse(a,g,b))>0;)g+=f;var h=b-g;h>0&&(!this.buffer||this.buffer.length<h?this.buffer=new Uint8Array(a.subarray(g,b)):this.buffer.set(a.subarray(g,b))),this.bufferSize=h},a.prototype._parse=function(a,b,c){if(d("_parse"),b+2>c)return-1;if(255===a[b]||224===(224&a[b+1])){if(b+24>c)return-1;var g=a[b+1]>>3&3,h=a[b+1]>>1&3,j=a[b+2]>>4&15,k=a[b+2]>>2&3,l=!!(2&a[b+2]);if(1!==g&&0!==j&&15!==j&&3!==k){var m=3===g?3-h:3===h?3:4,p=1e3*e[14*m+j-1],q=3===g?0:2===g?1:2,r=f[3*q+k],s=l?1:0,t=3===h?(3===g?12:6)*p/r+s<<2:(3===g?144:72)*p/r+s|0;return b+t>c?-1:(this.onFrame&&(d("onFrame"),this.onFrame(a.subarray(b,b+t),p,r)),t)}}for(var u=b+2;c>u;){if(255===a[u-1]&&224===(224&a[u]))return this.onNoise&&this.onNoise(a.subarray(b,u-1)),u-b-1;u++}return-1},a.prototype.close=function(){this.bufferSize>0&&this.onNoise&&this.onNoise(this.buffer.subarray(0,this.bufferSize)),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()},a}();a.exports=g},function(a,b){var c=1e9;a.exports={TIMESCALE_SECONDS:c}},function(a,b,c){var d,e=c(111),f=c(69),g=f.BaseSink,h=c(112);a.exports=d=function(a){if(g.prototype.constructor.call(this),!e.haveMediaSourceSupportMimeType(a))throw new Error("Local MediaSource doesn't support provided MIME type: "+a);var b;b=arguments.length>1?Array.prototype.slice.call(arguments):a instanceof Array?a:[a],this.mimeTypes=b,this.mediaSource=new MediaSource,this.mseWriter=new h(this.mediaSource),this.dataSources=[],this.selectedDataSourceIndex=0,this.mimeTypes.forEach(function(a){var b={mimeType:a};this.mseWriter.listen(b),this.dataSources.push(b)}.bind(this))},d.prototype=f.createBaseSink({constructor:d,_onData:function(){var a=this.dataSources[this.selectedDataSourceIndex];if(!a||!a.onData)throw new Error("DataSource is not existing or has no onData function defined");var b=this.dequeue();b&&a.onData(b.data)},getMediaSourceUrl:function(){return URL.createObjectURL(this.mediaSource)}})},function(a,b){var c;a.exports=c={haveGlobalWindow:function(){return"undefined"!=typeof window},haveMediaSourceExtensions:function(){return c.haveGlobalWindow()&&window.MediaSource},haveMediaSourceSupportMimeType:function(a){return c.haveMediaSourceExtensions()&&window.MediaSource.isTypeSupported(a)}}},function(a,b){var c=function(){function a(a,b){this.mediaSource=a,this.dataSource=b,this.dataSource.onData=this.pushData.bind(this),this.updateEnabled=!1,this.buffer=[],this.sourceBuffer=null,this.sourceBufferUpdatedBound=null}return a.prototype.allowWriting=function(){this.updateEnabled=!0,this.update()},a.prototype.pushData=function(a){this.buffer.push(a),this.update()},a.prototype.update=function(){if(this.updateEnabled&&0!==this.buffer.length){this.sourceBuffer||(this.sourceBuffer=this.mediaSource.addSourceBuffer(this.dataSource.mimeType),this.sourceBufferUpdatedBound=this._sourceBufferUpdated.bind(this),this.sourceBuffer.addEventListener("update",this.sourceBufferUpdatedBound)),this.updateEnabled=!1;var a=this.buffer.shift();if(null===a)return void this.sourceBuffer.removeEventListener("update",this.sourceBufferUpdatedBound);a.timestamp&&(this.sourceBuffer.timestampOffset=a.timestamp/1e9),this.sourceBuffer.appendBuffer(a)}},a.prototype._sourceBufferUpdated=function(a){this.updateEnabled=!0,this.update()},a.prototype.finish=function(){this.buffer.push(null),this.update()},a}(),d=function(){function a(a){this.bufferWriters=[],this.mediaSource=a,this.mediaSourceOpened=!1,this.mediaSource.addEventListener("sourceopen",function(a){this.mediaSourceOpened=!0,this.bufferWriters.forEach(function(a){a.allowWriting()})}.bind(this)),this.mediaSource.addEventListener("sourceend",function(a){this.mediaSourceOpened=!1}.bind(this))}return a.prototype.listen=function(a){var b=new c(this.mediaSource,a);this.bufferWriters.push(b),this.mediaSourceOpened&&b.allowWriting()},a}();a.exports=d},function(a,b,c){var d,e,f=c(69);e=function(a){f.BasePushSrc.prototype.constructor.call(this);var b=this.req=new XMLHttpRequest;b.open("GET",a,!0),b.responseType="arraybuffer",b.onload=function(a){this.enqueue(new f.Transfer(new Uint8Array(b.response),"binary")),this.enqueue(new f.Transfer(null,"binary"))}.bind(this),b.send()},e.prototype=f.createBasePushSrc({constructor:e}),a.exports=d={Src:e}},function(a,b,c){var d,e,f,g=c(69),h=c(115);c(76),e=function(a,b){g.prototype.constructor.call(this);var c=h.createReadStream(a,b);this.on("end",function(){c.close()}),this.addOutput(c)},e.prototype=g.create({constructor:e}),f=function(a,b){g.prototype.constructor.call(this);var c=h.createWriteStream(a,b);this.on("finish",function(){c.close()}),this.addInput(c)},f.prototype=g.create({constructor:f}),a.exports=d={Src:e,Sink:f}},function(a,b,c){var d=c(111);a.exports=d.haveGlobalWindow()?new(c(116)):c(!function(){var a=new Error('Cannot find module "fs"');throw a.code="MODULE_NOT_FOUND",a}())},function(a,b,c){!function(b){a.exports=b()}(function(){function a(){return!1}function b(a){return!!(a&&a.data instanceof Object)&&!c(a)}function c(a){return!!(a&&a.data instanceof ArrayBuffer)}function d(a,c){var d,e=a.length,f=c;for(d=0;e>d;++d){if(!b(f))throw new Error("ENOENT");f=f.data[a[d]]}return f}String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}();var e={utf8:"utf-8",utf16le:"utf-16le",utf16be:"utf-16be"},f=function(a){var b=Date.now();this.root={mtime:b,ctime:b,atime:b,data:{}},this.fnDone=function(){var b=arguments;"function"==typeof a&&setTimeout(function(){a.apply(null,b)},0)}};return f.prototype.arrayBufferToString=function(a,b){return"undefined"==typeof TextDecoder?String.fromCharCode.apply(null,new Uint16Array(a)):(b=e[b]||"utf8",(new TextDecoder(b)).decode(new DataView(a)))},f.prototype.stringToArrayBuffer=function(a,b){var c;if(b=e[b]||"utf8","undefined"==typeof TextEncoder){c=new ArrayBuffer(2*a.length);for(var d=new Uint16Array(c),f=0,g=a.length;g>f;++f)d[f]=a.charCodeAt(f)}else c=(new TextEncoder(b)).encode(a).buffer;return c},f.prototype.getNode=function(a){return d(this.parsePath(a),this.root)},f.prototype.joinPath=function(){var a=[],b=arguments||[];return a=this.parsePath(Array.prototype.slice.call(b).join("/")),("/"===b[0][0]?"/":"")+a.join("/")},f.prototype.parsePath=function(a){var b=[];return a=a||"/",a.split(/\/+/).forEach(function(a){a=a.trim(),a.length&&"."!==a&&(".."===a?b.pop():b.push(a))}),b},f.prototype.normalizePath=function(a){return"/"+this.parsePath(a).join("/")},f.prototype.dirname=function(a){var b=this.parsePath(a);return b=b.slice(0,b.length-1),"/"+b.join("/")},f.prototype.basename=function(a){var b=this.parsePath(a);return b.length?b.pop():""},f.prototype.fileSizeSI=function(a,b,c,d,e){return(b=Math,c=b.log,d=1e3,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(e?2:0)+" "+(e?"kMGTPEZY"[--e]+"B":"Bytes")},f.prototype.fileSizeIEC=function(a,b,c,d,e){return(b=Math,c=b.log,d=1024,e=c(a)/c(d)|0,a/b.pow(d,e)).toFixed(e?2:0)+" "+(e?"KMGTPEZY"[--e]+"iB":"Bytes")},f.prototype.statSync=function(c){var e=this.parsePath(c),f=d(e,this.root),g=b(f);if(!f||!f.data)throw new Error("ENOENT");return this.fnDone("stat",c),{size:g?Object.keys(f.data).length:f.data.byteLength,ctime:new Date(f.ctime),mtime:new Date(f.mtime),atime:new Date(f.atime),isFile:function(){return!g},isDirectory:function(){return g},isBlockDevice:a,isCharacterDevice:a,isSymbolicLink:a,isFIFO:a,isSocket:a}},f.prototype.existsSync=function(a){var c,d=this.parsePath(a),e=d.length,f=this.root;for(c=0;e>c;++c){if(!b(f))return this.fnDone("exists",a),!1;f=f.data[d[c]]}return this.fnDone("exists",a),!!f},f.prototype.mkdirSync=function(a){var c=this.parsePath(a),e=d(c.slice(0,c.length-1),this.root),f=Date.now();if(!c.length||!b(e))throw new Error("ENODIR");return e.data[c[c.length-1]]={data:{},ctime:f,mtime:f,atime:f},e.mtime=f,this.fnDone("mkdir",a),this},f.prototype.mkdirpSync=function(a){var e,f,g,h=this.parsePath(a),i=h.length;if(!h.length)throw new Error("ENODIR");for(f=0;i>f;++f){if(e=h.slice(0,f+1),g=d(e,this.root),c(g))throw new Error("ENODIR");b(g)||this.mkdirSync(e.join("/"))}return this.fnDone("mkdirp",a),this},f.prototype.readdirSync=function(a){var c=this.parsePath(a),e=d(c,this.root);if(!b(e))throw new Error("ENODIR");return e.atime=Date.now(),this.fnDone("readdir",a),Object.keys(e.data)},f.prototype.rmdirSync=function(a){var c=this.parsePath(a),e=d(c,this.root),f=c.pop(),g=d(c,this.root);if(!b(e))throw new Error("ENODIR");if(Object.keys(e.data).length)throw new Error("ENOTEMPTY");return delete g.data[f],g.mtime=Date.now(),this.fnDone("rmdir",a),this},f.prototype.unlinkSync=function(a){var b=this.dirname(a),c=this.basename(a),e=d(this.parsePath(b),this.root);return delete e.data[c],e.mtime=Date.now(),this.fnDone("unlink",a),this},f.prototype.rmrfSync=function(a){var c=this.parsePath(a),e=c.pop(),f=d(c,this.root);if(!b(f))throw new Error("ENODIR");return e?delete f.data[e]:f.data={},f.mtime=Date.now(),this.fnDone("rmrf",a),this},f.prototype.writeFileSync=function(a,c,e){var f,g,h=this.parsePath(a),i=h.pop(),j=this.existsSync(a),k=d(h,this.root);if(!b(k))throw new Error("ENODIR");if(!i)throw new Error("EINVALIDPATH");return"string"==typeof e&&(e={encoding:e}),e=e||{encoding:null},f="string"==typeof c?this.stringToArrayBuffer(c,e.encoding):c,g=Date.now(),j?(k.data[i].data=f,k.data[i].atime=g,k.data[i].mtime=g):(k.data[i]={data:f,ctime:g,mtime:g,atime:g},k.mtime=g),k.atime=g,this.fnDone("writeFile",a),this},f.prototype.readFileSync=function(a,b){var e=this.parsePath(a),f=d(e,this.root);if("string"==typeof b&&(b={encoding:b}),b=b||{encoding:null},!c(f))throw new Error("ENOENT");return f.atime=Date.now(),this.fnDone("readFile",a),b.encoding?this.arrayBufferToString(f.data,b.encoding):f.data},f.prototype.renameSync=function(a,c){var e=this.parsePath(a),f=d(e,this.root),g=d(e.slice(0,e.length-1),this.root),h=e[e.length-1],i=this.parsePath(c),j=d(i,this.root),k=d(i.slice(0,i.length-1),this.root),l=i[i.length-1],m=Date.now();if(!e.length||!i.length)throw new Error("ENOENT");if(!b(g||!b(k)))throw new Error("ENODIR");if(j)throw new Error("EEXISTS");return k.data[l]=j=f,j.ctime=m,k.mtime=m,delete g.data[h],g.mtime=m,this.fnDone("rename",{oldPath:a,newPath:c}),this},["stat","exists","readdir","mkdirp","mkdir","rmdir","rmrf","unlink"].forEach(function(a){f.prototype[a]=function(b,c){var d;try{d=this[a+"Sync"](b)}catch(e){return c(e)}return c(null,d)}}),["writeFile","readFile"].forEach(function(a){f.prototype[a]=function(b,c,d){var e;d||(d=c,c=void 0);try{e=this[a+"Sync"](b,c)}catch(f){return d(f)}return d(null,e)}}),["rename"].forEach(function(a){f.prototype[a]=function(b,c,d){var e;try{e=this[a+"Sync"](b,c)}catch(f){return d(f)}return d(null,e)}}),f})},function(a,b){var c={HTTP:"http",RTMP:"rtmp",HLS:"hls"};a.exports=c},function(a,b){a.exports={AAC:"audio/aac",M3U8:"application/x-mpegURL",HLS:"application/vnd.apple.mpegurl",MP4A:"audio/mp4",MP3:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBMA:"audio/webm",getTypeByExtension:function(a){var b={mp3:this.MP3,aac:this.AAC,mp4:this.MP4A,mp4a:this.MP4A,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return b[a]||null}}},function(a,b,c,d,e){function f(a,b){return null==b?a:g(b,h(b),a)}var g=c(d),h=c(e);a.exports=f},function(a,b,c,d,e,f){function g(a){return function(b){return null==b?void 0:b[a]}}function h(a){return null!=a&&j(v(a))}function i(a,b){return a="number"==typeof a||q.test(a)?+a:-1,b=null==b?u:b,a>-1&&a%1==0&&b>a}function j(a){return"number"==typeof a&&a>-1&&a%1==0&&u>=a}function k(a){for(var b=m(a),c=b.length,d=c&&a.length,e=!!d&&j(d)&&(p(a)||o(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&i(h,d)||s.call(a,h))&&g.push(h)}return g}function l(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function m(a){if(null==a)return[];l(a)||(a=Object(a));var b=a.length;b=b&&j(b)&&(p(a)||o(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Array(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&i(h,b)||"constructor"==h&&(e||!s.call(a,h))||f.push(h);return f}var n=c(d),o=c(e),p=c(f),q=/^\d+$/,r=Object.prototype,s=r.hasOwnProperty,t=n(Object,"keys"),u=9007199254740991,v=g("length"),w=t?function(a){var b=null==a?void 0:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&h(a)?k(a):l(a)?t(a):[]}:k;a.exports=w},function(a,b,c,d){function e(a,b){return o(a,b,l)}function f(a){return function(b){return null==b?void 0:b[a]}}function g(a,b){return function(c,d){var e=c?p(c):0;if(!i(e))return a(c,d);for(var f=b?e:-1,g=j(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function h(a){return function(b,c,d){for(var e=j(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function i(a){return"number"==typeof a&&a>-1&&a%1==0&&m>=a}function j(a){return k(a)?a:Object(a)}function k(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}var l=c(d),m=9007199254740991,n=g(e),o=h(),p=f("length");a.exports=n}]))}),
define("lib/helpers/name-helper",["require","exports","module","vendor/handlebars-runtime","lib/helpers/lang-helper"],function(a,b,c){var d=a("vendor/handlebars-runtime"),e=a("lib/helpers/lang-helper"),f=c.exports={get:function(a,b){var c=d.Utils.escapeExpression(a.username||a.title||a.name);return b===!0&&(c=e.possessive(c)),c}}}),
define("lib/html-helper",["require","exports","module","_","vendor/handlebars-runtime"],function(a,b,c){var d=a("_"),e=a("vendor/handlebars-runtime"),f=c.exports={getMarkup:function(a,b,c){if(Array.isArray(b))return b.map(function(b){return f.getMarkup(a,b,c)}).join("");c=c||{};var g=[],h=c.whitelist,i=c.closingTag==="self"?"/":"",j=c.closingTag===!0?"</"+a+">":"";return d.each(b,function(a,b){b==="style"&&typeof a=="object"&&(a=this.getStyleAttr(a)),(!h||h.indexOf(b)!==-1)&&g.push(" "+b+'="'+e.Utils.escapeExpression(a)+'"')},this),"<"+a+g.join("")+i+">"+j},getStyleAttr:function(a){return d.map(a,function(a,b){return a!=null&&a!==""?b+":"+a+";":""}).join("")}}}),
define("lib/helpers/lang-helper",["require","exports","module"],function(a,b,c){var d=c.exports={possessive:function(a){return a+"’s"}}})